(this["webpackJsonpkanban-board-app"]=this["webpackJsonpkanban-board-app"]||[]).push([[0],{194:function(e,t){},202:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);var r=a(9),n=a.n(r),o=a(1),c=a(18),i=a(0),s=a.n(i),d=a(15),l=a.n(d),u=a(20),p=a(84),b=a(14),g=a(88),h=a(161),f=window.location.pathname.replace(/\//g,"_");g.a.plugin(h.a);var m=null,j=null,v=new g.a("kanban-board-v1@".concat(f),{auto_compaction:!0}),y=new g.a("kanban-board-config-v1@".concat(f),{auto_compaction:!0});function O(){return x.apply(this,arguments)}function x(){return(x=Object(c.a)(n.a.mark((function e(){var t,a,r,o,c,i,s,d,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=17;break}return e.next=3,v.allDocs({});case 3:if(t=e.sent,!m){e.next=10;break}return e.next=7,m.allDocs({});case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=null;case 11:a=e.t0,r=new Set,o=Object(b.a)(t.rows);try{for(o.s();!(c=o.n()).done;)i=c.value,r.add(i.id)}catch(n){o.e(n)}finally{o.f()}if(a){s=Object(b.a)(a.rows);try{for(s.s();!(d=s.n()).done;)l=d.value,r.add(l.id)}catch(n){s.e(n)}finally{s.f()}}j=v.sync(m,{live:!0,retry:!0,doc_ids:Array.from(r.values())}).on("change",(function(e){})).on("paused",(function(e){})).on("active",(function(e){})).on("complete",(function(e){})).on("error",(function(e){}));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){try{j.cancel()}catch(t){}j=null}return e.next=3,O();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,a){return B.apply(this,arguments)}function B(){return(B=Object(c.a)(n.a.mark((function e(t,a,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){try{j.cancel()}catch(n){}j=null}if(!m){e.next=10;break}return e.prev=2,e.next=5,m.close();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:m=null;case 10:if(!t||!t.match(/^https?:\/\//)){e.next=14;break}return m=new g.a(t,{auth:{username:a,password:r}}),e.next=14,O();case 14:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function A(){return v}function C(){return y}a(202);var D=a(79),N=a(75),T=a(272),I=a(262),_=a(273),E=a(3),F=a(160),U=a(111),L=a(110),M=window.matchMedia("(prefers-color-scheme: dark)").matches,V=Object(F.a)({palette:M?{type:"dark",primary:{main:U.a[500]},secondary:{main:L.a[500]}}:{type:"light",primary:{main:U.a[500]},secondary:{main:L.a[500]}}});function K(e){var t="";return e.location.pathname&&(e.location.pathname.startsWith("/kanban/")?t="kanban":e.location.pathname.startsWith("/calendar/")?t="calendar":e.location.pathname.startsWith("/edit/")?t="edit":e.location.pathname.startsWith("/config/")&&(t="config")),t}var R=a(73),W=a.n(R),Y=W()(),P=Y.async("ACTIONS_UPDATE_APP_CONFIG"),q=Y.async("ACTIONS_RESET_APPLICATION"),H={showAlertDialog:Y("ACTIONS_SHOW_ALERT_DIALOG"),closeAlertDialog:Y("ACTIONS_CLOSE_ALERT_DIALOG"),startUpdateAppConfig:P.started,doneUpdateAppConfig:P.done,failedUpdateAppConfig:P.failed,startResetApplication:q.started,doneResetApplication:q.done,failedResetApplication:q.failed},G=W()(),z=G.async("ACTIONS_ADD_BOARD"),$=G.async("ACTIONS_CHANGE_ACTIVE_BOARD"),X=G.async("ACTIONS_UPDATE_BOARD_NAME"),J=G.async("ACTIONS_DELETE_BOARD"),Q=G.async("ACTIONS_ADD_STICKY"),Z=G.async("ACTIONS_UPDATE_STICKY"),ee=G.async("ACTIONS_UPDATE_STICKY_LANES"),te=G.async("ACTIONS_ARCHIVE_STICKY"),ae=G.async("ACTIONS_UNARCHIVE_STICKY"),re=G.async("ACTIONS_DELETE_STICKY"),ne=G.async("ACTIONS_EDIT_BOARD_AND_STICKYS"),oe=G.async("ACTIONS_REFRESH_ACTIVE_BOARD"),ce={startAddBoard:z.started,doneAddBoard:z.done,failedAddBoard:z.failed,startChangeActiveBoard:$.started,doneChangeActiveBoard:$.done,failedChangeActiveBoard:$.failed,startUpdateBoardName:X.started,doneUpdateBoardName:X.done,failedUpdateBoardName:X.failed,startDeleteBoard:J.started,doneDeleteBoard:J.done,failedDeleteBoard:J.failed,startAddSticky:Q.started,doneAddSticky:Q.done,failedAddSticky:Q.failed,startUpdateSticky:Z.started,doneUpdateSticky:Z.done,failedUpdateSticky:Z.failed,startUpdateStickyLanes:ee.started,doneUpdateStickyLanes:ee.done,failedUpdateStickyLanes:ee.failed,startArchiveSticky:te.started,doneArchiveSticky:te.done,failedArchiveSticky:te.failed,startUnarchiveSticky:ae.started,doneUnarchiveSticky:ae.done,failedUnarchiveSticky:ae.failed,startDeleteSticky:re.started,doneDeleteSticky:re.done,failedDeleteSticky:re.failed,startEditBoardAndStickys:ne.started,doneEditBoardAndStickys:ne.done,failedEditBoardAndStickys:ne.failed,startRefreshActiveBoard:oe.started,doneRefreshActiveBoard:oe.done,failedRefreshActiveBoard:oe.failed};function ie(e){return{showAlertDialog:function(t){return e(H.showAlertDialog(t))},closeAlertDialog:function(){return e(H.closeAlertDialog())},updateAppConfig:function(t){return e(H.startUpdateAppConfig(t))},resetApplication:function(){return e(H.startResetApplication())},changeActiveBoard:function(t){return e(ce.startChangeActiveBoard({boardId:t}))},refreshActiveBoard:function(){return e(ce.startRefreshActiveBoard({}))}}}function se(e){return Object.assign({},e.appEvents)}var de=a(67),le=a(51),ue=a(138),pe=a(37),be=a(74),ge=a(31);function he(e){return"".concat(String(e.getFullYear()).padStart(4,"0"),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))}function fe(e){var t=e.match(/^(?:(-?\d{4,})-(\d{2})-(\d{2}))|(?:(-?\d{4,})(\d{2})(\d{2}))$/);return t?new Date(Number(t[1]),Number(t[2])-1,Number(t[3])):null}var me="# This is a board note.\n* Markdown syntax is available.\n* Go [Editor](#/edit/) to edit this note.",je={boards:[{type:"kanbanBoard",name:"Welcome Board",taskStatuses:[{value:"Backlog",caption:"\ud83d\udecc Backlog",className:"status-backlog"},{value:"ToDo",caption:"\ud83d\udcef ToDo",className:"status-todo"},{value:"InProgress",caption:"\u26cf InProgress",className:"status-inprogress"},{value:"Staging",caption:"\ud83d\udce6 Staging",className:"status-staging"},{value:"Done",caption:"\ud83c\udf89 Done",className:"status-done",completed:!0}],teamOrStories:[{value:"Team A",caption:"\ud83d\udc06 Team A",className:"team-or-story-team-a"},{value:"Team B",caption:"\ud83e\udd83 Team B",className:"team-or-story-team-b"},{value:"Team C",caption:"\ud83d\udc0d Team C",className:"team-or-story-team-c"}],tags:[{value:"bug",className:"tag-bug"},{value:"ok",className:"tag-ok"},{value:"NG",className:"tag-NG"},{value:"PR",className:"tag-PR"},{value:"rejected",className:"tag-rejected"},{value:"pending",className:"tag-pending"},{value:"merged",className:"tag-merged"},{value:"critical",className:"tag-critical"},{value:"high",className:"tag-high"},{value:"moderate",className:"tag-moderate"},{value:"low",className:"tag-low"},{value:"\u2b50",className:"tag-star"},{value:"\u2b50\u2b50",className:"tag-star"},{value:"\u2b50\u2b50\u2b50",className:"tag-star"}],displayBarcode:!0,displayMemo:!0,displayFlags:!0,displayTags:!0,preferArchive:!1,boardStyle:"/* per-board customized styles */\n/*\n.KanbanBoardView-sticky-note {width: 200px}\n.KanbanBoardView-header-cell-task-statuses {min-width: 210px}\ntable.KanbanBoardView-board tbody th {\n    padding: 10px;\n    white-space: nowrap;\n}\n*/\ntable.KanbanBoardView-board thead th.status-backlog {\n    background-color: var(--weak-header-bg-color);\n}\ntable.KanbanBoardView-board td.status-backlog {\n    background-color: var(--weak-data-bg-color);\n}\ntable.KanbanBoardView-board thead th.status-done {\n    background-color: var(--weak-header-bg-color);\n}\ntable.KanbanBoardView-board td.status-done {\n    background-color: var(--weak-data-bg-color);\n}\n.team-or-story-team-b .KanbanBoardView-sticky-note {\n    background-color: var(--sticky-blue-color);\n}\n.status-done .KanbanBoardView-sticky-note {\n    background-color: var(--sticky-green-color);\n}\n.KanbanBoardView-sticky-tags .tag-bug {\n    color: white;\n    background-color: red;\n}\n.KanbanBoardView-sticky-tags .tag-ok {\n    color: white;\n    background-color: green;\n}\n.KanbanBoardView-sticky-tags .tag-NG {\n    color: white;\n    background-color: #e91e63;\n}\n.KanbanBoardView-sticky-tags .tag-PR {\n    color: white;\n    background-color: purple;\n}\n.KanbanBoardView-sticky-tags .tag-rejected {\n    color: white;\n    background-color: #990000;\n}\n.KanbanBoardView-sticky-tags .tag-pending {\n    color: black;\n    background-color: #ff9900;\n}\n.KanbanBoardView-sticky-tags .tag-merged {\n    color: white;\n    background-color: #006666;\n}\n.KanbanBoardView-sticky-tags .tag-critical {\n    color: white;\n    background-color: red;\n}\n.KanbanBoardView-sticky-tags .tag-high {\n    color: white;\n    background-color: #ff5522;\n}\n.KanbanBoardView-sticky-tags .tag-moderate {\n    color: black;\n    background-color: #ffcc00;\n}\n.KanbanBoardView-sticky-tags .tag-low {\n    color: black;\n    background-color: #cc9900;\n}\n.KanbanBoardView-sticky-tags .tag-star {\n    color: inherit;\n    background-color: inherit;\n}\n",calendarStyle:"/* per-board customized styles */\ndiv.CalendarView-item-chip.status-done {\n    background-color: var(--sticky-green-color);\n}\n",boardNote:""}],records:[{type:"kanban",dueDate:"",description:"# Welcome to the Kanban Board App!\n* This is a kanban (or sticky).\n* Write one task for one kanban.\n* To add a kanban to the board, Tap or click the \u201c+\u201d icon in the upper left corner of the board.\n* Tap or click on kanban to edit.\n* Drag and drop the kanban to change the status.",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"Backlog"},{type:"kanban",dueDate:"",description:"* Board and Kanban data are stored in the browser's local \u201cindexed DB\u201d.\n* You can use a remote [\u201cCouchDB\u201d](https://couchdb.apache.org) server to synchronize multiple device boards.\n* You can get a fully managed CouchDB server with [\u201cIBM Cloudant\xae\u201d from IBM Cloud](https://www.ibm.com/cloud/cloudant).\n* Create an [IBM Cloud Lite account](https://www.ibm.com/cloud/free/) and get a free tier without a credit card.",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"ToDo"},{type:"kanban",dueDate:"",description:"# Go [Settings](#/config/) to setup\n\n----\n\n* `remote.endpointUrl`: Cloudant `External Endpoint` URL w/ DB name\n  * e.g. `https://???-bluemix.cloudant.com/mydb`\n* `remote.user`: Cloudant `API Key`\n* `remote.password`: Cloudant `API Key`'s password",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"ToDo"},{type:"kanban",dueDate:"",description:"* You can customize the appearance and behavior of the board and kanban in the configuration editor view.\n\n\n----\n\n# Go [Editor](#/edit/) to setup",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"InProgress"},{type:"kanban",dueDate:"2030-01-01",description:"### Hello, kanban board !\n\n* ~aaa~\n  * **bbb**\n* *ccc*\n\n----\n\nhttps://shellyln.github.io/\n\n![logo](https://shellyln.github.io/assets/image/shellyln.png)",barcode:"12345",memo:"memo",flags:["Marked"],tags:["PR","bug","ok","NG","rejected","pending","merged","critical","high","moderate","low","\u2b50\u2b50\u2b50"],boardId:"",teamOrStory:"Team B",taskStatus:"Staging"},{type:"kanban",dueDate:"",description:"# What is a Kanban Board?\nhttps://www.atlassian.com/agile/kanban/boards",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team C",taskStatus:"Backlog"},{type:"kanban",dueDate:"",description:"# What are WIP limits?\nhttps://www.atlassian.com/agile/kanban/wip-limits",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team C",taskStatus:"Backlog"},{type:"kanban",dueDate:"",description:"# Get Started With Cloudant in IBM Cloud\nhttps://developer.ibm.com/clouddataservices/docs/cloudant/get-started/",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team C",taskStatus:"ToDo"},{type:"kanban",dueDate:"",description:"# Sign up for IBM Cloud\nhttps://cloud.ibm.com/registration",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team C",taskStatus:"ToDo"},{type:"kanban",dueDate:"",description:"Release Kanban board app v0.0.1\n\n![image](https://shellyln.github.io/knbn/images/icons/icon-32x32.png)",barcode:"",memo:"",flags:[],tags:["ok","merged","v0.0.1","feature-something","#1","#2"],boardId:"",teamOrStory:"Team A",taskStatus:"Done"},{type:"kanban",dueDate:"2030-01-01",description:"This record is archived.",barcode:"",memo:"",flags:["Archived"],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"Backlog"}]},ve=null;function ye(){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(c.a)(n.a.mark((function e(){var t,a,r,o,i,s,d,l,u,p,g,h,f,m;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ve){e.next=25;break}return t=A(),a=null,e.next=5,t.allDocs({include_docs:!0});case 5:if(0!==(a=e.sent).rows.length){e.next=19;break}return r=je,e.next=10,t.bulkDocs(Object(pe.a)(r.boards.map((function(e){return Object.assign({},e,{boardNote:me})}))),{});case 10:o=e.sent,i=new Date,s=Object(b.a)(r.records);try{for(s.s();!(d=s.n()).done;)(l=d.value).dueDate=he(i),l.boardId=o[0].id}catch(j){s.e(j)}finally{s.f()}return e.next=16,t.bulkDocs(Object(pe.a)(r.records),{});case 16:return e.next=18,t.allDocs({include_docs:!0});case 18:a=e.sent;case 19:u=a.rows.filter((function(e){return e.doc&&"kanbanBoard"===e.doc.type})).map((function(e){return e.doc})).sort((function(e,t){return String(e.name).toLocaleLowerCase()>=String(t.name).toLocaleLowerCase()?String(e.name)===String(t.name)?0:1:-1})),p=Object(b.a)(u);try{for(h=function(){var e=g.value,t=a.rows.filter((function(t){return t.doc&&"kanban"===t.doc.type&&t.doc.boardId===e._id})).map((function(e){return e.doc}));e.records=t},p.s();!(g=p.n()).done;)h()}catch(j){p.e(j)}finally{p.f()}f={activeBoard:u[0],boards:u,activeBoardId:u[0]._id,activeBoardIndex:0},m=function(){var e=Object(c.a)(n.a.mark((function e(a,r){var o,c,i,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(r,{});case 2:if(o=e.sent){e.next=5;break}return e.abrupt("return",a);case 5:return e.next=7,t.find({selector:{type:"kanban",boardId:o._id}});case 7:return c=e.sent.docs,o.records=c,i=Math.max(0,a.boards.findIndex((function(e){return e._id===o._id}))),s=a.boards.slice(0,i).concat([o],a.boards.slice(i+1)),e.abrupt("return",Object.assign({},a,{boards:s,activeBoardId:o._id,activeBoard:o,activeBoardIndex:i}));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ve=Object(be.reducerWithInitialState)(f).case(ce.startAddBoard,(function(e,a){var r=je,n={type:"kanbanBoard",name:a.boardName,taskStatuses:r.boards[0].taskStatuses,teamOrStories:r.boards[0].teamOrStories,tags:r.boards[0].tags,displayBarcode:r.boards[0].displayBarcode,displayMemo:r.boards[0].displayMemo,displayFlags:r.boards[0].displayFlags,displayTags:r.boards[0].displayTags,preferArchive:r.boards[0].preferArchive,boardStyle:r.boards[0].boardStyle,calendarStyle:r.boards[0].calendarStyle,boardNote:r.boards[0].boardNote};return t.post(n,{}).then((function(t){var r=n;r._id=t.id,r._rev=t.rev,r.records=[],e.boards=e.boards.concat([r]),Ie().dispatch(ce.doneAddBoard({params:a,result:Object.assign({},e,{activeBoardId:t.id,activeBoard:r})})),setTimeout((function(){Ie().dispatch(Object(ge.d)("/kanban/".concat(t.id)))}),30)})).catch((function(e){Ie().dispatch(ce.failedAddBoard({params:a,error:e})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to add board: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30)})),e})).case(ce.doneAddBoard,(function(e,t){return setTimeout((function(){k().then((function(){})).catch((function(e){alert(e.message)}))}),1500),t.result})).case(ce.failedAddBoard,(function(e,t){return e})).case(ce.startChangeActiveBoard,(function(e,t){return Object(c.a)(n.a.mark((function a(){var r;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m(e,t.boardId);case 3:r=a.sent,Ie().dispatch(ce.doneChangeActiveBoard({params:t,result:r})),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),Ie().dispatch(ce.failedChangeActiveBoard({params:t,error:a.t0})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to change active board: "+a.t0.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){Ie().dispatch(H.closeAlertDialog()),setTimeout((function(){Ie().dispatch(Object(ge.d)("/kanban/"))}),500)}}))}),30);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))(),e})).case(ce.doneChangeActiveBoard,(function(e,t){return t.result})).case(ce.failedChangeActiveBoard,(function(e,t){return e})).case(ce.startUpdateBoardName,(function(e,a){return Object(c.a)(n.a.mark((function r(){var o,c,i,s,d,l,u;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.get(a.boardId);case 3:if(o=r.sent){r.next=6;break}return r.abrupt("return",e);case 6:return r.next=8,t.find({selector:{type:"kanban",boardId:o._id}});case 8:return c=r.sent.docs,i=Object.assign({},o,{name:a.boardName}),r.next=12,t.put(i,{});case 12:s=r.sent,i.records=c,i._id=s.id,i._rev=s.rev,d=e.boards.findIndex((function(e){return e._id===a.boardId})),l=Object.assign({},e.boards[d]||{},i),u=d>=0?e.boards.slice(0,d).concat([l],e.boards.slice(d+1)):e.boards,Ie().dispatch(ce.doneUpdateBoardName({params:a,result:Object.assign({},e,{boards:u,activeBoardId:l._id,activeBoard:l})})),r.next=26;break;case 22:r.prev=22,r.t0=r.catch(0),Ie().dispatch(ce.failedUpdateBoardName({params:a,error:r.t0})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to change board name: "+r.t0.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30);case 26:case"end":return r.stop()}}),r,null,[[0,22]])})))(),e})).case(ce.doneUpdateBoardName,(function(e,t){return t.result})).case(ce.failedUpdateBoardName,(function(e,t){return e})).case(ce.startDeleteBoard,(function(e,a){return Object(c.a)(n.a.mark((function r(){var o,c,i,s,d,l,u,p,g;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!(e.boards.length<=1)){r.next=3;break}return r.abrupt("return",e);case 3:return r.next=5,t.get(a.boardId);case 5:if(o=r.sent){r.next=8;break}return r.abrupt("return",e);case 8:return r.next=10,t.find({selector:{type:"kanban",boardId:a.boardId}});case 10:c=r.sent.docs,i=Object(b.a)(c),r.prev=12,i.s();case 14:if((s=i.n()).done){r.next=20;break}return d=s.value,r.next=18,t.remove(d,{});case 18:r.next=14;break;case 20:r.next=25;break;case 22:r.prev=22,r.t0=r.catch(12),i.e(r.t0);case 25:return r.prev=25,i.f(),r.finish(25);case 28:return r.next=30,t.remove(o,{});case 30:return l=e.activeBoardId===a.boardId?e.boards[0]._id:e.activeBoardId,r.next=33,m(e,l);case 33:u=r.sent,p=u.boards.findIndex((function(e){return e._id===a.boardId})),g=p>=0?u.boards.slice(0,p).concat(u.boards.slice(p+1)):u.boards,setTimeout((function(){Ie().dispatch(ce.doneDeleteBoard({params:a,result:Object.assign({},e,{boards:g,activeBoardId:l,activeBoard:u.activeBoard,activeBoardIndex:u.boards.findIndex((function(e){return e._id===l}))})})),setTimeout((function(){Ie().dispatch(Object(ge.d)("/kanban/".concat(l))),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Done",message:"Board is deleted successfully",singleButton:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30)}),30)}),30),r.next=43;break;case 39:r.prev=39,r.t1=r.catch(0),Ie().dispatch(ce.failedDeleteBoard({params:a,error:r.t1})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to delete board: "+r.t1.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30);case 43:case"end":return r.stop()}}),r,null,[[0,39],[12,22,25,28]])})))(),e})).case(ce.doneDeleteBoard,(function(e,t){return t.result})).case(ce.failedDeleteBoard,(function(e,t){return e})).case(ce.startAddSticky,(function(e,a){var r=new Date,n={type:"kanban",dueDate:he(new Date(r.getFullYear(),r.getMonth(),r.getDate())),description:"# Untitled",barcode:"",memo:"",flags:[],tags:[],boardId:e.activeBoardId,taskStatus:e.activeBoard.taskStatuses[0].value,teamOrStory:e.activeBoard.teamOrStories[0].value},o=e.activeBoard.records.concat([n]),c=Object.assign({},e.activeBoard,{records:o});return t.post(n,{}).then((function(t){n._id=t.id,n._rev=t.rev,Ie().dispatch(ce.doneAddSticky({params:a,result:Object.assign({},e,{activeBoard:c})}))})).catch((function(e){Ie().dispatch(ce.failedAddSticky({params:a,error:e})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to add sticky: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30)})),e})).case(ce.doneAddSticky,(function(e,t){return setTimeout((function(){k().then((function(){})).catch((function(e){alert(e.message)}))}),1500),t.result})).case(ce.failedAddSticky,(function(e,t){return e})).case(ce.startUpdateSticky,(function(e,a){var r=e.activeBoard.records.findIndex((function(e){return e._id===a._id}));if(r<0)return e;var n=Object.assign({},e.activeBoard.records[r],{dueDate:a.dueDate,description:a.description,barcode:a.barcode,memo:a.memo,tags:a.tags,flags:a.flags,taskStatus:a.taskStatus,teamOrStory:a.teamOrStory}),o=e.activeBoard.records.slice(0,r).concat([n],e.activeBoard.records.slice(r+1)),c=Object.assign({},e.activeBoard,{records:o});return t.put(n,{}).then((function(t){n._id=t.id,n._rev=t.rev,Ie().dispatch(ce.doneUpdateSticky({params:a,result:Object.assign({},e,{activeBoard:c})}))})).catch((function(e){Ie().dispatch(ce.failedUpdateSticky({params:a,error:e})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to save the sticky: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30)})),e})).case(ce.doneUpdateSticky,(function(e,t){return t.result})).case(ce.failedUpdateSticky,(function(e,t){return e})).case(ce.startUpdateStickyLanes,(function(e,a){var r=e.activeBoard.records.findIndex((function(e){return e._id===a.kanbanId}));if(r<0)return e;var n=Object.assign({},e.activeBoard.records[r],{taskStatus:a.taskStatusValue,teamOrStory:a.teamOrStoryValue}),o=e.activeBoard.records.slice(0,r).concat([n],e.activeBoard.records.slice(r+1)),c=Object.assign({},e.activeBoard,{records:o});return t.put(n,{}).then((function(t){n._id=t.id,n._rev=t.rev,Ie().dispatch(ce.doneUpdateStickyLanes({params:a,result:Object.assign({},e,{activeBoard:c})}))})).catch((function(e){Ie().dispatch(ce.failedUpdateStickyLanes({params:a,error:e})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to save the sticky: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30)})),e})).case(ce.doneUpdateStickyLanes,(function(e,t){return t.result})).case(ce.failedUpdateStickyLanes,(function(e,t){return e})).case(ce.startArchiveSticky,(function(e,a){var r=e.activeBoard.records.findIndex((function(e){return e._id===a.kanbanId}));if(r<0)return e;var n=Object.assign({},e.activeBoard.records[r]);n.flags=(n.flags||[]).filter((function(e){return"Archived"!==e})),n.flags.push("Archived");var o=e.activeBoard.records.slice(0,r).concat([n],e.activeBoard.records.slice(r+1)),c=Object.assign({},e.activeBoard,{records:o});return t.put(n,{}).then((function(t){n._id=t.id,n._rev=t.rev,Ie().dispatch(ce.doneArchiveSticky({params:a,result:Object.assign({},e,{activeBoard:c})}))})).catch((function(e){Ie().dispatch(ce.failedArchiveSticky({params:a,error:e})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to archive the sticky: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30)})),e})).case(ce.doneArchiveSticky,(function(e,t){return t.result})).case(ce.failedArchiveSticky,(function(e,t){return e})).case(ce.startUnarchiveSticky,(function(e,a){var r=e.activeBoard.records.findIndex((function(e){return e._id===a.kanbanId}));if(r<0)return e;var n=Object.assign({},e.activeBoard.records[r]);n.flags=(n.flags||[]).filter((function(e){return"Archived"!==e}));var o=e.activeBoard.records.slice(0,r).concat([n],e.activeBoard.records.slice(r+1)),c=Object.assign({},e.activeBoard,{records:o});return t.put(n,{}).then((function(t){n._id=t.id,n._rev=t.rev,Ie().dispatch(ce.doneUnarchiveSticky({params:a,result:Object.assign({},e,{activeBoard:c})}))})).catch((function(e){Ie().dispatch(ce.failedUnarchiveSticky({params:a,error:e})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to unarchive the sticky: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30)})),e})).case(ce.doneUnarchiveSticky,(function(e,t){return t.result})).case(ce.failedUnarchiveSticky,(function(e,t){return e})).case(ce.startDeleteSticky,(function(e,a){var r=e.activeBoard.records.findIndex((function(e){return e._id===a.kanbanId}));if(r<0)return e;var n=e.activeBoard.records[r],o=e.activeBoard.records.slice(0,r).concat(e.activeBoard.records.slice(r+1)),c=Object.assign({},e.activeBoard,{records:o});return t.remove(n,{}).then((function(t){Ie().dispatch(ce.doneDeleteSticky({params:a,result:Object.assign({},e,{activeBoard:c})}))})).catch((function(e){Ie().dispatch(ce.failedDeleteSticky({params:a,error:e})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to delete the sticky: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30)})),e})).case(ce.doneDeleteSticky,(function(e,t){return t.result})).case(ce.failedDeleteSticky,(function(e,t){return e})).case(ce.startEditBoardAndStickys,(function(e,a){return Object(c.a)(n.a.mark((function r(){var o,c,i,s,d,l,u,p,g,h,f,m,j;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!((o=e.boards.findIndex((function(e){return e._id===a._id})))<0)){r.next=4;break}return r.abrupt("return",e);case 4:return c=Object.assign({},e.boards[o],{name:a.name||"Untitled",taskStatuses:a.taskStatuses||je.boards[0].taskStatuses,teamOrStories:a.teamOrStories||je.boards[0].teamOrStories,tags:a.tags||[],displayBarcode:!!a.displayBarcode,displayMemo:!!a.displayMemo,displayFlags:!!a.displayFlags,displayTags:!!a.displayTags,preferArchive:!!a.preferArchive,boardStyle:a.boardStyle||"",calendarStyle:a.calendarStyle||"",boardNote:a.boardNote||""}),r.next=7,t.put(c,{});case 7:return i=r.sent,c._id=i.id,c._rev=i.rev,s=e.boards.slice(0,o).concat([c],e.boards.slice(o+1)),d=c._id===e.activeBoard._id?c:e.activeBoard,r.next=14,t.find({selector:{type:"kanban",boardId:c._id}});case 14:l=r.sent.docs,u=[],p=Object(b.a)(a.records||[]),r.prev=17,h=n.a.mark((function e(){var a,r,o,i,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g.value,r=l.find((function(e){return e._id===a._id})),o=null,!r){e.next=12;break}return o=Object.assign({},a,{type:"kanban",boardId:c._id,_rev:r._rev}),e.next=7,t.put(o,{});case 7:i=e.sent,o._id=i.id,o._rev=i.rev,e.next=20;break;case 12:return delete(o=Object.assign({},a,{type:"kanban",boardId:c._id}))._id,delete o._rev,e.next=17,t.post(o,{});case 17:s=e.sent,o._id=s.id,o._rev=s.rev;case 20:u.push(o);case 21:case"end":return e.stop()}}),e)})),p.s();case 20:if((g=p.n()).done){r.next=24;break}return r.delegateYield(h(),"t0",22);case 22:r.next=20;break;case 24:r.next=29;break;case 26:r.prev=26,r.t1=r.catch(17),p.e(r.t1);case 29:return r.prev=29,p.f(),r.finish(29);case 32:f=Object(b.a)(l),r.prev=33,j=n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=m.value,u.find((function(e){return e._id===a._id}))){e.next=5;break}return e.next=5,t.remove(a,{});case 5:case"end":return e.stop()}}),e)})),f.s();case 36:if((m=f.n()).done){r.next=40;break}return r.delegateYield(j(),"t2",38);case 38:r.next=36;break;case 40:r.next=45;break;case 42:r.prev=42,r.t3=r.catch(33),f.e(r.t3);case 45:return r.prev=45,f.f(),r.finish(45);case 48:c.records=u,Ie().dispatch(ce.doneEditBoardAndStickys({params:a,result:Object.assign({},e,{boards:s,activeBoardId:d._id,activeBoard:d})})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Done",message:"Board is saved successfully",singleButton:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30),r.next=57;break;case 53:r.prev=53,r.t4=r.catch(0),Ie().dispatch(ce.failedEditBoardAndStickys({params:a,error:r.t4})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to save the board: "+r.t4.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30);case 57:case"end":return r.stop()}}),r,null,[[0,53],[17,26,29,32],[33,42,45,48]])})))(),e})).case(ce.doneEditBoardAndStickys,(function(e,t){return setTimeout((function(){k().then((function(){})).catch((function(e){alert(e.message)}))}),1500),t.result})).case(ce.failedEditBoardAndStickys,(function(e,t){return e})).case(ce.startRefreshActiveBoard,(function(e,t){return Object(c.a)(n.a.mark((function a(){var r;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m(e,e.activeBoard._id);case 3:r=a.sent,Ie().dispatch(ce.doneRefreshActiveBoard({params:t,result:r})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),Ie().dispatch(ce.failedRefreshActiveBoard({params:t,error:a.t0}));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))(),e})).case(ce.doneRefreshActiveBoard,(function(e,t){return t.result})).case(ce.failedRefreshActiveBoard,(function(e,t){return e}));case 25:return e.abrupt("return",ve);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xe=W()(),ke={showToday:xe("ACTIONS_SHOW_TODAY"),showNextMonth:xe("ACTIONS_SHOW_NEXT_MONTH"),showPreviousMonth:xe("ACTIONS_SHOW_PREVIOUS_MONTH"),showNextYear:xe("ACTIONS_SHOW_NEXT_YEAR"),showPreviousYear:xe("ACTIONS_SHOW_PREVIOUS_YEAR")},Se=null;function we(){return Be.apply(this,arguments)}function Be(){return(Be=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Se||(t={activeMonth:new Date},Se=Object(be.reducerWithInitialState)(t).case(ke.showToday,(function(e){var t=new Date,a=new Date(t.getFullYear(),t.getMonth(),1);return Object.assign({},e,{activeMonth:a})})).case(ke.showNextMonth,(function(e){var t=e.activeMonth,a=new Date(t.getFullYear(),t.getMonth()+1,1);return Object.assign({},e,{activeMonth:a})})).case(ke.showPreviousMonth,(function(e){var t=e.activeMonth,a=new Date(t.getFullYear(),t.getMonth()-1,1);return Object.assign({},e,{activeMonth:a})})).case(ke.showNextYear,(function(e){var t=e.activeMonth,a=new Date(t.getFullYear()+1,t.getMonth(),1);return Object.assign({},e,{activeMonth:a})})).case(ke.showPreviousYear,(function(e){var t=e.activeMonth,a=new Date(t.getFullYear()-1,t.getMonth(),1);return Object.assign({},e,{activeMonth:a})}))),e.abrupt("return",Se);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae=null;function Ce(){return De.apply(this,arguments)}function De(){return(De=Object(c.a)(n.a.mark((function e(){var t,a,r,o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ae){e.next=17;break}return t=C(),a=A(),r=null,e.next=6,t.allDocs({include_docs:!0});case 6:if(r=e.sent,o={remote:{endpointUrl:"",user:"",password:""},display:{autoUpdate:!1,autoUpdateInterval:2419200}},0!==r.rows.length){e.next=14;break}return e.next=11,t.post(Object(D.a)({type:"appConfig"},o),{});case 11:return e.next=13,t.allDocs({include_docs:!0});case 13:r=e.sent;case 14:(i={alertDialog:{open:!1,title:"",message:"",onClose:function(){}},appConfig:Object(D.a)(Object(D.a)({},o),r.rows[0].doc)}).appConfig.remote&&i.appConfig.remote.endpointUrl?w(i.appConfig.remote.endpointUrl,i.appConfig.remote.user||"",i.appConfig.remote.password||"").then((function(){})).catch((function(e){alert("Failed to connect to the remote DB: "+e.message)})):w("","","").then((function(){})).catch((function(e){alert("Failed to connect to the remote DB: "+e.message)})),Ae=Object(be.reducerWithInitialState)(i).case(H.showAlertDialog,(function(e,t){return Object.assign({},e,{alertDialog:t})})).case(H.closeAlertDialog,(function(e){return Object.assign({},e,{alertDialog:i})})).case(H.startUpdateAppConfig,(function(e,a){var r=Object.assign({},e.appConfig,a.remote&&a.remote.endpointUrl?{remote:a.remote}:{remote:o.remote},a.display?{display:a.display}:{display:o.display});return t.put(r,{}).then((function(t){r._id=t.id,r._rev=t.rev,Ie().dispatch(H.doneUpdateAppConfig({params:a,result:Object.assign({},e,{appConfig:r})})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Done",message:"Settings is saved successfully",singleButton:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30),r.remote.endpointUrl&&w(r.remote.endpointUrl,r.remote.user,r.remote.password).then((function(){})).catch((function(e){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to connect to the remote DB: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}))})).catch((function(e){Ie().dispatch(H.failedUpdateAppConfig({params:a,error:e})),setTimeout((function(){Ie().dispatch(H.showAlertDialog({open:!0,title:"Error",message:"Failed to update settings: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ie().dispatch(H.closeAlertDialog())}}))}),30)})),e})).case(H.doneUpdateAppConfig,(function(e,t){return t.result})).case(H.failedUpdateAppConfig,(function(e,t){return e})).case(H.startResetApplication,(function(e){return Object(c.a)(n.a.mark((function r(){return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.prev=1,r.next=4,w("","","");case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),alert(r.t0);case 9:return r.prev=9,r.next=12,a.destroy({});case 12:r.next=17;break;case 14:r.prev=14,r.t1=r.catch(9),alert(r.t1);case 17:return r.prev=17,r.next=20,t.destroy({});case 20:r.next=25;break;case 22:r.prev=22,r.t2=r.catch(17),alert(r.t2);case 25:alert("All app data and configurations are removed. Please reload page."),Ie().dispatch(H.doneResetApplication({result:e})),r.next=33;break;case 29:r.prev=29,r.t3=r.catch(0),alert(r.t3),Ie().dispatch(H.failedResetApplication({error:r.t3}));case 33:case"end":return r.stop()}}),r,null,[[0,29],[1,6],[9,14],[17,22]])})))(),e})).case(H.doneUpdateAppConfig,(function(e,t){return t.result})).case(H.failedUpdateAppConfig,(function(e,t){return e}));case 17:return e.abrupt("return",Ae);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ne=Object(le.a)({hashType:"slash"}),Te=null;function Ie(){return Te}function _e(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te){e.next=17;break}return e.t0=de.e,e.t1=de.c,e.t2=Object(p.b)(Ne),e.next=6,Ce();case 6:return e.t3=e.sent,e.next=9,ye();case 9:return e.t4=e.sent,e.next=12,we();case 12:e.t5=e.sent,e.t6={router:e.t2,appEvents:e.t3,kanbanBoard:e.t4,calendar:e.t5},e.t7=(0,e.t1)(e.t6),e.t8=Object(de.d)(Object(de.a)(Object(ue.a)(Ne))),Te=(0,e.t0)(e.t7,e.t8);case 17:return e.abrupt("return",Te);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fe=a(10),Ue=a(60),Le=a(277),Me=a(265),Ve=a(264),Ke=a(101),Re=a.n(Ke),We=a(102),Ye=a.n(We),Pe=a(103),qe=a.n(Pe),He=a(150),Ge=a.n(He),ze=a(104),$e=a.n(ze),Xe=a(151),Je=a.n(Xe),Qe=a(152),Ze=a.n(Qe),et=a(153),tt=a.n(et),at=a(148),rt=a.n(at),nt=a(149),ot=a.n(nt),ct=a(267),it=a(259),st=a(266),dt=a(216),lt=a(269),ut=a(268),pt=a(263);function bt(e){return{addBoard:function(t){return e(ce.startAddBoard({boardName:t}))},changeActiveBoard:function(t){return e(ce.startChangeActiveBoard({boardId:t}))},updateBoardName:function(t){return e(ce.startUpdateBoardName(t))},deleteBoard:function(t){return e(ce.startDeleteBoard({boardId:t}))},addSticky:function(){return e(ce.startAddSticky({}))},updateSticky:function(t){return e(ce.startUpdateSticky(t))},updateStickyLanes:function(t){return e(ce.startUpdateStickyLanes(t))},archiveSticky:function(t){return e(ce.startArchiveSticky({kanbanId:t}))},unarchiveSticky:function(t){return e(ce.startUnarchiveSticky({kanbanId:t}))},deleteSticky:function(t){return e(ce.startDeleteSticky({kanbanId:t}))},editBoardAndStickys:function(t){return e(ce.startEditBoardAndStickys(t))},refreshActiveBoard:function(){return e(ce.startRefreshActiveBoard({}))},showAlertDialog:function(t){return e(H.showAlertDialog(t))},closeAlertDialog:function(){return e(H.closeAlertDialog())}}}function gt(e){return Object.assign({},e.kanbanBoard)}var ht=a(261),ft=a(276),mt=a(251),jt=a(260),vt=a(254),yt=a(255),Ot=a(253),xt=a(46),kt=a.n(xt),St=a(77),wt=a.n(St),Bt=a(36),At=0;function Ct(){return"$$gensym$$_xjKvAjFXoVtro45V_".concat(At++,"$$")}var Dt=function(e){var t=Object(Bt.a)(),a=s.a.useState(e.open),r=Object(Fe.a)(a,2),n=r[0],c=r[1],i=s.a.useState(e.value),d=Object(Fe.a)(i,2),l=d[0],u=d[1],p=Ct();function b(){c(!1),e.onClose(!1)}return Object(o.jsxs)(mt.a,{open:n,onClose:b,"aria-labelledby":p,children:[Object(o.jsx)(Ot.a,{id:p,children:e.title}),Object(o.jsxs)(vt.a,{children:[e.message?Object(o.jsx)(yt.a,{children:e.message}):Object(o.jsx)(o.Fragment,{}),Object(o.jsx)(ft.a,{autoFocus:!0,margin:"dense",label:e.fieldLabel,fullWidth:!0,value:l,error:!!e.validator&&e.validator(l),onChange:function(e){u(e.target.value)}})]}),Object(o.jsxs)(jt.a,{children:[Object(o.jsxs)(ht.a,{variant:"outlined",color:"default",onClick:b,children:[Object(o.jsx)(wt.a,{}),Object(o.jsx)("span",{style:{marginLeft:t.spacing(1)}}),e.cancelButtonCaption||"Cancel"]}),Object(o.jsxs)(ht.a,{variant:"contained",color:e.colorIsSecondary?"secondary":"primary",disabled:!!e.validator&&e.validator(l),onClick:function(){c(!1),e.onClose(!0,l)},children:[Object(o.jsx)(kt.a,{}),Object(o.jsx)("span",{style:{marginLeft:t.spacing(1)}}),e.applyButtonCaption||"Apply"]})]})]})},Nt=Object(I.a)((function(e){return{drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(Ue.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(6)+1},e.breakpoints.up("sm"),{width:e.spacing(6)+1}),nested:{paddingLeft:e.spacing(4)}}})),Tt=Object(N.e)(Object(u.c)(gt,bt)((function(e){var t,a,r=Nt(),n=s.a.useState(!0),c=Object(Fe.a)(n,2),i=c[0],d=c[1],l=s.a.useState({open:!1,title:"",message:"",fieldLabel:"",value:"",validator:function(e){return e.trim().length<=0},onClose:function(t,a){b(Object.assign({},p,{open:!1})),t&&a&&e.addBoard(a)}}),u=Object(Fe.a)(l,2),p=u[0],b=u[1],g=s.a.useState(!0),h=Object(Fe.a)(g,2),f=h[0],m=h[1],j=Object(pt.a)("print");function v(t,a){a===e.activeBoardId&&e.history.push("/".concat(t,"/").concat(a))}var y=K(e.history);return Object(o.jsxs)(o.Fragment,{children:[j?Object(o.jsx)(o.Fragment,{}):Object(o.jsxs)(Le.a,{variant:"permanent",className:Object(E.a)(r.drawer,(t={},Object(Ue.a)(t,r.drawerOpen,i),Object(Ue.a)(t,r.drawerClose,!i),t)),classes:{paper:Object(E.a)((a={},Object(Ue.a)(a,r.drawerOpen,i),Object(Ue.a)(a,r.drawerClose,!i),a))},anchor:"left",open:i,children:[Object(o.jsx)("div",{className:"",children:Object(o.jsx)(Ve.a,{onClick:function(){d(!i)},children:i?Object(o.jsx)(Re.a,{}):Object(o.jsx)(Ye.a,{})})}),Object(o.jsx)(Me.a,{}),i?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(it.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:Object(o.jsx)(st.a,{component:"div",id:"nested-list-subheader",children:"Boards"}),children:[Object(o.jsx)(dt.a,{button:!0,onClick:function(){m(!f)},children:f?Object(o.jsx)(rt.a,{}):Object(o.jsx)(ot.a,{})}),Object(o.jsx)(ct.a,{in:f,timeout:"auto",unmountOnExit:!0,children:Object(o.jsx)(it.a,{component:"div",disablePadding:!0,children:e.boards.map((function(t){return Object(o.jsx)(dt.a,{button:!0,selected:t._id===e.activeBoardId,className:Object(E.a)(r.nested),style:{fontWeight:t._id===e.activeBoardId?"bold":"normal"},onClick:function(a){return function(t){var a="kanban";e.history.location.pathname&&(e.history.location.pathname.startsWith("/calendar/")?a="calendar":e.history.location.pathname.startsWith("/edit/")&&(a="edit")),e.history.push("/".concat(a,"/").concat(t))}(t._id)},children:Object(o.jsx)(ut.a,{primary:t.name})},t._id)}))})})]}),Object(o.jsxs)(dt.a,{button:!0,onClick:function(){b(Object.assign({},p,{open:!0,title:"New board",message:"",fieldLabel:"Board name",value:""}))},children:[Object(o.jsx)(lt.a,{children:Object(o.jsx)(qe.a,{})}),Object(o.jsx)(ut.a,{primary:"New board..."})]}),Object(o.jsx)(Me.a,{})]}):Object(o.jsx)(o.Fragment,{}),Object(o.jsxs)(it.a,{children:[Object(o.jsxs)(dt.a,{button:!0,selected:"kanban"===y||""===y,onClick:function(t){return v("kanban",e.activeBoardId)},children:[Object(o.jsx)(lt.a,{children:Object(o.jsx)(Ge.a,{})}),i?Object(o.jsx)(ut.a,{primary:"Kanban"}):Object(o.jsx)(o.Fragment,{})]}),Object(o.jsxs)(dt.a,{button:!0,selected:"calendar"===y,onClick:function(t){return v("calendar",e.activeBoardId)},children:[Object(o.jsx)(lt.a,{children:Object(o.jsx)($e.a,{})}),i?Object(o.jsx)(ut.a,{primary:"Calendar"}):Object(o.jsx)(o.Fragment,{})]}),Object(o.jsxs)(dt.a,{button:!0,selected:"edit"===y,onClick:function(t){return v("edit",e.activeBoardId)},children:[Object(o.jsx)(lt.a,{children:Object(o.jsx)(Je.a,{})}),i?Object(o.jsx)(ut.a,{primary:"Editor"}):Object(o.jsx)(o.Fragment,{})]})]}),i?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(Me.a,{}),Object(o.jsxs)(dt.a,{button:!0,selected:"config"===y,onClick:function(t){return e.history.push("/config/")},children:[Object(o.jsx)(lt.a,{children:Object(o.jsx)(Ze.a,{})}),i?Object(o.jsx)(ut.a,{primary:"Settings"}):Object(o.jsx)(o.Fragment,{})]}),Object(o.jsx)(it.a,{children:Object(o.jsxs)(dt.a,{button:!0,onClick:function(e){return window.open("https://github.com/shellyln/kanban-board-app#tips","_blank")},children:[Object(o.jsx)(lt.a,{children:Object(o.jsx)(tt.a,{})}),i?Object(o.jsx)(ut.a,{primary:"Help"}):Object(o.jsx)(o.Fragment,{})]})})]}):Object(o.jsx)(o.Fragment,{})]}),p.open?Object(o.jsx)(Dt,{open:!0,title:p.title,message:p.message,fieldLabel:p.fieldLabel,value:p.value,validator:p.validator,onClose:p.onClose}):Object(o.jsx)(o.Fragment,{})]})}))),It=a(83),_t=a(124),Et=a.n(_t),Ft=a(154),Ut=a.n(Ft),Lt=a(159),Mt=a(158),Vt=a(33),Kt=a(274),Rt=a(275),Wt=a(270),Yt=a(278),Pt=a(258),qt=a(271),Ht=a(126),Gt=a.n(Ht),zt=a(125),$t=a.n(zt),Xt=a(55),Jt=a.n(Xt),Qt=function(e){var t=Object(Bt.a)(),a=s.a.useState(e.open),r=Object(Fe.a)(a,2),n=r[0],c=r[1],i=s.a.useState(""),d=Object(Fe.a)(i,2),l=d[0],u=d[1],p=Ct();function b(){c(!1),e.onClose(!1)}return Object(o.jsxs)(mt.a,{open:n,onClose:b,"aria-labelledby":p,children:[e.fab?e.fab:Object(o.jsx)(o.Fragment,{}),Object(o.jsx)(Ot.a,{id:p,style:{textAlign:"center"},children:e.title}),Object(o.jsx)(vt.a,{children:Object(o.jsx)(yt.a,{style:{textAlign:"center"},children:(e.message||"").split("\n").map((function(e,t,a){return Object(o.jsxs)("span",{children:[e,t<=a.length-1?Object(o.jsx)("br",{}):Object(o.jsx)(o.Fragment,{})]},"content-"+t)}))})}),e.confirmingTextValue?Object(o.jsx)(ft.a,{autoFocus:!0,margin:"dense",label:e.confirmingTextLabel,value:l,onChange:function(e){u(e.target.value)},style:{marginLeft:t.spacing(1),marginRight:t.spacing(1),marginBottom:t.spacing(1)}}):Object(o.jsx)(o.Fragment,{}),Object(o.jsxs)(jt.a,{style:{margin:"auto"},children:[e.singleButton?Object(o.jsx)(o.Fragment,{}):Object(o.jsxs)(ht.a,{variant:"outlined",color:"default",onClick:b,children:[Object(o.jsx)(wt.a,{}),Object(o.jsx)("span",{style:{marginLeft:t.spacing(1)}}),e.cancelButtonCaption||"Cancel"]}),Object(o.jsxs)(ht.a,{variant:"contained",color:e.colorIsSecondary?"secondary":"primary",disabled:!!e.confirmingTextValue&&l!==e.confirmingTextValue,onClick:function(){e.confirmingTextValue&&e.confirmingTextValue!==l||(c(!1),e.onClose(!0))},children:[Object(o.jsx)(kt.a,{}),Object(o.jsx)("span",{style:{marginLeft:t.spacing(1)}}),e.applyButtonCaption||"Apply"]})]})]})},Zt=a(82),ea=a(13),ta=a(155),aa=Object(ta.a)({rawToToken:function(e){return e},concatTokens:function(e){return e.length?[e.reduce((function(e,t){return e+t}))]:[]}}),ra=aa.seq,na=aa.cls,oa=aa.notCls,ca=aa.classes,ia=aa.cat,sa=aa.repeat,da=aa.end,la=aa.first,ua=aa.combine,pa=aa.erase,ba=aa.trans,ga=aa.ahead,ha=aa.makeProgram,fa=ba((function(e){return e.length?e:[""]}))(pa(sa(ca.spaceWithinSingleLine),na('"')),ia(sa(la(ba((function(e){return['"']}))(ra('""')),oa('"')))),pa(na('"'),sa(pa(ca.spaceWithinSingleLine)))),ma=ba((function(e){return e.length?e:[""]}))(pa(sa(ca.spaceWithinSingleLine)),ia(sa(la(pa(ca.spaceWithinSingleLine,ga(na(",","\r\n","\n","\r"))),oa(",","\r\n","\n","\r"))))),ja=la(fa,ma),va=ba((function(e){return[e]}))(ja,sa(ua(pa(ra(",")),ja))),ya=ha(ua(va,sa(ua(pa(ca.newline),va)),da()));function Oa(e){var t=ya(Object(Zt.b)(e));if(!t.succeeded)throw new Error(Object(ea.e)(t));return t.tokens}var xa=Object(I.a)((function(e){return{formControl:{minWidth:220},icon:{margin:e.spacing(1),fontSize:26},fabDelete:{position:"absolute",margin:e.spacing(1),right:e.spacing(1),top:e.spacing(1)}}})),ka=function(e){var t=xa(),a=Object(Bt.a)(),r=s.a.useState(e.open),n=Object(Fe.a)(r,2),c=n[0],i=n[1],d=s.a.useState(!1),l=Object(Fe.a)(d,2),u=l[0],p=l[1],b=s.a.useState(e.record.description),g=Object(Fe.a)(b,2),h=g[0],f=g[1],m=s.a.useState(e.record.barcode),j=Object(Fe.a)(m,2),v=j[0],y=j[1],O=s.a.useState(e.record.memo),x=Object(Fe.a)(O,2),k=x[0],S=x[1],w=s.a.useState(e.record.tags?e.record.tags.map((function(e){return e.includes(",")?'"'.concat(e.replace(/"/g,'""'),'"'):e})).join(", "):""),B=Object(Fe.a)(w,2),A=B[0],C=B[1],D=s.a.useState(e.record.flags?e.record.flags.map((function(e){return e.includes(",")?'"'.concat(e.replace(/"/g,'""'),'"'):e})).join(", "):""),N=Object(Fe.a)(D,2),T=N[0],I=N[1],_=s.a.useState(fe(e.record.dueDate)),F=Object(Fe.a)(_,2),U=F[0],L=F[1],M=s.a.useState(e.record.taskStatus),V=Object(Fe.a)(M,2),K=V[0],R=V[1],W=s.a.useState(e.record.teamOrStory),Y=Object(Fe.a)(W,2),P=Y[0],q=Y[1],H=Ct(),G=Ct(),z=Ct(),$=!!e.record.flags&&e.record.flags.includes("Archived");function X(){i(!1),e.onCancel()}function J(e){C(e.target.value)}function Q(e){I(e.target.value)}return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(mt.a,{open:c,onClose:X,"aria-labelledby":H,children:[Object(o.jsxs)(Ot.a,{id:H,style:{paddingBottom:"0"},children:["Edit Kanban",Object(o.jsxs)(ht.a,{className:Object(E.a)(t.fabDelete),variant:"outlined",color:e.board.preferArchive?"default":"secondary",onClick:function(){p(!0)},children:[e.board.preferArchive?$?Object(o.jsx)($t.a,{}):Object(o.jsx)(Gt.a,{}):Object(o.jsx)(Jt.a,{color:"secondary"}),Object(o.jsx)(It.a,{variant:"body1",color:e.board.preferArchive?"initial":"secondary",style:{marginLeft:a.spacing(1)},children:e.board.preferArchive?$?"Unarchive":"Archive":"Delete"})]})]}),Object(o.jsx)(vt.a,{children:Object(o.jsxs)(Vt.a,{utils:Mt.a,children:[Object(o.jsx)("div",{children:Object(o.jsx)(ft.a,{margin:"dense",label:"Description",multiline:!0,rows:4,rowsMax:16,fullWidth:!0,value:h,onChange:function(e){f(e.target.value)},helperText:"Markdown syntax is available"})}),Object(o.jsx)("div",{children:Object(o.jsx)(Kt.a,{margin:"dense",label:"Due date",format:"yyyy-MM-dd",KeyboardButtonProps:{"aria-label":"change date"},value:U,onChange:function(e){L(e)}})}),Object(o.jsxs)("div",{children:[Object(o.jsxs)(Pt.a,{className:Object(E.a)(t.formControl),style:{marginTop:"5px"},children:[Object(o.jsx)(Yt.a,{htmlFor:G,children:"Status"}),Object(o.jsx)(Rt.a,{value:K,onChange:function(e){e.target.name&&R(e.target.value)},inputProps:{name:"taskStatus",id:G},children:e.taskStatuses.map((function(e){return Object(o.jsx)(Wt.a,{value:e.value,children:e.caption||e.value},e.value)}))})]}),Object(o.jsxs)(Pt.a,{className:Object(E.a)(t.formControl),style:{marginLeft:a.spacing(1),marginTop:"5px"},children:[Object(o.jsx)(Yt.a,{htmlFor:z,children:"Team / Story"}),Object(o.jsx)(Rt.a,{value:P,onChange:function(e){e.target.name&&q(e.target.value)},inputProps:{name:"teamOrStory",id:z},children:e.teamOrStories.map((function(e){return Object(o.jsx)(Wt.a,{value:e.value,children:e.caption||e.value},e.value)}))})]})]}),e.board.displayTags&&e.board.displayFlags?Object(o.jsxs)("div",{children:[Object(o.jsx)(Pt.a,{className:Object(E.a)(t.formControl),style:{marginTop:"5px"},children:Object(o.jsx)(ft.a,{margin:"dense",label:"Tags",value:A,onChange:J,helperText:"Separate with commas (Excel CSV syntax)"})}),Object(o.jsx)(Pt.a,{className:Object(E.a)(t.formControl),style:{marginLeft:a.spacing(1),marginTop:"5px"},children:Object(o.jsx)(ft.a,{margin:"dense",label:"Flags",value:T,onChange:Q,helperText:"Separate with commas (Excel CSV syntax)"})})]}):Object(o.jsx)(o.Fragment,{}),e.board.displayTags&&!e.board.displayFlags?Object(o.jsx)("div",{children:Object(o.jsx)(ft.a,{margin:"dense",label:"Tags",fullWidth:!0,value:A,onChange:J,helperText:"Separate with commas (Excel CSV syntax)"})}):Object(o.jsx)(o.Fragment,{}),e.board.displayFlags&&!e.board.displayTags?Object(o.jsx)("div",{children:Object(o.jsx)(ft.a,{margin:"dense",label:"Flags",fullWidth:!0,value:T,onChange:Q,helperText:"Separate with commas (Excel CSV syntax)"})}):Object(o.jsx)(o.Fragment,{}),e.board.displayBarcode?Object(o.jsx)("div",{children:Object(o.jsx)(ft.a,{margin:"dense",label:"Barcode",multiline:!0,rows:1,rowsMax:16,fullWidth:!0,value:v,onChange:function(e){y(e.target.value)}})}):Object(o.jsx)(o.Fragment,{}),e.board.displayMemo?Object(o.jsx)("div",{children:Object(o.jsx)(ft.a,{margin:"dense",label:"Memo",multiline:!0,rows:1,rowsMax:16,fullWidth:!0,value:k,onChange:function(e){S(e.target.value)}})}):Object(o.jsx)(o.Fragment,{})]})}),Object(o.jsxs)(jt.a,{children:[Object(o.jsxs)(ht.a,{onClick:X,variant:"outlined",color:"default",children:[Object(o.jsx)(wt.a,{}),Object(o.jsx)("span",{style:{marginLeft:a.spacing(1)}}),"Cancel"]}),Object(o.jsxs)(ht.a,{onClick:function(){i(!1);var t=A.trim(),a=t?Oa(t):[],r=T.trim(),n=r?Oa(r):[];e.onApply(Object.assign({},e.record,{description:h,barcode:v,memo:k,tags:(a[0]||[]).map((function(e){return e.trim()})).filter((function(e){return e.length>0})),flags:(n[0]||[]).map((function(e){return e.trim()})).filter((function(e){return e.length>0})),dueDate:U&&!Number.isNaN(U.getTime())?he(U):"",taskStatus:K,teamOrStory:P}))},variant:"contained",color:"primary",children:[Object(o.jsx)(kt.a,{}),Object(o.jsx)("span",{style:{marginLeft:a.spacing(1)}}),"Apply"]})]})]}),u?Object(o.jsx)(Qt,{open:!0,title:e.board.preferArchive?$?"Unarchive kanban":"Archive kanban":"Delete kanban",message:"Are you sure want to ".concat(e.board.preferArchive?$?"unarchive":"archive":"delete"," the kanban?"),colorIsSecondary:!e.board.preferArchive,applyButtonCaption:e.board.preferArchive?$?"Unarchive":"Archive":"Delete",fab:e.board.preferArchive?$?Object(o.jsx)(qt.a,{size:"large",variant:"round","aria-label":"unarchive",style:{margin:"auto"},children:Object(o.jsx)($t.a,{})}):Object(o.jsx)(qt.a,{size:"large",variant:"round","aria-label":"archive",style:{margin:"auto"},children:Object(o.jsx)(Gt.a,{})}):Object(o.jsx)(qt.a,{size:"large",variant:"round","aria-label":"delete",color:"secondary",style:{margin:"auto"},children:Object(o.jsx)(Jt.a,{})}),onClose:e.board.preferArchive?$?function(t){p(!1),t&&(i(!1),e.onUnarchive(e.record._id))}:function(t){p(!1),t&&(i(!1),e.onArchive(e.record._id))}:function(t){p(!1),t&&(i(!1),e.onDelete(e.record._id))}}):Object(o.jsx)(o.Fragment,{})]})},Sa=(a(208),Ut()(window)),wa=Object(I.a)((function(e){return{root:{},smallIcon:{width:"20px",height:"20px"}}})),Ba=function(){return{}},Aa=-1!==window.navigator.userAgent.toLowerCase().indexOf("firefox"),Ca=Object(u.c)(Ba,bt)((function(e){var t=s.a.useState(!1),a=Object(Fe.a)(t,2),r=a[0],n=a[1],c=new Date,i=new Date(c.getFullYear(),c.getMonth(),c.getDate()),d=e.record.dueDate?fe(e.record.dueDate):null,l=!e.taskStatus.completed&&!!d&&d<i;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("a",{id:Ct(),"data-record-id":e.record._id||"",className:"KanbanBoardView-sticky-link",draggable:!0,onClick:function(e){return n(!0)},onDragStart:function(e){e.dataTransfer.setData("elId",e.target.id)},children:Object(o.jsxs)("div",{className:"KanbanBoardView-sticky-note"+(l?" expired":""),children:[e.board.displayTags&&e.record.tags.length?Object(o.jsx)("ul",{className:"KanbanBoardView-sticky-tags",children:e.record.tags.map((function(t,a){var r=(e.board.tags||[]).find((function(e){return e.value===t}));return Object(o.jsx)("li",{className:r?r.className:"",children:t},e.record._id+"-tag-"+a)}))}):Object(o.jsx)(o.Fragment,{}),Object(o.jsx)("div",{className:"KanbanBoardView-sticky-description",dangerouslySetInnerHTML:{__html:Sa.sanitize(Et()(e.record.description))}}),e.board.displayBarcode&&e.record.barcode?Object(o.jsx)("div",{className:"KanbanBoardView-sticky-barcode",dangerouslySetInnerHTML:{__html:new Lt.a({fill:!0,fillColor:M?"#fff":"#000",cellSize:2,unit:"px",data:e.record.barcode}).toImgTag()}}):Object(o.jsx)(o.Fragment,{}),e.record.flags.includes("Marked")?Object(o.jsx)("div",{className:"marked",children:"\ud83d\udccd"}):Object(o.jsx)(o.Fragment,{}),e.record.dueDate?Object(o.jsx)("div",{className:"due-date",children:(l?"\ud83d\udd25":"\u23f3")+e.record.dueDate}):Object(o.jsx)(o.Fragment,{})]})}),r?Object(o.jsx)(ka,{open:!0,record:e.record,teamOrStories:e.teamOrStories,taskStatuses:e.taskStatuses,board:e.board,onApply:function(t){e.updateSticky(t),n(!1)},onArchive:function(t){e.archiveSticky(t),n(!1)},onUnarchive:function(t){e.unarchiveSticky(t),n(!1)},onDelete:function(t){e.deleteSticky(t),n(!1)},onCancel:function(){n(!1)}}):Object(o.jsx)(o.Fragment,{})]})})),Da=Object(u.c)(Ba,bt)((function(e){var t=e.records.filter((function(e){return!e.flags||!e.flags.includes("Archived")}));return Object(o.jsxs)("div",{className:"KanbanBoardView-sticky-wrap "+(e.teamOrStory.className||"")+" "+(e.taskStatus.className||""),"data-status":e.taskStatus.value,"data-team-or-story":e.teamOrStory.value,onDragOver:function(e){e.preventDefault()},onDrop:function(t){try{var a=t.dataTransfer.getData("elId"),r=document.getElementById(a);e.updateStickyLanes({kanbanId:r.dataset.recordId,taskStatusValue:e.taskStatus.value,teamOrStoryValue:e.teamOrStory.value})}catch(n){alert(n.message)}t.preventDefault()},children:[t.map((function(t){return Object(o.jsx)(Ca,{teamOrStory:e.teamOrStory,taskStatus:e.taskStatus,teamOrStories:e.teamOrStories,taskStatuses:e.taskStatuses,board:e.board,record:t},t._id||Ct())})),Aa&&0===t.length?Object(o.jsx)("div",{style:{width:"100%",height:"100%"},children:"\xa0"}):Object(o.jsx)(o.Fragment,{})]})})),Na=Object(u.c)(gt,bt)((function(e){var t=wa(),a=Object(Bt.a)(),r=s.a.useState({open:!1,title:"",message:"",fieldLabel:"",value:"",validator:function(e){return e.trim().length<=0},onClose:function(t,a){if(i(Object.assign({},c,{open:!1})),t&&a){var r=Ie().getState();e.updateBoardName({boardId:r.kanbanBoard.activeBoardId,boardName:a})}}}),n=Object(Fe.a)(r,2),c=n[0],i=n[1];if(e.match.params.id&&e.activeBoard._id!==e.match.params.id){var d=e.boards.findIndex((function(t){return t._id===e.match.params.id}));return e.changeActiveBoard(e.match.params.id),Object(o.jsx)("div",{className:"KanbanBoardView-content",children:d<0?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(It.a,{style:{marginTop:a.spacing(10)},variant:"h4",align:"center",children:"No boards found."}),Object(o.jsx)(It.a,{style:{marginTop:a.spacing(5),cursor:"pointer",textDecoration:"underline"},variant:"body1",align:"center",onClick:function(t){e.history.push("/")},children:"Click here to show main board."})]}):Object(o.jsx)(o.Fragment,{})})}return Object(o.jsxs)("div",{className:"KanbanBoardView-content",children:[Object(o.jsx)("style",{dangerouslySetInnerHTML:{__html:e.activeBoard.boardStyle}}),Object(o.jsx)(It.a,{variant:"h6",align:"center",style:{cursor:"pointer"},onClick:function(){var e=Ie().getState();i(Object.assign({},c,{open:!0,title:"Edit board name",message:"",fieldLabel:"Board name",value:e.kanbanBoard.activeBoard.name}))},children:e.activeBoard.name}),Object(o.jsxs)("table",{className:"KanbanBoardView-board",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{className:"KanbanBoardView-header-cell-add-sticky",children:Object(o.jsx)(Ve.a,{style:{margin:0,padding:0},onClick:function(t){return e.addSticky()},children:Object(o.jsx)(qe.a,{className:Object(E.a)(t.smallIcon)})})}),e.activeBoard.taskStatuses.map((function(e){return Object(o.jsx)("th",{className:"KanbanBoardView-header-cell-task-statuses "+(e.className||""),children:e.caption||e.value},e.value)}))]})}),Object(o.jsx)("tbody",{children:e.activeBoard.teamOrStories.map((function(t){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{className:"KanbanBoardView-header-cell-team-or-stories "+(t.className||""),children:t.caption||t.value}),e.activeBoard.taskStatuses.map((function(a){return Object(o.jsx)("td",{className:(t.className||"")+" "+(a.className||""),children:Object(o.jsx)(Da,{teamOrStory:t,taskStatus:a,teamOrStories:e.activeBoard.teamOrStories,taskStatuses:e.activeBoard.taskStatuses,board:e.activeBoard,records:e.activeBoard.records.filter((function(e){return e.teamOrStory===t.value&&e.taskStatus===a.value}))})},a.value)}))]},t.value)}))})]}),e.activeBoard.boardNote?Object(o.jsx)("div",{className:"KanbanBoardView-board-note-wrap",children:Object(o.jsx)("div",{className:"KanbanBoardView-board-note",dangerouslySetInnerHTML:{__html:Sa.sanitize(Et()(e.activeBoard.boardNote))}})}):Object(o.jsx)(o.Fragment,{}),c.open?Object(o.jsx)(Dt,{open:!0,title:c.title,message:c.message,fieldLabel:c.fieldLabel,value:c.value,validator:c.validator,onClose:c.onClose}):Object(o.jsx)(o.Fragment,{})]})})),Ta=a(156),Ia=a.n(Ta),_a=a(157),Ea=a.n(_a);function Fa(e){return{showToday:function(){return e(ke.showToday())},showNextMonth:function(){return e(ke.showNextMonth())},showPreviousMonth:function(){return e(ke.showPreviousMonth())},showNextYear:function(){return e(ke.showNextYear())},showPreviousYear:function(){return e(ke.showPreviousYear())},showAlertDialog:function(t){return e(H.showAlertDialog(t))},closeAlertDialog:function(){return e(H.closeAlertDialog())},changeActiveBoard:function(t){return e(ce.startChangeActiveBoard(Object.assign({},{boardId:t},{dispatch:e})))},updateBoardName:function(t){return e(ce.startUpdateBoardName(t))},updateSticky:function(t){return e(ce.startUpdateSticky(Object.assign({},t,{dispatch:e})))},archiveSticky:function(t){return e(ce.startArchiveSticky({kanbanId:t}))},unarchiveSticky:function(t){return e(ce.startUnarchiveSticky({kanbanId:t}))},deleteSticky:function(t){return e(ce.startDeleteSticky(Object.assign({},{kanbanId:t},{dispatch:e})))}}}function Ua(e){return Object.assign({},{kanbanBoardState:e.kanbanBoard},e.calendar)}a(209);var La=Object(I.a)((function(e){return{root:{flexGrow:1,color:"var(--main-text-color)",backgroundColor:"var(--main-bg-color)"},calendar:{width:"calc(100% - 30px)",height:"100%",margin:"15px",border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",tableLayout:"fixed"},calendarTitle:{position:"relative",height:"30px"},calendarTitleToolBar:{position:"absolute",top:0,left:0,margin:"3px 3px 6px 4px",overflow:"hidden",width:"calc(100% - 30px)",height:"39px"},calendarTopLeftHeader:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px"},calendarDaysHeader:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",width:"14%"},calendarSundayHeader:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",width:"14%",backgroundColor:"var(--weak-header-bg-color)",color:"var(--calendar-sunday-color)"},calendarSaturdayHeader:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",width:"14%",backgroundColor:"var(--weak-header-bg-color)",color:"var(--calendar-saturday-color)"},calendarCell:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",verticalAlign:"top"},calendarWeekendCell:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",verticalAlign:"top",backgroundColor:"var(--weak-data-bg-color)"},calendarCellCaptionToday:{color:"var(--calendar-today-color)",backgroundColor:"var(--calendar-today-bg-color)",borderRadius:"10px",border:"solid 1.5px var(--calendar-today-bg-color)"},chip:{fontSize:"smaller",borderRadius:"5px",backgroundColor:"var(--sticky-blue-color)",color:"var(--main-text-color)",width:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",marginBottom:"2px",paddingLeft:"3px",paddingRight:"3px"},chipWrap:{"&:hover":{cursor:"pointer"}}}})),Ma=Object(u.c)(Ua,Fa)((function(e){var t=La(),a=s.a.useState(!1),r=Object(Fe.a)(a,2),n=r[0],c=r[1],i=e.board.teamOrStories.find((function(t){return t.value===e.record.teamOrStory})),d=e.board.taskStatuses.find((function(t){return t.value===e.record.taskStatus})),l=new Date,u=new Date(l.getFullYear(),l.getMonth(),l.getDate()),p=e.record.dueDate?fe(e.record.dueDate):null,b=!(d&&d.completed)&&!!p&&p<u,g=e.record.flags&&e.record.flags.includes("Archived");return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("a",{className:Object(E.a)(t.chipWrap),onClick:function(e){return c(!0)},children:Object(o.jsx)("div",{className:Object(E.a)(t.chip)+" CalendarView-item-chip"+(i?" "+i.className:"")+(d?" "+d.className:"")+(b?" expired":"")+(g?" archived":""),children:e.record.description.trim().replace(/\n/g," ").replace(/#+/g,"").trim()})}),n?Object(o.jsx)(ka,{open:!0,record:e.record,teamOrStories:e.kanbanBoardState.activeBoard.teamOrStories,taskStatuses:e.kanbanBoardState.activeBoard.taskStatuses,board:e.board,onApply:function(t){e.updateSticky(t),c(!1)},onArchive:function(t){e.archiveSticky(t),c(!1)},onUnarchive:function(t){e.unarchiveSticky(t),c(!1)},onDelete:function(t){e.deleteSticky(t),c(!1)},onCancel:function(){c(!1)}}):Object(o.jsx)(o.Fragment,{})]})})),Va=Object(u.c)(Ua,Fa)((function(e){var t=La(),a=Object(Bt.a)(),r=s.a.useState({open:!1,title:"",message:"",fieldLabel:"",value:"",validator:function(e){return e.trim().length<=0},onClose:function(t,a){if(i(Object.assign({},c,{open:!1})),t&&a){var r=Ie().getState();e.updateBoardName({boardId:r.kanbanBoard.activeBoardId,boardName:a})}}}),n=Object(Fe.a)(r,2),c=n[0],i=n[1];if(e.match.params.id&&e.kanbanBoardState.activeBoard._id!==e.match.params.id){var d=e.kanbanBoardState.boards.findIndex((function(t){return t._id===e.match.params.id}));return e.changeActiveBoard(e.match.params.id),Object(o.jsx)("div",{className:t.root,children:d<0?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(It.a,{style:{marginTop:a.spacing(10)},variant:"h4",align:"center",children:"No boards found."}),Object(o.jsx)(It.a,{style:{marginTop:a.spacing(5),cursor:"pointer",textDecoration:"underline"},variant:"body1",align:"center",onClick:function(t){e.history.push("/")},children:"Click here to show main board."})]}):Object(o.jsx)(o.Fragment,{})})}var l=new Date,u=new Date(l.getFullYear(),l.getMonth(),l.getDate()),p=e.activeMonth,b=new Date(p.getFullYear(),p.getMonth(),1),g=new Date(p.getFullYear(),p.getMonth()+1,0),h=new Date(b.getFullYear(),b.getMonth(),1-b.getDay()),f=new Date(g.getFullYear(),g.getMonth(),g.getDate()+(6-g.getDay())),m=new Date(f.getFullYear(),f.getMonth(),f.getDate()+1),j=[],v=[];j.push(v);for(var y=h;y.getTime()<=f.getTime();y=new Date(y.getFullYear(),y.getMonth(),y.getDate()+1))7<=v.length&&(v=[],j.push(v)),v.push(y);var O=e.kanbanBoardState.activeBoard.records.filter((function(e){if(!e.dueDate)return!1;var t=new Date(e.dueDate);return h<=t&&t<m}));return Object(o.jsxs)("div",{className:Object(E.a)(t.root),children:[Object(o.jsx)("style",{dangerouslySetInnerHTML:{__html:e.kanbanBoardState.activeBoard.calendarStyle}}),Object(o.jsx)("div",{className:Object(E.a)(t.calendarTitle),children:Object(o.jsxs)("div",{className:Object(E.a)(t.calendarTitleToolBar),children:[Object(o.jsxs)(Ve.a,{onClick:function(t){return e.showToday()},children:[Object(o.jsx)($e.a,{}),Object(o.jsx)(It.a,{variant:"caption",style:{marginLeft:"1em"},children:"Today"})]}),Object(o.jsx)(Ve.a,{onClick:function(t){return e.showPreviousYear()},children:Object(o.jsx)(Ia.a,{})}),Object(o.jsx)(Ve.a,{onClick:function(t){return e.showPreviousMonth()},children:Object(o.jsx)(Re.a,{})}),Object(o.jsx)(Ve.a,{onClick:function(t){return e.showNextMonth()},children:Object(o.jsx)(Ye.a,{})}),Object(o.jsx)(Ve.a,{onClick:function(t){return e.showNextYear()},children:Object(o.jsx)(Ea.a,{})}),Object(o.jsx)(It.a,{variant:"h6",display:"inline",style:{marginLeft:"2em"},children:e.activeMonth.toLocaleDateString(navigator.userLanguage||navigator.language||navigator.browserLanguage||"en",{year:"numeric",month:"long"})}),Object(o.jsx)(It.a,{variant:"h6",display:"inline",style:{marginLeft:"3em",cursor:"pointer"},onClick:function(){var e=Ie().getState();i(Object.assign({},c,{open:!0,title:"Edit board name",message:"",fieldLabel:"Board name",value:e.kanbanBoard.activeBoard.name}))},children:e.kanbanBoardState.activeBoard.name})]})}),Object(o.jsxs)("table",{className:Object(E.a)(t.calendar),children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{className:Object(E.a)(t.calendarTopLeftHeader)}),Object(o.jsx)("th",{className:Object(E.a)(t.calendarSundayHeader),children:"Sun"}),Object(o.jsx)("th",{className:Object(E.a)(t.calendarDaysHeader),children:"Mon"}),Object(o.jsx)("th",{className:Object(E.a)(t.calendarDaysHeader),children:"Tue"}),Object(o.jsx)("th",{className:Object(E.a)(t.calendarDaysHeader),children:"Wed"}),Object(o.jsx)("th",{className:Object(E.a)(t.calendarDaysHeader),children:"Thu"}),Object(o.jsx)("th",{className:Object(E.a)(t.calendarDaysHeader),children:"Fri"}),Object(o.jsx)("th",{className:Object(E.a)(t.calendarSaturdayHeader),children:"Sat"})]})}),Object(o.jsx)("tbody",{children:j.map((function(a){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{className:Object(E.a)(t.calendarCell)}),a.map((function(a,r){var n=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1);return Object(o.jsx)("td",{className:Object(E.a)(0===r||6===r?t.calendarWeekendCell:t.calendarCell),children:Object(o.jsxs)("div",{style:{position:"relative"},children:[Object(o.jsx)("div",{className:a<=u&&u<n?Object(E.a)(t.calendarCellCaptionToday):"",style:{position:"absolute",top:"0",right:"0"},children:a.getDate()}),Object(o.jsx)("div",{style:{paddingTop:"20px",minHeight:"80px"},children:O.filter((function(e){var t=new Date(e.dueDate);return a<=t&&t<n})).map((function(t){return Object(o.jsx)(Ma,{board:e.kanbanBoardState.activeBoard,record:t},t._id)}))})]})},a.toISOString())}))]},a[0].getTime())}))})]}),c.open?Object(o.jsx)(Dt,{open:!0,title:c.title,message:c.message,fieldLabel:c.fieldLabel,value:c.value,validator:c.validator,onClose:c.onClose}):Object(o.jsx)(o.Fragment,{})]})})),Ka=a(106),Ra=(a(140),a(141),a(142),a(81));function Wa(e){return{name:e.name||"",taskStatuses:e.taskStatuses||[],teamOrStories:e.teamOrStories||[],tags:e.tags||[],displayBarcode:!!e.displayBarcode,displayMemo:!!e.displayMemo,displayFlags:!!e.displayFlags,displayTags:!!e.displayTags,preferArchive:!!e.preferArchive,boardStyle:e.boardStyle||"",calendarStyle:e.calendarStyle||"",boardNote:e.boardNote||"",records:e.records&&e.records.map((function(e){return t=e,Object.assign(t._id?{_id:t._id}:{},{dueDate:t.dueDate||"",taskStatus:t.taskStatus||"",teamOrStory:t.teamOrStory||"",flags:t.flags||[],tags:t.tags||[],description:t.description||"",barcode:t.barcode||"",memo:t.memo||""});var t}))||[]}}function Ya(e){if(e.match(/<\/style\s*>/i)||e.match(/<script\b/i))throw new Error("bad style text is set.")}function Pa(e){if("string"!==typeof e.name)throw new Error('string property "name" is required.');if(!e.taskStatuses||!Array.isArray(e.taskStatuses))throw new Error('array property "taskStatuses" is required.');if(e.taskStatuses.forEach((function(e){if(null!==e.caption&&void 0!==e.caption&&"string"!==typeof e.caption)throw new Error('property "taskStatuses[x].caption" should be string.');if(null!==e.className&&void 0!==e.className&&"string"!==typeof e.className)throw new Error('property "taskStatuses[x].className" should be string.');if(null!==e.completed&&void 0!==e.completed&&"boolean"!==typeof e.completed)throw new Error('property "taskStatuses[x].completed" should be boolean.');if("string"!==typeof e.value)throw new Error('string property "taskStatuses[x].value" is required.')})),!e.teamOrStories||!Array.isArray(e.teamOrStories))throw new Error('array property "teamOrStories" is required.');if(e.teamOrStories.forEach((function(e){if(null!==e.caption&&void 0!==e.caption&&"string"!==typeof e.caption)throw new Error('property "teamOrStories[x].caption" should be string.');if(null!==e.className&&void 0!==e.className&&"string"!==typeof e.className)throw new Error('property "teamOrStories[x].className" should be string.');if("string"!==typeof e.value)throw new Error('string property "teamOrStories[x].value" is required.')})),!e.tags||!Array.isArray(e.tags))throw new Error('array property "tags" is required.');if(e.tags.forEach((function(e){if(null!==e.className&&void 0!==e.className&&"string"!==typeof e.className)throw new Error('property "tags[x].className" should be string.');if("string"!==typeof e.value)throw new Error('string property "tags[x].value" is required.')})),"boolean"!==typeof e.displayBarcode)throw new Error('boolean property "displayBarcode" is required.');if("boolean"!==typeof e.displayMemo)throw new Error('boolean property "displayMemo" is required.');if("boolean"!==typeof e.displayFlags)throw new Error('boolean property "displayFlags" is required.');if("boolean"!==typeof e.displayTags)throw new Error('boolean property "displayTags" is required.');if("boolean"!==typeof e.preferArchive)throw new Error('boolean property "preferArchive" is required.');if("string"!==typeof e.boardStyle)throw new Error('string property "boardStyle" is required.');if(Ya(e.boardStyle),"string"!==typeof e.calendarStyle)throw new Error('string property "calendarStyle" is required.');if(Ya(e.calendarStyle),"string"!==typeof e.boardNote)throw new Error('string property "boardNote" is required.');if(!e.records||!Array.isArray(e.records))throw new Error('array property "records" is required.');return e.records.forEach((function(e){return function(e){if("string"!==typeof e.dueDate)throw new Error('string property "dueDate" is required.');if("string"!==typeof e.taskStatus)throw new Error('string property "taskStatus" is required.');if("string"!==typeof e.teamOrStory)throw new Error('string property "teamOrStory" is required.');if(!e.flags||!Array.isArray(e.flags))throw new Error('array property "flags" is required.');if(e.flags.forEach((function(e){if("string"!==typeof e)throw new Error('property "flags[x]" should be string.')})),!e.tags||!Array.isArray(e.tags))throw new Error('array property "tags" is required.');if(e.tags.forEach((function(e){if("string"!==typeof e)throw new Error('property "tags[x]" should be string.')})),"string"!==typeof e.description)throw new Error('string property "description" is required.');if("string"!==typeof e.barcode)throw new Error('string property "barcode" is required.');if("string"!==typeof e.memo)throw new Error('string property "memo" is required.');return e}(e)})),e}a(210);var qa=Object(I.a)((function(e){return{root:{flexGrow:1,color:"var(--main-text-color)",backgroundColor:"var(--main-bg-color)",width:"100%",height:"100%"},header:{height:"45px",position:"relative"},codemirror:{display:"grid",width:"calc(100% - 20px)",height:"calc(100vh - 65px)"},fabSave:{position:"absolute",margin:e.spacing(1),left:e.spacing(1),top:e.spacing(1)/10},fabDelete:{position:"absolute",margin:e.spacing(1),right:e.spacing(1),top:e.spacing(1)/10}}})),Ha=Object(u.c)(gt,bt)((function(e){var t=qa(),a=Object(Bt.a)(),r=s.a.useState(!1),n=Object(Fe.a)(r,2),c=n[0],i=n[1],d=s.a.useState(""),l=Object(Fe.a)(d,2),u=l[0],p=l[1],b=s.a.useState(0),g=Object(Fe.a)(b,2),h=g[0],f=g[1];if(e.match.params.id&&e.activeBoard._id!==e.match.params.id){var m=e.boards.findIndex((function(t){return t._id===e.match.params.id}));return e.changeActiveBoard(e.match.params.id),setTimeout((function(){f(0)}),30),Object(o.jsx)("div",{className:t.root,children:m<0?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(It.a,{style:{marginTop:a.spacing(10)},variant:"h4",align:"center",children:"No boards found."}),Object(o.jsx)(It.a,{style:{marginTop:a.spacing(5),cursor:"pointer",textDecoration:"underline"},variant:"body1",align:"center",onClick:function(t){e.history.push("/")},children:"Click here to show main board."})]}):Object(o.jsx)(o.Fragment,{})})}return Object(o.jsxs)("div",{className:Object(E.a)(t.root),children:[Object(o.jsxs)("div",{className:Object(E.a)(t.header),children:[Object(o.jsx)(It.a,{variant:"h6",align:"center",style:{marginTop:"0px"},children:e.activeBoard.name}),Object(o.jsxs)(ht.a,{className:Object(E.a)(t.fabSave),variant:"contained",color:"primary",disabled:0===h,onClick:function(){try{var t=Ra.a.load(u);t&&(Pa(t),e.editBoardAndStickys(Object.assign({},t,{_id:e.activeBoard._id})))}catch(a){e.showAlertDialog({open:!0,title:"Error",message:a.message||String(a),singleButton:!0,colorIsSecondary:!0,onClose:function(){return e.closeAlertDialog()}})}},children:[Object(o.jsx)(kt.a,{}),Object(o.jsx)(It.a,{variant:"body1",style:{marginLeft:a.spacing(1)},children:"Save"})]}),e.boards.length>1?Object(o.jsxs)(ht.a,{className:Object(E.a)(t.fabDelete),variant:"outlined",color:"secondary",onClick:function(e){return i(!0)},children:[Object(o.jsx)(Jt.a,{color:"secondary"}),Object(o.jsx)(It.a,{variant:"body1",color:"secondary",style:{marginLeft:a.spacing(1)},children:"Delete"})]}):Object(o.jsx)(o.Fragment,{})]}),Object(o.jsx)("div",{children:Object(o.jsx)(Ka.UnControlled,{className:Object(E.a)(t.codemirror),value:"# Board settings\n\n".concat(Ra.a.dump(Wa(e.activeBoard),{lineWidth:1e3})),options:{mode:"yaml",theme:"material",lineNumbers:!0,lineWrapping:!0},onChange:function(e,t,a){p(a),f(h+1)}})}),c?Object(o.jsx)(Qt,{open:c,title:"Delete board",message:"Are you sure want to delete the board?",colorIsSecondary:!0,applyButtonCaption:"Delete",confirmingTextLabel:'Type "Delete board" to delete this board.',confirmingTextValue:"Delete board",fab:Object(o.jsx)(qt.a,{size:"large",variant:"round","aria-label":"delete",color:"secondary",style:{margin:"auto"},children:Object(o.jsx)(Jt.a,{})}),onClose:function(t){i(!1),t&&e.deleteBoard(e.activeBoard._id)}}):Object(o.jsx)(o.Fragment,{})]})})),Ga=(a(211),Object(I.a)((function(e){return{root:{flexGrow:1,color:"var(--main-text-color)",backgroundColor:"var(--main-bg-color)",width:"100%",height:"100%"},header:{height:"45px",position:"relative"},codemirror:{display:"grid",width:"calc(100% - 20px)",height:"calc(100vh - 65px)"},fabSave:{position:"absolute",margin:e.spacing(1),left:e.spacing(1),top:e.spacing(1)/10},fabDelete:{position:"absolute",margin:e.spacing(1),right:e.spacing(1),top:e.spacing(1)/10}}}))),za=Object(u.c)(se,ie)((function(e){var t,a=Ga(),r=Object(Bt.a)(),n=s.a.useState(!1),c=Object(Fe.a)(n,2),i=c[0],d=c[1],l=s.a.useState(""),u=Object(Fe.a)(l,2),p=u[0],b=u[1],g=s.a.useState(0),h=Object(Fe.a)(g,2),f=h[0],m=h[1];return Object(o.jsxs)("div",{className:Object(E.a)(a.root),children:[Object(o.jsxs)("div",{className:Object(E.a)(a.header),children:[Object(o.jsx)(It.a,{variant:"h6",align:"center",style:{marginTop:"0px"},children:"Application Settings"}),Object(o.jsxs)(ht.a,{className:Object(E.a)(a.fabSave),variant:"contained",color:"primary",disabled:0===f,onClick:function(){try{var t=Ra.a.load(p);if(!t)throw new Error('object property "remote" is required.');!function(e){if(!e.remote)throw new Error('object property "remote" is required.');if("string"!==typeof e.remote.endpointUrl)throw new Error('string property "remote.endpointUrl" is required.');if("string"!==typeof e.remote.user)throw new Error('string property "remote.user" is required.');if("string"!==typeof e.remote.password)throw new Error('string property "remote.password" is required.');if(!e.display)throw new Error('object property "display" is required.');if("boolean"!==typeof e.display.autoUpdate)throw new Error('boolean property "display.autoUpdate" is required.');if("number"!==typeof e.display.autoUpdateInterval)throw new Error('number property "display.autoUpdateInterval" is required.');if(e.display.autoUpdateInterval<10)throw new Error('number property "display.autoUpdateInterval" should 10 <= autoUpdateInterval (unit: sec).');if("boolean"!==typeof e.display.goAround)throw new Error('boolean property "display.goAround" is required.')}(t),e.updateAppConfig(Object.assign({},t))}catch(a){e.showAlertDialog({open:!0,title:"Error",message:a.message||String(a),singleButton:!0,colorIsSecondary:!0,onClose:function(){return e.closeAlertDialog()}})}},children:[Object(o.jsx)(kt.a,{}),Object(o.jsx)(It.a,{variant:"body1",style:{marginLeft:r.spacing(1)},children:"Save"})]}),Object(o.jsxs)(ht.a,{className:Object(E.a)(a.fabDelete),variant:"outlined",color:"secondary",onClick:function(e){return d(!0)},children:[Object(o.jsx)(Jt.a,{color:"secondary"}),Object(o.jsx)(It.a,{variant:"body1",color:"secondary",style:{marginLeft:r.spacing(1)},children:"Reset application"})]})]}),Object(o.jsx)("div",{children:Object(o.jsx)(Ka.UnControlled,{className:Object(E.a)(a.codemirror),value:"# App settings\n\n".concat(Ra.a.dump((t=e.appConfig,{remote:{endpointUrl:t.remote&&t.remote.endpointUrl?t.remote.endpointUrl:"",user:t.remote&&t.remote.user?t.remote.user:"",password:t.remote&&t.remote.password?t.remote.password:""},display:{autoUpdate:!(!t.display||!t.display.autoUpdate),autoUpdateInterval:t.display&&t.display.autoUpdateInterval?t.display.autoUpdateInterval:2419200,goAround:!(!t.display||!t.display.goAround)}}),{lineWidth:1e3})),options:{mode:"yaml",theme:"material",lineNumbers:!0,lineWrapping:!0},onChange:function(e,t,a){b(a),m(f+1)}})}),i?Object(o.jsx)(Qt,{open:i,title:"Reset application",message:"Are you sure want to reset application?\nAll local data and configurations will be REMOVED!",colorIsSecondary:!0,applyButtonCaption:"Reset",confirmingTextLabel:'Type "Reset application" to remove all data.',confirmingTextValue:"Reset application",fab:Object(o.jsx)(qt.a,{size:"large",variant:"round","aria-label":"reset application",color:"secondary",style:{margin:"auto"},children:Object(o.jsx)(Jt.a,{})}),onClose:function(t){d(!1),t&&e.resetApplication()}}):Object(o.jsx)(o.Fragment,{})]})})),$a=Object(I.a)((function(e){return{app:{display:"flex"}}}));var Xa=Object(u.c)(se,ie)((function(e){var t=$a();return function(e,t){var a=Object(i.useRef)();Object(i.useEffect)((function(){a.current=e}),[e]),Object(i.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){e.appConfig&&(console.log("periodic timer:"+new Date),k().then((function(){var t=!1,a="",r=Ie();if(r&&e.appConfig.display){var n=r.getState();if(e.appConfig.display.goAround&&n.kanbanBoard.boards.length>1){var o=(Math.max(0,n.kanbanBoard.boards.findIndex((function(e){return e._id===n.kanbanBoard.activeBoardId})))+1)%n.kanbanBoard.boards.length;t=!0,a=n.kanbanBoard.boards[o]._id}}var c=K(Ne);"config"!==c&&"edit"!==c&&(t?Ne.push("/".concat(c,"/").concat(a)):e.refreshActiveBoard())})).catch((function(e){console.log(e.message)})))}),e.appConfig&&e.appConfig.display&&e.appConfig.display.autoUpdate?1e3*(e.appConfig.display.autoUpdateInterval||2419200):null),Object(i.useEffect)((function(){setTimeout((function(){e.refreshActiveBoard()}),3e3)}),[]),Object(o.jsxs)("div",{className:Object(E.a)(t.app),children:[Object(o.jsx)(T.a,{}),Object(o.jsxs)(_.a,{theme:V,children:[Object(o.jsx)(Tt,{}),Object(o.jsxs)(N.c,{children:[Object(o.jsx)(N.a,{path:"/",exact:!0,component:Na}),Object(o.jsx)(N.a,{path:"/kanban/:id?",component:Na}),Object(o.jsx)(N.a,{path:"/calendar/:id?",component:Va}),Object(o.jsx)(N.a,{path:"/edit/:id?",component:Ha}),Object(o.jsx)(N.a,{path:"/config/",component:za})]}),e.alertDialog.open?Object(o.jsx)(Qt,Object(D.a)({},e.alertDialog)):Object(o.jsx)(o.Fragment,{})]})]})})),Ja=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Qa(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Za=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,282)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),o(e),c(e)}))};Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(),e.t0=l.a,e.t1=o.jsx,e.t2=u.a,e.next=6,_e();case 6:e.t3=e.sent,e.t4=Object(o.jsx)(p.a,{history:Ne,children:Object(o.jsx)(Xa,{})}),e.t5={store:e.t3,children:e.t4},e.t6=(0,e.t1)(e.t2,e.t5),e.t7=document.getElementById("root"),e.t0.render.call(e.t0,e.t6,e.t7);case 12:case"end":return e.stop()}}),e)})))(),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");Ja?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Qa(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Qa(t,e)}))}}(),Za()}},[[212,1,2]]]);
//# sourceMappingURL=main.fcb016da.chunk.js.map