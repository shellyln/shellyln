(this["webpackJsonpkanban-board-app"]=this["webpackJsonpkanban-board-app"]||[]).push([[0],{175:function(e,a,t){e.exports=t(222)},190:function(e,a,t){},193:function(e,a,t){},194:function(e,a,t){},220:function(e,a,t){},221:function(e,a,t){},222:function(e,a,t){"use strict";t.r(a);var r=t(8),n=t.n(r),o=t(15),i=t(0),c=t.n(i),s=t(10),l=t.n(s),d=t(17),u=t(84),p=t(88),m=t(157),g=window.location.pathname.replace(/\//g,"_");p.a.plugin(m.a);var f=null,b=null,h=new p.a("kanban-board-v1@".concat(g),{auto_compaction:!0}),v=new p.a("kanban-board-config-v1@".concat(g),{auto_compaction:!0});function y(){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(n.a.mark((function e(){var a,t,r,o,i,c,s,l,d,u,p,m,g,v,y;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=53;break}return e.next=3,h.allDocs({});case 3:if(a=e.sent,!f){e.next=10;break}return e.next=7,f.allDocs({});case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=null;case 11:for(t=e.t0,r=new Set,o=!0,i=!1,c=void 0,e.prev=16,s=a.rows[Symbol.iterator]();!(o=(l=s.next()).done);o=!0)d=l.value,r.add(d.id);e.next=24;break;case 20:e.prev=20,e.t1=e.catch(16),i=!0,c=e.t1;case 24:e.prev=24,e.prev=25,o||null==s.return||s.return();case 27:if(e.prev=27,!i){e.next=30;break}throw c;case 30:return e.finish(27);case 31:return e.finish(24);case 32:if(!t){e.next=52;break}for(u=!0,p=!1,m=void 0,e.prev=36,g=t.rows[Symbol.iterator]();!(u=(v=g.next()).done);u=!0)y=v.value,r.add(y.id);e.next=44;break;case 40:e.prev=40,e.t2=e.catch(36),p=!0,m=e.t2;case 44:e.prev=44,e.prev=45,u||null==g.return||g.return();case 47:if(e.prev=47,!p){e.next=50;break}throw m;case 50:return e.finish(47);case 51:return e.finish(44);case 52:b=h.sync(f,{live:!0,retry:!0,doc_ids:Array.from(r.values())}).on("change",(function(e){})).on("paused",(function(e){})).on("active",(function(e){})).on("complete",(function(e){})).on("error",(function(e){}));case 53:case"end":return e.stop()}}),e,null,[[16,20,24,32],[25,,27,31],[36,40,44,52],[45,,47,51]])})))).apply(this,arguments)}function E(){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){try{b.cancel()}catch(a){}b=null}return e.next=3,y();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,a,t){return B.apply(this,arguments)}function B(){return(B=Object(o.a)(n.a.mark((function e(a,t,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){try{b.cancel()}catch(n){}b=null}if(!f){e.next=10;break}return e.prev=2,e.next=5,f.close();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:f=null;case 10:if(!a||!a.match(/^https?:\/\//)){e.next=14;break}return f=new p.a(a,{auth:{username:t,password:r}}),e.next=14,y();case 14:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function O(){return h}t(190);var A=t(76),x=t(279),C=t(144),D=t(280),j=t(2),N=t(156),T=t(258),I=t(104),_=window.matchMedia("(prefers-color-scheme: dark)").matches,F=Object(N.a)({palette:_?{type:"dark",primary:{main:T.a[500]},secondary:{main:I.a[500]}}:{type:"light",primary:{main:T.a[500]},secondary:{main:I.a[500]}}});function U(e){var a="";return e.location.pathname&&(e.location.pathname.startsWith("/kanban/")?a="kanban":e.location.pathname.startsWith("/calendar/")?a="calendar":e.location.pathname.startsWith("/edit/")?a="edit":e.location.pathname.startsWith("/config/")&&(a="config")),a}var L=t(70),M=t.n(L),V=M()(),R=V.async("ACTIONS_UPDATE_APP_CONFIG"),K=V.async("ACTIONS_RESET_APPLICATION"),W={showAlertDialog:V("ACTIONS_SHOW_ALERT_DIALOG"),closeAlertDialog:V("ACTIONS_CLOSE_ALERT_DIALOG"),startUpdateAppConfig:R.started,doneUpdateAppConfig:R.done,failedUpdateAppConfig:R.failed,startResetApplication:K.started,doneResetApplication:K.done,failedResetApplication:K.failed},P=M()(),Y=P.async("ACTIONS_ADD_BOARD"),q=P.async("ACTIONS_CHANGE_ACTIVE_BOARD"),H=P.async("ACTIONS_UPDATE_BOARD_NAME"),G=P.async("ACTIONS_DELETE_BOARD"),z=P.async("ACTIONS_ADD_STICKY"),$=P.async("ACTIONS_UPDATE_STICKY"),X=P.async("ACTIONS_UPDATE_STICKY_LANES"),J=P.async("ACTIONS_ARCHIVE_STICKY"),Q=P.async("ACTIONS_UNARCHIVE_STICKY"),Z=P.async("ACTIONS_DELETE_STICKY"),ee=P.async("ACTIONS_EDIT_BOARD_AND_STICKYS"),ae=P.async("ACTIONS_REFRESH_ACTIVE_BOARD"),te={startAddBoard:Y.started,doneAddBoard:Y.done,failedAddBoard:Y.failed,startChangeActiveBoard:q.started,doneChangeActiveBoard:q.done,failedChangeActiveBoard:q.failed,startUpdateBoardName:H.started,doneUpdateBoardName:H.done,failedUpdateBoardName:H.failed,startDeleteBoard:G.started,doneDeleteBoard:G.done,failedDeleteBoard:G.failed,startAddSticky:z.started,doneAddSticky:z.done,failedAddSticky:z.failed,startUpdateSticky:$.started,doneUpdateSticky:$.done,failedUpdateSticky:$.failed,startUpdateStickyLanes:X.started,doneUpdateStickyLanes:X.done,failedUpdateStickyLanes:X.failed,startArchiveSticky:J.started,doneArchiveSticky:J.done,failedArchiveSticky:J.failed,startUnarchiveSticky:Q.started,doneUnarchiveSticky:Q.done,failedUnarchiveSticky:Q.failed,startDeleteSticky:Z.started,doneDeleteSticky:Z.done,failedDeleteSticky:Z.failed,startEditBoardAndStickys:ee.started,doneEditBoardAndStickys:ee.done,failedEditBoardAndStickys:ee.failed,startRefreshActiveBoard:ae.started,doneRefreshActiveBoard:ae.done,failedRefreshActiveBoard:ae.failed};function re(e){return{showAlertDialog:function(a){return e(W.showAlertDialog(a))},closeAlertDialog:function(){return e(W.closeAlertDialog())},updateAppConfig:function(a){return e(W.startUpdateAppConfig(a))},resetApplication:function(){return e(W.startResetApplication())},changeActiveBoard:function(a){return e(te.startChangeActiveBoard({boardId:a}))},refreshActiveBoard:function(){return e(te.startRefreshActiveBoard({}))}}}function ne(e){return Object.assign({},e.appEvents)}var oe=t(63),ie=t(46),ce=t(132),se=t(34),le=t(71),de=t(27);function ue(e){return"".concat(String(e.getFullYear()).padStart(4,"0"),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))}function pe(e){var a=e.match(/^(?:(-?\d{4,})-(\d{2})-(\d{2}))|(?:(-?\d{4,})(\d{2})(\d{2}))$/);return a?new Date(Number(a[1]),Number(a[2])-1,Number(a[3])):null}var me="# This is a board note.\n* Markdown syntax is available.\n* Go [Editor](#/edit/) to edit this note.",ge={boards:[{type:"kanbanBoard",name:"Welcome Board",taskStatuses:[{value:"Backlog",caption:"\ud83d\udecc Backlog",className:"status-backlog"},{value:"ToDo",caption:"\ud83d\udcef ToDo",className:"status-todo"},{value:"InProgress",caption:"\u26cf InProgress",className:"status-inprogress"},{value:"Staging",caption:"\ud83d\udce6 Staging",className:"status-staging"},{value:"Done",caption:"\ud83c\udf89 Done",className:"status-done",completed:!0}],teamOrStories:[{value:"Team A",caption:"\ud83d\udc06 Team A",className:"team-or-story-team-a"},{value:"Team B",caption:"\ud83e\udd83 Team B",className:"team-or-story-team-b"},{value:"Team C",caption:"\ud83d\udc0d Team C",className:"team-or-story-team-c"}],tags:[{value:"bug",className:"tag-bug"},{value:"ok",className:"tag-ok"},{value:"NG",className:"tag-NG"},{value:"PR",className:"tag-PR"},{value:"rejected",className:"tag-rejected"},{value:"pending",className:"tag-pending"},{value:"merged",className:"tag-merged"},{value:"critical",className:"tag-critical"},{value:"high",className:"tag-high"},{value:"moderate",className:"tag-moderate"},{value:"low",className:"tag-low"},{value:"\u2b50",className:"tag-star"},{value:"\u2b50\u2b50",className:"tag-star"},{value:"\u2b50\u2b50\u2b50",className:"tag-star"}],displayBarcode:!0,displayMemo:!0,displayFlags:!0,displayTags:!0,preferArchive:!1,boardStyle:"/* per-board customized styles */\n/*\n.KanbanBoardView-sticky-note {width: 200px}\n.KanbanBoardView-header-cell-task-statuses {min-width: 210px}\ntable.KanbanBoardView-board tbody th {\n    padding: 10px;\n    white-space: nowrap;\n}\n*/\ntable.KanbanBoardView-board thead th.status-backlog {\n    background-color: var(--weak-header-bg-color);\n}\ntable.KanbanBoardView-board td.status-backlog {\n    background-color: var(--weak-data-bg-color);\n}\ntable.KanbanBoardView-board thead th.status-done {\n    background-color: var(--weak-header-bg-color);\n}\ntable.KanbanBoardView-board td.status-done {\n    background-color: var(--weak-data-bg-color);\n}\n.team-or-story-team-b .KanbanBoardView-sticky-note {\n    background-color: var(--sticky-blue-color);\n}\n.status-done .KanbanBoardView-sticky-note {\n    background-color: var(--sticky-green-color);\n}\n.KanbanBoardView-sticky-tags .tag-bug {\n    color: white;\n    background-color: red;\n}\n.KanbanBoardView-sticky-tags .tag-ok {\n    color: white;\n    background-color: green;\n}\n.KanbanBoardView-sticky-tags .tag-NG {\n    color: white;\n    background-color: #e91e63;\n}\n.KanbanBoardView-sticky-tags .tag-PR {\n    color: white;\n    background-color: purple;\n}\n.KanbanBoardView-sticky-tags .tag-rejected {\n    color: white;\n    background-color: #990000;\n}\n.KanbanBoardView-sticky-tags .tag-pending {\n    color: black;\n    background-color: #ff9900;\n}\n.KanbanBoardView-sticky-tags .tag-merged {\n    color: white;\n    background-color: #006666;\n}\n.KanbanBoardView-sticky-tags .tag-critical {\n    color: white;\n    background-color: red;\n}\n.KanbanBoardView-sticky-tags .tag-high {\n    color: white;\n    background-color: #ff5522;\n}\n.KanbanBoardView-sticky-tags .tag-moderate {\n    color: black;\n    background-color: #ffcc00;\n}\n.KanbanBoardView-sticky-tags .tag-low {\n    color: black;\n    background-color: #cc9900;\n}\n.KanbanBoardView-sticky-tags .tag-star {\n    color: inherit;\n    background-color: inherit;\n}\n",calendarStyle:"/* per-board customized styles */\ndiv.CalendarView-item-chip.status-done {\n    background-color: var(--sticky-green-color);\n}\n",boardNote:""}],records:[{type:"kanban",dueDate:"",description:"# Welcome to the Kanban Board App!\n* This is a kanban (or sticky).\n* Write one task for one kanban.\n* To add a kanban to the board, Tap or click the \u201c+\u201d icon in the upper left corner of the board.\n* Tap or click on kanban to edit.\n* Drag and drop the kanban to change the status.",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"Backlog"},{type:"kanban",dueDate:"",description:"* Board and Kanban data are stored in the browser's local \u201cindexed DB\u201d.\n* You can use a remote [\u201cCouchDB\u201d](https://couchdb.apache.org) server to synchronize multiple device boards.\n* You can get a fully managed CouchDB server with [\u201cIBM Cloudant\xae\u201d from IBM Cloud](https://www.ibm.com/cloud/cloudant).\n* Create an [IBM Cloud Lite account](https://www.ibm.com/cloud/free/) and get a free tier without a credit card.",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"ToDo"},{type:"kanban",dueDate:"",description:"# Go [Settings](#/config/) to setup\n\n----\n\n* `remote.endpointUrl`: Cloudant `External Endpoint` URL w/ DB name\n  * e.g. `https://???-bluemix.cloudant.com/mydb`\n* `remote.user`: Cloudant `API Key`\n* `remote.password`: Cloudant `API Key`'s password",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"ToDo"},{type:"kanban",dueDate:"",description:"* You can customize the appearance and behavior of the board and kanban in the configuration editor view.\n\n\n----\n\n# Go [Editor](#/edit/) to setup",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"InProgress"},{type:"kanban",dueDate:"2030-01-01",description:"### Hello, kanban board !\n\n* ~aaa~\n  * **bbb**\n* *ccc*\n\n----\n\nhttps://shellyln.github.io/\n\n![logo](https://shellyln.github.io/assets/image/shellyln.png)",barcode:"12345",memo:"memo",flags:["Marked"],tags:["PR","bug","ok","NG","rejected","pending","merged","critical","high","moderate","low","\u2b50\u2b50\u2b50"],boardId:"",teamOrStory:"Team B",taskStatus:"Staging"},{type:"kanban",dueDate:"",description:"# What is a Kanban Board?\nhttps://www.atlassian.com/agile/kanban/boards",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team C",taskStatus:"Backlog"},{type:"kanban",dueDate:"",description:"# What are WIP limits?\nhttps://www.atlassian.com/agile/kanban/wip-limits",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team C",taskStatus:"Backlog"},{type:"kanban",dueDate:"",description:"# Get Started With Cloudant in IBM Cloud\nhttps://developer.ibm.com/clouddataservices/docs/cloudant/get-started/",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team C",taskStatus:"ToDo"},{type:"kanban",dueDate:"",description:"# Sign up for IBM Cloud\nhttps://cloud.ibm.com/registration",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team C",taskStatus:"ToDo"},{type:"kanban",dueDate:"",description:"Release Kanban board app v0.0.1\n\n![image](https://shellyln.github.io/knbn/images/icons/icon-32x32.png)",barcode:"",memo:"",flags:[],tags:["ok","merged","v0.0.1","feature-something","#1","#2"],boardId:"",teamOrStory:"Team A",taskStatus:"Done"},{type:"kanban",dueDate:"2030-01-01",description:"This record is archived.",barcode:"",memo:"",flags:["Archived"],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"Backlog"}]},fe=null;function be(){return he.apply(this,arguments)}function he(){return(he=Object(o.a)(n.a.mark((function e(){var a,t,r,i,c,s,l,d,u,p,m,g,f,b,h,v,y,k,w,S;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fe){e.next=60;break}return a=O(),t=null,e.next=5,a.allDocs({include_docs:!0});case 5:if(0!==(t=e.sent).rows.length){e.next=36;break}return r=ge,e.next=10,a.bulkDocs(Object(se.a)(r.boards.map((function(e){return Object.assign({},e,{boardNote:me})}))),{});case 10:for(i=e.sent,c=new Date,s=!0,l=!1,d=void 0,e.prev=15,u=r.records[Symbol.iterator]();!(s=(p=u.next()).done);s=!0)(m=p.value).dueDate=ue(c),m.boardId=i[0].id;e.next=23;break;case 19:e.prev=19,e.t0=e.catch(15),l=!0,d=e.t0;case 23:e.prev=23,e.prev=24,s||null==u.return||u.return();case 26:if(e.prev=26,!l){e.next=29;break}throw d;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return e.next=33,a.bulkDocs(Object(se.a)(r.records),{});case 33:return e.next=35,a.allDocs({include_docs:!0});case 35:t=e.sent;case 36:for(g=t.rows.filter((function(e){return e.doc&&"kanbanBoard"===e.doc.type})).map((function(e){return e.doc})).sort((function(e,a){return String(e.name).toLocaleLowerCase()>=String(a.name).toLocaleLowerCase()?String(e.name)===String(a.name)?0:1:-1})),f=!0,b=!1,h=void 0,e.prev=40,v=function(){var e=k.value,a=t.rows.filter((function(a){return a.doc&&"kanban"===a.doc.type&&a.doc.boardId===e._id})).map((function(e){return e.doc}));e.records=a},y=g[Symbol.iterator]();!(f=(k=y.next()).done);f=!0)v();e.next=49;break;case 45:e.prev=45,e.t1=e.catch(40),b=!0,h=e.t1;case 49:e.prev=49,e.prev=50,f||null==y.return||y.return();case 52:if(e.prev=52,!b){e.next=55;break}throw h;case 55:return e.finish(52);case 56:return e.finish(49);case 57:w={activeBoard:g[0],boards:g,activeBoardId:g[0]._id,activeBoardIndex:0},S=function(){var e=Object(o.a)(n.a.mark((function e(t,r){var o,i,c,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get(r,{});case 2:if(o=e.sent){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,a.find({selector:{type:"kanban",boardId:o._id}});case 7:return i=e.sent.docs,o.records=i,c=Math.max(0,t.boards.findIndex((function(e){return e._id===o._id}))),s=t.boards.slice(0,c).concat([o],t.boards.slice(c+1)),e.abrupt("return",Object.assign({},t,{boards:s,activeBoardId:o._id,activeBoard:o,activeBoardIndex:c}));case 12:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),fe=Object(le.reducerWithInitialState)(w).case(te.startAddBoard,(function(e,t){var r=ge,n={type:"kanbanBoard",name:t.boardName,taskStatuses:r.boards[0].taskStatuses,teamOrStories:r.boards[0].teamOrStories,tags:r.boards[0].tags,displayBarcode:r.boards[0].displayBarcode,displayMemo:r.boards[0].displayMemo,displayFlags:r.boards[0].displayFlags,displayTags:r.boards[0].displayTags,preferArchive:r.boards[0].preferArchive,boardStyle:r.boards[0].boardStyle,calendarStyle:r.boards[0].calendarStyle,boardNote:r.boards[0].boardNote};return a.post(n,{}).then((function(a){var r=n;r._id=a.id,r._rev=a.rev,r.records=[],e.boards=e.boards.concat([r]),Ne().dispatch(te.doneAddBoard({params:t,result:Object.assign({},e,{activeBoardId:a.id,activeBoard:r})})),setTimeout((function(){Ne().dispatch(Object(de.d)("/kanban/".concat(a.id)))}),30)})).catch((function(e){Ne().dispatch(te.failedAddBoard({params:t,error:e})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to add board: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(te.doneAddBoard,(function(e,a){return setTimeout((function(){E().then((function(){})).catch((function(e){alert(e.message)}))}),1500),a.result})).case(te.failedAddBoard,(function(e,a){return e})).case(te.startChangeActiveBoard,(function(e,a){return Object(o.a)(n.a.mark((function t(){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S(e,a.boardId);case 3:r=t.sent,Ne().dispatch(te.doneChangeActiveBoard({params:a,result:r})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),Ne().dispatch(te.failedChangeActiveBoard({params:a,error:t.t0})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to change active board: "+t.t0.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){Ne().dispatch(W.closeAlertDialog()),setTimeout((function(){Ne().dispatch(Object(de.d)("/kanban/"))}),500)}}))}),30);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))(),e})).case(te.doneChangeActiveBoard,(function(e,a){return a.result})).case(te.failedChangeActiveBoard,(function(e,a){return e})).case(te.startUpdateBoardName,(function(e,t){return Object(o.a)(n.a.mark((function r(){var o,i,c,s,l,d,u;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.get(t.boardId);case 3:if(o=r.sent){r.next=6;break}return r.abrupt("return",e);case 6:return r.next=8,a.find({selector:{type:"kanban",boardId:o._id}});case 8:return i=r.sent.docs,c=Object.assign({},o,{name:t.boardName}),r.next=12,a.put(c,{});case 12:s=r.sent,c.records=i,c._id=s.id,c._rev=s.rev,l=e.boards.findIndex((function(e){return e._id===t.boardId})),d=Object.assign({},e.boards[l]||{},c),u=l>=0?e.boards.slice(0,l).concat([d],e.boards.slice(l+1)):e.boards,Ne().dispatch(te.doneUpdateBoardName({params:t,result:Object.assign({},e,{boards:u,activeBoardId:d._id,activeBoard:d})})),r.next=26;break;case 22:r.prev=22,r.t0=r.catch(0),Ne().dispatch(te.failedUpdateBoardName({params:t,error:r.t0})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to change board name: "+r.t0.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30);case 26:case"end":return r.stop()}}),r,null,[[0,22]])})))(),e})).case(te.doneUpdateBoardName,(function(e,a){return a.result})).case(te.failedUpdateBoardName,(function(e,a){return e})).case(te.startDeleteBoard,(function(e,t){return Object(o.a)(n.a.mark((function r(){var o,i,c,s,l,d,u,p,m,g,f,b;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!(e.boards.length<=1)){r.next=3;break}return r.abrupt("return",e);case 3:return r.next=5,a.get(t.boardId);case 5:if(o=r.sent){r.next=8;break}return r.abrupt("return",e);case 8:return r.next=10,a.find({selector:{type:"kanban",boardId:t.boardId}});case 10:i=r.sent.docs,c=!0,s=!1,l=void 0,r.prev=14,d=i[Symbol.iterator]();case 16:if(c=(u=d.next()).done){r.next=23;break}return p=u.value,r.next=20,a.remove(p,{});case 20:c=!0,r.next=16;break;case 23:r.next=29;break;case 25:r.prev=25,r.t0=r.catch(14),s=!0,l=r.t0;case 29:r.prev=29,r.prev=30,c||null==d.return||d.return();case 32:if(r.prev=32,!s){r.next=35;break}throw l;case 35:return r.finish(32);case 36:return r.finish(29);case 37:return r.next=39,a.remove(o,{});case 39:return m=e.activeBoardId===t.boardId?e.boards[0]._id:e.activeBoardId,r.next=42,S(e,m);case 42:g=r.sent,f=g.boards.findIndex((function(e){return e._id===t.boardId})),b=f>=0?g.boards.slice(0,f).concat(g.boards.slice(f+1)):g.boards,setTimeout((function(){Ne().dispatch(te.doneDeleteBoard({params:t,result:Object.assign({},e,{boards:b,activeBoardId:m,activeBoard:g.activeBoard,activeBoardIndex:g.boards.findIndex((function(e){return e._id===m}))})})),setTimeout((function(){Ne().dispatch(Object(de.d)("/kanban/".concat(m))),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Done",message:"Board is deleted successfully",singleButton:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30)}),30)}),30),r.next=52;break;case 48:r.prev=48,r.t1=r.catch(0),Ne().dispatch(te.failedDeleteBoard({params:t,error:r.t1})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to delete board: "+r.t1.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30);case 52:case"end":return r.stop()}}),r,null,[[0,48],[14,25,29,37],[30,,32,36]])})))(),e})).case(te.doneDeleteBoard,(function(e,a){return a.result})).case(te.failedDeleteBoard,(function(e,a){return e})).case(te.startAddSticky,(function(e,t){var r=new Date,n={type:"kanban",dueDate:ue(new Date(r.getFullYear(),r.getMonth(),r.getDate())),description:"# Untitled",barcode:"",memo:"",flags:[],tags:[],boardId:e.activeBoardId,taskStatus:e.activeBoard.taskStatuses[0].value,teamOrStory:e.activeBoard.teamOrStories[0].value},o=e.activeBoard.records.concat([n]),i=Object.assign({},e.activeBoard,{records:o});return a.post(n,{}).then((function(a){n._id=a.id,n._rev=a.rev,Ne().dispatch(te.doneAddSticky({params:t,result:Object.assign({},e,{activeBoard:i})}))})).catch((function(e){Ne().dispatch(te.failedAddSticky({params:t,error:e})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to add sticky: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(te.doneAddSticky,(function(e,a){return setTimeout((function(){E().then((function(){})).catch((function(e){alert(e.message)}))}),1500),a.result})).case(te.failedAddSticky,(function(e,a){return e})).case(te.startUpdateSticky,(function(e,t){var r=e.activeBoard.records.findIndex((function(e){return e._id===t._id}));if(r<0)return e;var n=Object.assign({},e.activeBoard.records[r],{dueDate:t.dueDate,description:t.description,barcode:t.barcode,memo:t.memo,tags:t.tags,flags:t.flags,taskStatus:t.taskStatus,teamOrStory:t.teamOrStory}),o=e.activeBoard.records.slice(0,r).concat([n],e.activeBoard.records.slice(r+1)),i=Object.assign({},e.activeBoard,{records:o});return a.put(n,{}).then((function(a){n._id=a.id,n._rev=a.rev,Ne().dispatch(te.doneUpdateSticky({params:t,result:Object.assign({},e,{activeBoard:i})}))})).catch((function(e){Ne().dispatch(te.failedUpdateSticky({params:t,error:e})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to save the sticky: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(te.doneUpdateSticky,(function(e,a){return a.result})).case(te.failedUpdateSticky,(function(e,a){return e})).case(te.startUpdateStickyLanes,(function(e,t){var r=e.activeBoard.records.findIndex((function(e){return e._id===t.kanbanId}));if(r<0)return e;var n=Object.assign({},e.activeBoard.records[r],{taskStatus:t.taskStatusValue,teamOrStory:t.teamOrStoryValue}),o=e.activeBoard.records.slice(0,r).concat([n],e.activeBoard.records.slice(r+1)),i=Object.assign({},e.activeBoard,{records:o});return a.put(n,{}).then((function(a){n._id=a.id,n._rev=a.rev,Ne().dispatch(te.doneUpdateStickyLanes({params:t,result:Object.assign({},e,{activeBoard:i})}))})).catch((function(e){Ne().dispatch(te.failedUpdateStickyLanes({params:t,error:e})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to save the sticky: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(te.doneUpdateStickyLanes,(function(e,a){return a.result})).case(te.failedUpdateStickyLanes,(function(e,a){return e})).case(te.startArchiveSticky,(function(e,t){var r=e.activeBoard.records.findIndex((function(e){return e._id===t.kanbanId}));if(r<0)return e;var n=Object.assign({},e.activeBoard.records[r]);n.flags=(n.flags||[]).filter((function(e){return"Archived"!==e})),n.flags.push("Archived");var o=e.activeBoard.records.slice(0,r).concat([n],e.activeBoard.records.slice(r+1)),i=Object.assign({},e.activeBoard,{records:o});return a.put(n,{}).then((function(a){n._id=a.id,n._rev=a.rev,Ne().dispatch(te.doneArchiveSticky({params:t,result:Object.assign({},e,{activeBoard:i})}))})).catch((function(e){Ne().dispatch(te.failedArchiveSticky({params:t,error:e})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to archive the sticky: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(te.doneArchiveSticky,(function(e,a){return a.result})).case(te.failedArchiveSticky,(function(e,a){return e})).case(te.startUnarchiveSticky,(function(e,t){var r=e.activeBoard.records.findIndex((function(e){return e._id===t.kanbanId}));if(r<0)return e;var n=Object.assign({},e.activeBoard.records[r]);n.flags=(n.flags||[]).filter((function(e){return"Archived"!==e}));var o=e.activeBoard.records.slice(0,r).concat([n],e.activeBoard.records.slice(r+1)),i=Object.assign({},e.activeBoard,{records:o});return a.put(n,{}).then((function(a){n._id=a.id,n._rev=a.rev,Ne().dispatch(te.doneUnarchiveSticky({params:t,result:Object.assign({},e,{activeBoard:i})}))})).catch((function(e){Ne().dispatch(te.failedUnarchiveSticky({params:t,error:e})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to unarchive the sticky: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(te.doneUnarchiveSticky,(function(e,a){return a.result})).case(te.failedUnarchiveSticky,(function(e,a){return e})).case(te.startDeleteSticky,(function(e,t){var r=e.activeBoard.records.findIndex((function(e){return e._id===t.kanbanId}));if(r<0)return e;var n=e.activeBoard.records[r],o=e.activeBoard.records.slice(0,r).concat(e.activeBoard.records.slice(r+1)),i=Object.assign({},e.activeBoard,{records:o});return a.remove(n,{}).then((function(a){Ne().dispatch(te.doneDeleteSticky({params:t,result:Object.assign({},e,{activeBoard:i})}))})).catch((function(e){Ne().dispatch(te.failedDeleteSticky({params:t,error:e})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to delete the sticky: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(te.doneDeleteSticky,(function(e,a){return a.result})).case(te.failedDeleteSticky,(function(e,a){return e})).case(te.startEditBoardAndStickys,(function(e,t){return Object(o.a)(n.a.mark((function r(){var o,i,c,s,l,d,u,p,m,g,f,b,h,v,y,k,E,w,S;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!((o=e.boards.findIndex((function(e){return e._id===t._id})))<0)){r.next=4;break}return r.abrupt("return",e);case 4:return i=Object.assign({},e.boards[o],{name:t.name||"Untitled",taskStatuses:t.taskStatuses||ge.boards[0].taskStatuses,teamOrStories:t.teamOrStories||ge.boards[0].teamOrStories,tags:t.tags||[],displayBarcode:!!t.displayBarcode,displayMemo:!!t.displayMemo,displayFlags:!!t.displayFlags,displayTags:!!t.displayTags,preferArchive:!!t.preferArchive,boardStyle:t.boardStyle||"",calendarStyle:t.calendarStyle||"",boardNote:t.boardNote||""}),r.next=7,a.put(i,{});case 7:return c=r.sent,i._id=c.id,i._rev=c.rev,s=e.boards.slice(0,o).concat([i],e.boards.slice(o+1)),l=i._id===e.activeBoard._id?i:e.activeBoard,r.next=14,a.find({selector:{type:"kanban",boardId:i._id}});case 14:d=r.sent.docs,u=[],p=!0,m=!1,g=void 0,r.prev=19,f=n.a.mark((function e(){var t,r,o,c,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,r=d.find((function(e){return e._id===t._id})),o=null,!r){e.next=12;break}return o=Object.assign({},t,{type:"kanban",boardId:i._id,_rev:r._rev}),e.next=7,a.put(o,{});case 7:c=e.sent,o._id=c.id,o._rev=c.rev,e.next=20;break;case 12:return delete(o=Object.assign({},t,{type:"kanban",boardId:i._id}))._id,delete o._rev,e.next=17,a.post(o,{});case 17:s=e.sent,o._id=s.id,o._rev=s.rev;case 20:u.push(o);case 21:case"end":return e.stop()}}),e)})),b=(t.records||[])[Symbol.iterator]();case 22:if(p=(h=b.next()).done){r.next=27;break}return r.delegateYield(f(),"t0",24);case 24:p=!0,r.next=22;break;case 27:r.next=33;break;case 29:r.prev=29,r.t1=r.catch(19),m=!0,g=r.t1;case 33:r.prev=33,r.prev=34,p||null==b.return||b.return();case 36:if(r.prev=36,!m){r.next=39;break}throw g;case 39:return r.finish(36);case 40:return r.finish(33);case 41:v=!0,y=!1,k=void 0,r.prev=44,E=n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S.value,u.find((function(e){return e._id===t._id}))){e.next=5;break}return e.next=5,a.remove(t,{});case 5:case"end":return e.stop()}}),e)})),w=d[Symbol.iterator]();case 47:if(v=(S=w.next()).done){r.next=52;break}return r.delegateYield(E(),"t2",49);case 49:v=!0,r.next=47;break;case 52:r.next=58;break;case 54:r.prev=54,r.t3=r.catch(44),y=!0,k=r.t3;case 58:r.prev=58,r.prev=59,v||null==w.return||w.return();case 61:if(r.prev=61,!y){r.next=64;break}throw k;case 64:return r.finish(61);case 65:return r.finish(58);case 66:i.records=u,Ne().dispatch(te.doneEditBoardAndStickys({params:t,result:Object.assign({},e,{boards:s,activeBoardId:l._id,activeBoard:l})})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Done",message:"Board is saved successfully",singleButton:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30),r.next=75;break;case 71:r.prev=71,r.t4=r.catch(0),Ne().dispatch(te.failedEditBoardAndStickys({params:t,error:r.t4})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to save the board: "+r.t4.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30);case 75:case"end":return r.stop()}}),r,null,[[0,71],[19,29,33,41],[34,,36,40],[44,54,58,66],[59,,61,65]])})))(),e})).case(te.doneEditBoardAndStickys,(function(e,a){return setTimeout((function(){E().then((function(){})).catch((function(e){alert(e.message)}))}),1500),a.result})).case(te.failedEditBoardAndStickys,(function(e,a){return e})).case(te.startRefreshActiveBoard,(function(e,a){return Object(o.a)(n.a.mark((function t(){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S(e,e.activeBoard._id);case 3:r=t.sent,Ne().dispatch(te.doneRefreshActiveBoard({params:a,result:r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Ne().dispatch(te.failedRefreshActiveBoard({params:a,error:t.t0}));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))(),e})).case(te.doneRefreshActiveBoard,(function(e,a){return a.result})).case(te.failedRefreshActiveBoard,(function(e,a){return e}));case 60:return e.abrupt("return",fe);case 61:case"end":return e.stop()}}),e,null,[[15,19,23,31],[24,,26,30],[40,45,49,57],[50,,52,56]])})))).apply(this,arguments)}var ve=M()(),ye={showToday:ve("ACTIONS_SHOW_TODAY"),showNextMonth:ve("ACTIONS_SHOW_NEXT_MONTH"),showPreviousMonth:ve("ACTIONS_SHOW_PREVIOUS_MONTH"),showNextYear:ve("ACTIONS_SHOW_NEXT_YEAR"),showPreviousYear:ve("ACTIONS_SHOW_PREVIOUS_YEAR")},ke=null;function Ee(){return we.apply(this,arguments)}function we(){return(we=Object(o.a)(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ke||(a={activeMonth:new Date},ke=Object(le.reducerWithInitialState)(a).case(ye.showToday,(function(e){var a=new Date,t=new Date(a.getFullYear(),a.getMonth(),1);return Object.assign({},e,{activeMonth:t})})).case(ye.showNextMonth,(function(e){var a=e.activeMonth,t=new Date(a.getFullYear(),a.getMonth()+1,1);return Object.assign({},e,{activeMonth:t})})).case(ye.showPreviousMonth,(function(e){var a=e.activeMonth,t=new Date(a.getFullYear(),a.getMonth()-1,1);return Object.assign({},e,{activeMonth:t})})).case(ye.showNextYear,(function(e){var a=e.activeMonth,t=new Date(a.getFullYear()+1,a.getMonth(),1);return Object.assign({},e,{activeMonth:t})})).case(ye.showPreviousYear,(function(e){var a=e.activeMonth,t=new Date(a.getFullYear()-1,a.getMonth(),1);return Object.assign({},e,{activeMonth:t})}))),e.abrupt("return",ke);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Se=t(55);function Be(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function Oe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Be(t,!0).forEach((function(a){Object(Se.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Be(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var Ae=null;function xe(){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(o.a)(n.a.mark((function e(){var a,t,r,i,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ae){e.next=17;break}return a=v,t=O(),r=null,e.next=6,a.allDocs({include_docs:!0});case 6:if(r=e.sent,i={remote:{endpointUrl:"",user:"",password:""},display:{autoUpdate:!1,autoUpdateInterval:2419200}},0!==r.rows.length){e.next=14;break}return e.next=11,a.post(Oe({type:"appConfig"},i),{});case 11:return e.next=13,a.allDocs({include_docs:!0});case 13:r=e.sent;case 14:(c={alertDialog:{open:!1,title:"",message:"",onClose:function(){}},appConfig:Oe({},i,{},r.rows[0].doc)}).appConfig.remote&&c.appConfig.remote.endpointUrl?S(c.appConfig.remote.endpointUrl,c.appConfig.remote.user||"",c.appConfig.remote.password||"").then((function(){})).catch((function(e){alert("Failed to connect to the remote DB: "+e.message)})):S("","","").then((function(){})).catch((function(e){alert("Failed to connect to the remote DB: "+e.message)})),Ae=Object(le.reducerWithInitialState)(c).case(W.showAlertDialog,(function(e,a){return Object.assign({},e,{alertDialog:a})})).case(W.closeAlertDialog,(function(e){return Object.assign({},e,{alertDialog:c})})).case(W.startUpdateAppConfig,(function(e,t){var r=Object.assign({},e.appConfig,t.remote&&t.remote.endpointUrl?{remote:t.remote}:{remote:i.remote},t.display?{display:t.display}:{display:i.display});return a.put(r,{}).then((function(a){r._id=a.id,r._rev=a.rev,Ne().dispatch(W.doneUpdateAppConfig({params:t,result:Object.assign({},e,{appConfig:r})})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Done",message:"Settings is saved successfully",singleButton:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30),r.remote.endpointUrl&&S(r.remote.endpointUrl,r.remote.user,r.remote.password).then((function(){})).catch((function(e){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to connect to the remote DB: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}))})).catch((function(e){Ne().dispatch(W.failedUpdateAppConfig({params:t,error:e})),setTimeout((function(){Ne().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"Failed to update settings: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return Ne().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(W.doneUpdateAppConfig,(function(e,a){return a.result})).case(W.failedUpdateAppConfig,(function(e,a){return e})).case(W.startResetApplication,(function(e){return Object(o.a)(n.a.mark((function r(){return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.prev=1,r.next=4,S("","","");case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),alert(r.t0);case 9:return r.prev=9,r.next=12,t.destroy({});case 12:r.next=17;break;case 14:r.prev=14,r.t1=r.catch(9),alert(r.t1);case 17:return r.prev=17,r.next=20,a.destroy({});case 20:r.next=25;break;case 22:r.prev=22,r.t2=r.catch(17),alert(r.t2);case 25:alert("All app data and configurations are removed. Please reload page."),Ne().dispatch(W.doneResetApplication({result:e})),r.next=33;break;case 29:r.prev=29,r.t3=r.catch(0),alert(r.t3),Ne().dispatch(W.failedResetApplication({error:r.t3}));case 33:case"end":return r.stop()}}),r,null,[[0,29],[1,6],[9,14],[17,22]])})))(),e})).case(W.doneUpdateAppConfig,(function(e,a){return a.result})).case(W.failedUpdateAppConfig,(function(e,a){return e}));case 17:return e.abrupt("return",Ae);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var De=Object(ie.a)({hashType:"slash"}),je=null;function Ne(){return je}function Te(){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(je){e.next=17;break}return e.t0=oe.e,e.t1=oe.c,e.t2=Object(u.b)(De),e.next=6,xe();case 6:return e.t3=e.sent,e.next=9,be();case 9:return e.t4=e.sent,e.next=12,Ee();case 12:e.t5=e.sent,e.t6={router:e.t2,appEvents:e.t3,kanbanBoard:e.t4,calendar:e.t5},e.t7=(0,e.t1)(e.t6),e.t8=Object(oe.d)(Object(oe.a)(Object(ce.a)(De))),je=(0,e.t0)(e.t7,e.t8);case 17:return e.abrupt("return",je);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _e=t(9),Fe=t(284),Ue=t(272),Le=t(271),Me=t(98),Ve=t.n(Me),Re=t(99),Ke=t.n(Re),We=t(100),Pe=t.n(We),Ye=t(147),qe=t.n(Ye),He=t(101),Ge=t.n(He),ze=t(148),$e=t.n(ze),Xe=t(149),Je=t.n(Xe),Qe=t(150),Ze=t.n(Qe),ea=t(145),aa=t.n(ea),ta=t(146),ra=t.n(ta),na=t(274),oa=t(267),ia=t(273),ca=t(226),sa=t(276),la=t(275),da=t(270);function ua(e){return{addBoard:function(a){return e(te.startAddBoard({boardName:a}))},changeActiveBoard:function(a){return e(te.startChangeActiveBoard({boardId:a}))},updateBoardName:function(a){return e(te.startUpdateBoardName(a))},deleteBoard:function(a){return e(te.startDeleteBoard({boardId:a}))},addSticky:function(){return e(te.startAddSticky({}))},updateSticky:function(a){return e(te.startUpdateSticky(a))},updateStickyLanes:function(a){return e(te.startUpdateStickyLanes(a))},archiveSticky:function(a){return e(te.startArchiveSticky({kanbanId:a}))},unarchiveSticky:function(a){return e(te.startUnarchiveSticky({kanbanId:a}))},deleteSticky:function(a){return e(te.startDeleteSticky({kanbanId:a}))},editBoardAndStickys:function(a){return e(te.startEditBoardAndStickys(a))},refreshActiveBoard:function(){return e(te.startRefreshActiveBoard({}))},showAlertDialog:function(a){return e(W.showAlertDialog(a))},closeAlertDialog:function(){return e(W.closeAlertDialog())}}}function pa(e){return Object.assign({},e.kanbanBoard)}var ma=t(269),ga=t(283),fa=t(259),ba=t(268),ha=t(262),va=t(263),ya=t(261),ka=t(41),Ea=t.n(ka),wa=t(74),Sa=t.n(wa),Ba=t(32),Oa=0;function Aa(){return"$$gensym$$_xjKvAjFXoVtro45V_".concat(Oa++,"$$")}var xa=function(e){var a=Object(Ba.a)(),t=c.a.useState(e.open),r=Object(_e.a)(t,2),n=r[0],o=r[1],i=c.a.useState(e.value),s=Object(_e.a)(i,2),l=s[0],d=s[1],u=Aa();function p(){o(!1),e.onClose(!1)}return c.a.createElement(fa.a,{open:n,onClose:p,"aria-labelledby":u},c.a.createElement(ya.a,{id:u},e.title),c.a.createElement(ha.a,null,e.message?c.a.createElement(va.a,null,e.message):c.a.createElement(c.a.Fragment,null),c.a.createElement(ga.a,{autoFocus:!0,margin:"dense",label:e.fieldLabel,fullWidth:!0,value:l,error:!!e.validator&&e.validator(l),onChange:function(e){d(e.target.value)}})),c.a.createElement(ba.a,null,c.a.createElement(ma.a,{variant:"outlined",color:"default",onClick:p},c.a.createElement(Sa.a,null),c.a.createElement("span",{style:{marginLeft:a.spacing(1)}}),e.cancelButtonCaption||"Cancel"),c.a.createElement(ma.a,{variant:"contained",color:e.colorIsSecondary?"secondary":"primary",disabled:!!e.validator&&e.validator(l),onClick:function(){o(!1),e.onClose(!0,l)}},c.a.createElement(Ea.a,null),c.a.createElement("span",{style:{marginLeft:a.spacing(1)}}),e.applyButtonCaption||"Apply")))},Ca=Object(C.a)((function(e){return{drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(Se.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(6)+1},e.breakpoints.up("sm"),{width:e.spacing(6)+1}),nested:{paddingLeft:e.spacing(4)}}})),Da=Object(A.e)(Object(d.c)(pa,ua)((function(e){var a,t,r=Ca(),n=c.a.useState(!0),o=Object(_e.a)(n,2),i=o[0],s=o[1],l=c.a.useState({open:!1,title:"",message:"",fieldLabel:"",value:"",validator:function(e){return e.trim().length<=0},onClose:function(a,t){p(Object.assign({},u,{open:!1})),a&&t&&e.addBoard(t)}}),d=Object(_e.a)(l,2),u=d[0],p=d[1],m=c.a.useState(!0),g=Object(_e.a)(m,2),f=g[0],b=g[1],h=Object(da.a)("print");function v(a,t){t===e.activeBoardId&&e.history.push("/".concat(a,"/").concat(t))}var y=U(e.history);return c.a.createElement(c.a.Fragment,null,h?c.a.createElement(c.a.Fragment,null):c.a.createElement(Fe.a,{variant:"permanent",className:Object(j.a)(r.drawer,(a={},Object(Se.a)(a,r.drawerOpen,i),Object(Se.a)(a,r.drawerClose,!i),a)),classes:{paper:Object(j.a)((t={},Object(Se.a)(t,r.drawerOpen,i),Object(Se.a)(t,r.drawerClose,!i),t))},anchor:"left",open:i},c.a.createElement("div",{className:""},c.a.createElement(Le.a,{onClick:function(){s(!i)}},i?c.a.createElement(Ve.a,null):c.a.createElement(Ke.a,null))),c.a.createElement(Ue.a,null),i?c.a.createElement(c.a.Fragment,null,c.a.createElement(oa.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:c.a.createElement(ia.a,{component:"div",id:"nested-list-subheader"},"Boards")},c.a.createElement(ca.a,{button:!0,onClick:function(){b(!f)}},f?c.a.createElement(aa.a,null):c.a.createElement(ra.a,null)),c.a.createElement(na.a,{in:f,timeout:"auto",unmountOnExit:!0},c.a.createElement(oa.a,{component:"div",disablePadding:!0},e.boards.map((function(a){return c.a.createElement(ca.a,{button:!0,key:a._id,selected:a._id===e.activeBoardId,className:Object(j.a)(r.nested),style:{fontWeight:a._id===e.activeBoardId?"bold":"normal"},onClick:function(t){return function(a){var t="kanban";e.history.location.pathname&&(e.history.location.pathname.startsWith("/calendar/")?t="calendar":e.history.location.pathname.startsWith("/edit/")&&(t="edit")),e.history.push("/".concat(t,"/").concat(a))}(a._id)}},c.a.createElement(la.a,{primary:a.name}))}))))),c.a.createElement(ca.a,{button:!0,onClick:function(){p(Object.assign({},u,{open:!0,title:"New board",message:"",fieldLabel:"Board name",value:""}))}},c.a.createElement(sa.a,null,c.a.createElement(Pe.a,null)),c.a.createElement(la.a,{primary:"New board..."})),c.a.createElement(Ue.a,null)):c.a.createElement(c.a.Fragment,null),c.a.createElement(oa.a,null,c.a.createElement(ca.a,{button:!0,selected:"kanban"===y||""===y,onClick:function(a){return v("kanban",e.activeBoardId)}},c.a.createElement(sa.a,null,c.a.createElement(qe.a,null)),i?c.a.createElement(la.a,{primary:"Kanban"}):c.a.createElement(c.a.Fragment,null)),c.a.createElement(ca.a,{button:!0,selected:"calendar"===y,onClick:function(a){return v("calendar",e.activeBoardId)}},c.a.createElement(sa.a,null,c.a.createElement(Ge.a,null)),i?c.a.createElement(la.a,{primary:"Calendar"}):c.a.createElement(c.a.Fragment,null)),c.a.createElement(ca.a,{button:!0,selected:"edit"===y,onClick:function(a){return v("edit",e.activeBoardId)}},c.a.createElement(sa.a,null,c.a.createElement($e.a,null)),i?c.a.createElement(la.a,{primary:"Editor"}):c.a.createElement(c.a.Fragment,null))),i?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ue.a,null),c.a.createElement(ca.a,{button:!0,selected:"config"===y,onClick:function(a){return e.history.push("/config/")}},c.a.createElement(sa.a,null,c.a.createElement(Je.a,null)),i?c.a.createElement(la.a,{primary:"Settings"}):c.a.createElement(c.a.Fragment,null)),c.a.createElement(oa.a,null,c.a.createElement(ca.a,{button:!0,onClick:function(e){return window.open("https://github.com/shellyln/kanban-board-app#tips","_blank")}},c.a.createElement(sa.a,null,c.a.createElement(Ze.a,null)),i?c.a.createElement(la.a,{primary:"Help"}):c.a.createElement(c.a.Fragment,null)))):c.a.createElement(c.a.Fragment,null)),u.open?c.a.createElement(xa,{open:!0,title:u.title,message:u.message,fieldLabel:u.fieldLabel,value:u.value,validator:u.validator,onClose:u.onClose}):c.a.createElement(c.a.Fragment,null))}))),ja=t(80),Na=t(115),Ta=t.n(Na),Ia=t(151),_a=t.n(Ia),Fa=t(155),Ua=t(154),La=t(29),Ma=t(281),Va=t(282),Ra=t(277),Ka=t(285),Wa=t(266),Pa=t(278),Ya=t(117),qa=t.n(Ya),Ha=t(116),Ga=t.n(Ha),za=t(49),$a=t.n(za),Xa=function(e){var a=Object(Ba.a)(),t=c.a.useState(e.open),r=Object(_e.a)(t,2),n=r[0],o=r[1],i=c.a.useState(""),s=Object(_e.a)(i,2),l=s[0],d=s[1],u=Aa();function p(){o(!1),e.onClose(!1)}return c.a.createElement(fa.a,{open:n,onClose:p,"aria-labelledby":u},e.fab?e.fab:c.a.createElement(c.a.Fragment,null),c.a.createElement(ya.a,{id:u,style:{textAlign:"center"}},e.title),c.a.createElement(ha.a,null,c.a.createElement(va.a,{style:{textAlign:"center"}},(e.message||"").split("\n").map((function(e,a,t){return c.a.createElement("span",{key:"content-"+a},e,a<=t.length-1?c.a.createElement("br",null):c.a.createElement(c.a.Fragment,null))})))),e.confirmingTextValue?c.a.createElement(ga.a,{autoFocus:!0,margin:"dense",label:e.confirmingTextLabel,value:l,onChange:function(e){d(e.target.value)},style:{marginLeft:a.spacing(1),marginRight:a.spacing(1),marginBottom:a.spacing(1)}}):c.a.createElement(c.a.Fragment,null),c.a.createElement(ba.a,{style:{margin:"auto"}},e.singleButton?c.a.createElement(c.a.Fragment,null):c.a.createElement(ma.a,{variant:"outlined",color:"default",onClick:p},c.a.createElement(Sa.a,null),c.a.createElement("span",{style:{marginLeft:a.spacing(1)}}),e.cancelButtonCaption||"Cancel"),c.a.createElement(ma.a,{variant:"contained",color:e.colorIsSecondary?"secondary":"primary",disabled:!!e.confirmingTextValue&&l!==e.confirmingTextValue,onClick:function(){e.confirmingTextValue&&e.confirmingTextValue!==l||(o(!1),e.onClose(!0))}},c.a.createElement(Ea.a,null),c.a.createElement("span",{style:{marginLeft:a.spacing(1)}}),e.applyButtonCaption||"Apply")))},Ja=t(79),Qa=t(158),Za=Object(Qa.a)({rawToToken:function(e){return e},concatTokens:function(e){return e.length?[e.reduce((function(e,a){return e+a}))]:[]}}),et=Za.seq,at=Za.cls,tt=Za.notCls,rt=Za.classes,nt=Za.cat,ot=Za.repeat,it=Za.end,ct=Za.first,st=Za.combine,lt=Za.erase,dt=Za.trans,ut=Za.ahead,pt=dt((function(e){return e.length?e:[""]}))(lt(ot(rt.spaceWithinSingleLine),at('"')),nt(ot(ct(dt((function(e){return['"']}))(et('""')),tt('"')))),lt(at('"'),ot(lt(rt.spaceWithinSingleLine)))),mt=dt((function(e){return e.length?e:[""]}))(lt(ot(rt.spaceWithinSingleLine)),nt(ot(ct(lt(rt.spaceWithinSingleLine,ut(at(",","\r\n","\n","\r"))),tt(",","\r\n","\n","\r"))))),gt=ct(pt,mt),ft=dt((function(e){return[e]}))(gt,ot(st(lt(et(",")),gt))),bt=st(ft,ot(st(lt(rt.newline),ft)),it());function ht(e){var a=bt(Object(Ja.b)(e));if(!a.succeeded)throw new Error(a.message);return a.tokens}var vt=Object(C.a)((function(e){return{formControl:{minWidth:220},icon:{margin:e.spacing(1),fontSize:26},fabDelete:{position:"absolute",margin:e.spacing(1),right:e.spacing(1),top:e.spacing(1)}}})),yt=function(e){var a=vt(),t=Object(Ba.a)(),r=c.a.useState(e.open),n=Object(_e.a)(r,2),o=n[0],i=n[1],s=c.a.useState(!1),l=Object(_e.a)(s,2),d=l[0],u=l[1],p=c.a.useState(e.record.description),m=Object(_e.a)(p,2),g=m[0],f=m[1],b=c.a.useState(e.record.barcode),h=Object(_e.a)(b,2),v=h[0],y=h[1],k=c.a.useState(e.record.memo),E=Object(_e.a)(k,2),w=E[0],S=E[1],B=c.a.useState(e.record.tags?e.record.tags.map((function(e){return e.includes(",")?'"'.concat(e.replace(/"/g,'""'),'"'):e})).join(", "):""),O=Object(_e.a)(B,2),A=O[0],x=O[1],C=c.a.useState(e.record.flags?e.record.flags.map((function(e){return e.includes(",")?'"'.concat(e.replace(/"/g,'""'),'"'):e})).join(", "):""),D=Object(_e.a)(C,2),N=D[0],T=D[1],I=c.a.useState(pe(e.record.dueDate)),_=Object(_e.a)(I,2),F=_[0],U=_[1],L=c.a.useState(e.record.taskStatus),M=Object(_e.a)(L,2),V=M[0],R=M[1],K=c.a.useState(e.record.teamOrStory),W=Object(_e.a)(K,2),P=W[0],Y=W[1],q=Aa(),H=Aa(),G=Aa(),z=!!e.record.flags&&e.record.flags.includes("Archived");function $(){i(!1),e.onCancel()}function X(e){x(e.target.value)}function J(e){T(e.target.value)}return c.a.createElement(c.a.Fragment,null,c.a.createElement(fa.a,{open:o,onClose:$,"aria-labelledby":q},c.a.createElement(ya.a,{id:q,style:{paddingBottom:"0"}},"Edit Kanban",c.a.createElement(ma.a,{className:Object(j.a)(a.fabDelete),variant:"outlined",color:e.board.preferArchive?"default":"secondary",onClick:function(){u(!0)}},e.board.preferArchive?z?c.a.createElement(Ga.a,null):c.a.createElement(qa.a,null):c.a.createElement($a.a,{color:"secondary"}),c.a.createElement(ja.a,{variant:"body1",color:e.board.preferArchive?"initial":"secondary",style:{marginLeft:t.spacing(1)}},e.board.preferArchive?z?"Unarchive":"Archive":"Delete"))),c.a.createElement(ha.a,null,c.a.createElement(La.a,{utils:Ua.a},c.a.createElement("div",null,c.a.createElement(ga.a,{margin:"dense",label:"Description",multiline:!0,rows:4,rowsMax:16,fullWidth:!0,value:g,onChange:function(e){f(e.target.value)},helperText:"Markdown syntax is available"})),c.a.createElement("div",null,c.a.createElement(Ma.a,{margin:"dense",label:"Due date",format:"yyyy-MM-dd",KeyboardButtonProps:{"aria-label":"change date"},value:F,onChange:function(e){U(e)}})),c.a.createElement("div",null,c.a.createElement(Wa.a,{className:Object(j.a)(a.formControl),style:{marginTop:"5px"}},c.a.createElement(Ka.a,{htmlFor:H},"Status"),c.a.createElement(Va.a,{value:V,onChange:function(e){e.target.name&&R(e.target.value)},inputProps:{name:"taskStatus",id:H}},e.taskStatuses.map((function(e){return c.a.createElement(Ra.a,{key:e.value,value:e.value},e.caption||e.value)})))),c.a.createElement(Wa.a,{className:Object(j.a)(a.formControl),style:{marginLeft:t.spacing(1),marginTop:"5px"}},c.a.createElement(Ka.a,{htmlFor:G},"Team / Story"),c.a.createElement(Va.a,{value:P,onChange:function(e){e.target.name&&Y(e.target.value)},inputProps:{name:"teamOrStory",id:G}},e.teamOrStories.map((function(e){return c.a.createElement(Ra.a,{key:e.value,value:e.value},e.caption||e.value)}))))),e.board.displayTags&&e.board.displayFlags?c.a.createElement("div",null,c.a.createElement(Wa.a,{className:Object(j.a)(a.formControl),style:{marginTop:"5px"}},c.a.createElement(ga.a,{margin:"dense",label:"Tags",value:A,onChange:X,helperText:"Separate with commas (Excel CSV syntax)"})),c.a.createElement(Wa.a,{className:Object(j.a)(a.formControl),style:{marginLeft:t.spacing(1),marginTop:"5px"}},c.a.createElement(ga.a,{margin:"dense",label:"Flags",value:N,onChange:J,helperText:"Separate with commas (Excel CSV syntax)"}))):c.a.createElement(c.a.Fragment,null),e.board.displayTags&&!e.board.displayFlags?c.a.createElement("div",null,c.a.createElement(ga.a,{margin:"dense",label:"Tags",fullWidth:!0,value:A,onChange:X,helperText:"Separate with commas (Excel CSV syntax)"})):c.a.createElement(c.a.Fragment,null),e.board.displayFlags&&!e.board.displayTags?c.a.createElement("div",null,c.a.createElement(ga.a,{margin:"dense",label:"Flags",fullWidth:!0,value:N,onChange:J,helperText:"Separate with commas (Excel CSV syntax)"})):c.a.createElement(c.a.Fragment,null),e.board.displayBarcode?c.a.createElement("div",null,c.a.createElement(ga.a,{margin:"dense",label:"Barcode",multiline:!0,rows:1,rowsMax:16,fullWidth:!0,value:v,onChange:function(e){y(e.target.value)}})):c.a.createElement(c.a.Fragment,null),e.board.displayMemo?c.a.createElement("div",null,c.a.createElement(ga.a,{margin:"dense",label:"Memo",multiline:!0,rows:1,rowsMax:16,fullWidth:!0,value:w,onChange:function(e){S(e.target.value)}})):c.a.createElement(c.a.Fragment,null))),c.a.createElement(ba.a,null,c.a.createElement(ma.a,{onClick:$,variant:"outlined",color:"default"},c.a.createElement(Sa.a,null),c.a.createElement("span",{style:{marginLeft:t.spacing(1)}}),"Cancel"),c.a.createElement(ma.a,{onClick:function(){i(!1);var a=A.trim(),t=a?ht(a):[],r=N.trim(),n=r?ht(r):[];e.onApply(Object.assign({},e.record,{description:g,barcode:v,memo:w,tags:(t[0]||[]).map((function(e){return e.trim()})).filter((function(e){return e.length>0})),flags:(n[0]||[]).map((function(e){return e.trim()})).filter((function(e){return e.length>0})),dueDate:F&&!Number.isNaN(F.getTime())?ue(F):"",taskStatus:V,teamOrStory:P}))},variant:"contained",color:"primary"},c.a.createElement(Ea.a,null),c.a.createElement("span",{style:{marginLeft:t.spacing(1)}}),"Apply"))),d?c.a.createElement(Xa,{open:!0,title:e.board.preferArchive?z?"Unarchive kanban":"Archive kanban":"Delete kanban",message:"Are you sure want to ".concat(e.board.preferArchive?z?"unarchive":"archive":"delete"," the kanban?"),colorIsSecondary:!e.board.preferArchive,applyButtonCaption:e.board.preferArchive?z?"Unarchive":"Archive":"Delete",fab:e.board.preferArchive?z?c.a.createElement(Pa.a,{size:"large",variant:"round","aria-label":"unarchive",style:{margin:"auto"}},c.a.createElement(Ga.a,null)):c.a.createElement(Pa.a,{size:"large",variant:"round","aria-label":"archive",style:{margin:"auto"}},c.a.createElement(qa.a,null)):c.a.createElement(Pa.a,{size:"large",variant:"round","aria-label":"delete",color:"secondary",style:{margin:"auto"}},c.a.createElement($a.a,null)),onClose:e.board.preferArchive?z?function(a){u(!1),a&&(i(!1),e.onUnarchive(e.record._id))}:function(a){u(!1),a&&(i(!1),e.onArchive(e.record._id))}:function(a){u(!1),a&&(i(!1),e.onDelete(e.record._id))}}):c.a.createElement(c.a.Fragment,null))},kt=(t(193),_a()(window)),Et=Object(C.a)((function(e){return{root:{},smallIcon:{width:"20px",height:"20px"}}})),wt=function(){return{}},St=-1!==window.navigator.userAgent.toLowerCase().indexOf("firefox"),Bt=Object(d.c)(wt,ua)((function(e){var a=c.a.useState(!1),t=Object(_e.a)(a,2),r=t[0],n=t[1],o=new Date,i=new Date(o.getFullYear(),o.getMonth(),o.getDate()),s=e.record.dueDate?pe(e.record.dueDate):null,l=!e.taskStatus.completed&&!!s&&s<i;return c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{id:Aa(),"data-record-id":e.record._id||"",className:"KanbanBoardView-sticky-link",draggable:!0,onClick:function(e){return n(!0)},onDragStart:function(e){e.dataTransfer.setData("elId",e.target.id)}},c.a.createElement("div",{className:"KanbanBoardView-sticky-note"+(l?" expired":"")},e.board.displayTags&&e.record.tags.length?c.a.createElement("ul",{className:"KanbanBoardView-sticky-tags"},e.record.tags.map((function(a,t){var r=(e.board.tags||[]).find((function(e){return e.value===a}));return c.a.createElement("li",{key:e.record._id+"-tag-"+t,className:r?r.className:""},a)}))):c.a.createElement(c.a.Fragment,null),c.a.createElement("div",{className:"KanbanBoardView-sticky-description",dangerouslySetInnerHTML:{__html:kt.sanitize(Ta()(e.record.description))}}),e.board.displayBarcode&&e.record.barcode?c.a.createElement("div",{className:"KanbanBoardView-sticky-barcode",dangerouslySetInnerHTML:{__html:new Fa.a({fill:!0,fillColor:_?"#fff":"#000",cellSize:2,unit:"px",data:e.record.barcode}).toImgTag()}}):c.a.createElement(c.a.Fragment,null),e.record.flags.includes("Marked")?c.a.createElement("div",{className:"marked"},"\ud83d\udccd"):c.a.createElement(c.a.Fragment,null),e.record.dueDate?c.a.createElement("div",{className:"due-date"},(l?"\ud83d\udd25":"\u23f3")+e.record.dueDate):c.a.createElement(c.a.Fragment,null))),r?c.a.createElement(yt,{open:!0,record:e.record,teamOrStories:e.teamOrStories,taskStatuses:e.taskStatuses,board:e.board,onApply:function(a){e.updateSticky(a),n(!1)},onArchive:function(a){e.archiveSticky(a),n(!1)},onUnarchive:function(a){e.unarchiveSticky(a),n(!1)},onDelete:function(a){e.deleteSticky(a),n(!1)},onCancel:function(){n(!1)}}):c.a.createElement(c.a.Fragment,null))})),Ot=Object(d.c)(wt,ua)((function(e){var a=e.records.filter((function(e){return!e.flags||!e.flags.includes("Archived")}));return c.a.createElement("div",{className:"KanbanBoardView-sticky-wrap "+(e.teamOrStory.className||"")+" "+(e.taskStatus.className||""),"data-status":e.taskStatus.value,"data-team-or-story":e.teamOrStory.value,onDragOver:function(e){e.preventDefault()},onDrop:function(a){try{var t=a.dataTransfer.getData("elId"),r=document.getElementById(t);e.updateStickyLanes({kanbanId:r.dataset.recordId,taskStatusValue:e.taskStatus.value,teamOrStoryValue:e.teamOrStory.value})}catch(n){alert(n.message)}a.preventDefault()}},a.map((function(a){return c.a.createElement(Bt,{key:a._id||Aa(),teamOrStory:e.teamOrStory,taskStatus:e.taskStatus,teamOrStories:e.teamOrStories,taskStatuses:e.taskStatuses,board:e.board,record:a})})),St&&0===a.length?c.a.createElement("div",{style:{width:"100%",height:"100%"}},"\xa0"):c.a.createElement(c.a.Fragment,null))})),At=Object(d.c)(pa,ua)((function(e){var a=Et(),t=Object(Ba.a)(),r=c.a.useState({open:!1,title:"",message:"",fieldLabel:"",value:"",validator:function(e){return e.trim().length<=0},onClose:function(a,t){if(i(Object.assign({},o,{open:!1})),a&&t){var r=Ne().getState();e.updateBoardName({boardId:r.kanbanBoard.activeBoardId,boardName:t})}}}),n=Object(_e.a)(r,2),o=n[0],i=n[1];if(e.match.params.id&&e.activeBoard._id!==e.match.params.id){var s=e.boards.findIndex((function(a){return a._id===e.match.params.id}));return e.changeActiveBoard(e.match.params.id),c.a.createElement("div",{className:"KanbanBoardView-content"},s<0?c.a.createElement(c.a.Fragment,null,c.a.createElement(ja.a,{style:{marginTop:t.spacing(10)},variant:"h4",align:"center"},"No boards found."),c.a.createElement(ja.a,{style:{marginTop:t.spacing(5),cursor:"pointer",textDecoration:"underline"},variant:"body1",align:"center",onClick:function(a){e.history.push("/")}},"Click here to show main board.")):c.a.createElement(c.a.Fragment,null))}return c.a.createElement("div",{className:"KanbanBoardView-content"},c.a.createElement("style",{dangerouslySetInnerHTML:{__html:e.activeBoard.boardStyle}}),c.a.createElement(ja.a,{variant:"h6",align:"center",style:{cursor:"pointer"},onClick:function(){var e=Ne().getState();i(Object.assign({},o,{open:!0,title:"Edit board name",message:"",fieldLabel:"Board name",value:e.kanbanBoard.activeBoard.name}))}},e.activeBoard.name),c.a.createElement("table",{className:"KanbanBoardView-board"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"KanbanBoardView-header-cell-add-sticky"},c.a.createElement(Le.a,{style:{margin:0,padding:0},onClick:function(a){return e.addSticky()}},c.a.createElement(Pe.a,{className:Object(j.a)(a.smallIcon)}))),e.activeBoard.taskStatuses.map((function(e){return c.a.createElement("th",{key:e.value,className:"KanbanBoardView-header-cell-task-statuses "+(e.className||"")},e.caption||e.value)})))),c.a.createElement("tbody",null,e.activeBoard.teamOrStories.map((function(a){return c.a.createElement("tr",{key:a.value},c.a.createElement("th",{className:"KanbanBoardView-header-cell-team-or-stories "+(a.className||"")},a.caption||a.value),e.activeBoard.taskStatuses.map((function(t){return c.a.createElement("td",{key:t.value,className:(a.className||"")+" "+(t.className||"")},c.a.createElement(Ot,{teamOrStory:a,taskStatus:t,teamOrStories:e.activeBoard.teamOrStories,taskStatuses:e.activeBoard.taskStatuses,board:e.activeBoard,records:e.activeBoard.records.filter((function(e){return e.teamOrStory===a.value&&e.taskStatus===t.value}))}))})))})))),e.activeBoard.boardNote?c.a.createElement("div",{className:"KanbanBoardView-board-note-wrap"},c.a.createElement("div",{className:"KanbanBoardView-board-note",dangerouslySetInnerHTML:{__html:kt.sanitize(Ta()(e.activeBoard.boardNote))}})):c.a.createElement(c.a.Fragment,null),o.open?c.a.createElement(xa,{open:!0,title:o.title,message:o.message,fieldLabel:o.fieldLabel,value:o.value,validator:o.validator,onClose:o.onClose}):c.a.createElement(c.a.Fragment,null))})),xt=t(152),Ct=t.n(xt),Dt=t(153),jt=t.n(Dt);function Nt(e){return{showToday:function(){return e(ye.showToday())},showNextMonth:function(){return e(ye.showNextMonth())},showPreviousMonth:function(){return e(ye.showPreviousMonth())},showNextYear:function(){return e(ye.showNextYear())},showPreviousYear:function(){return e(ye.showPreviousYear())},showAlertDialog:function(a){return e(W.showAlertDialog(a))},closeAlertDialog:function(){return e(W.closeAlertDialog())},changeActiveBoard:function(a){return e(te.startChangeActiveBoard(Object.assign({},{boardId:a},{dispatch:e})))},updateBoardName:function(a){return e(te.startUpdateBoardName(a))},updateSticky:function(a){return e(te.startUpdateSticky(Object.assign({},a,{dispatch:e})))},archiveSticky:function(a){return e(te.startArchiveSticky({kanbanId:a}))},unarchiveSticky:function(a){return e(te.startUnarchiveSticky({kanbanId:a}))},deleteSticky:function(a){return e(te.startDeleteSticky(Object.assign({},{kanbanId:a},{dispatch:e})))}}}function Tt(e){return Object.assign({},{kanbanBoardState:e.kanbanBoard},e.calendar)}t(194);var It=Object(C.a)((function(e){return{root:{flexGrow:1,color:"var(--main-text-color)",backgroundColor:"var(--main-bg-color)"},calendar:{width:"calc(100% - 30px)",height:"100%",margin:"15px",border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",tableLayout:"fixed"},calendarTitle:{position:"relative",height:"30px"},calendarTitleToolBar:{position:"absolute",top:0,left:0,margin:"3px 3px 6px 4px",overflow:"hidden",width:"calc(100% - 30px)",height:"39px"},calendarTopLeftHeader:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px"},calendarDaysHeader:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",width:"14%"},calendarSundayHeader:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",width:"14%",backgroundColor:"var(--weak-header-bg-color)",color:"var(--calendar-sunday-color)"},calendarSaturdayHeader:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",width:"14%",backgroundColor:"var(--weak-header-bg-color)",color:"var(--calendar-saturday-color)"},calendarCell:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",verticalAlign:"top"},calendarWeekendCell:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",verticalAlign:"top",backgroundColor:"var(--weak-data-bg-color)"},calendarCellCaptionToday:{color:"var(--calendar-today-color)",backgroundColor:"var(--calendar-today-bg-color)",borderRadius:"10px",border:"solid 1.5px var(--calendar-today-bg-color)"},chip:{fontSize:"smaller",borderRadius:"5px",backgroundColor:"var(--sticky-blue-color)",color:"var(--main-text-color)",width:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",marginBottom:"2px",paddingLeft:"3px",paddingRight:"3px"},chipWrap:{"&:hover":{cursor:"pointer"}}}})),_t=Object(d.c)(Tt,Nt)((function(e){var a=It(),t=c.a.useState(!1),r=Object(_e.a)(t,2),n=r[0],o=r[1],i=e.board.teamOrStories.find((function(a){return a.value===e.record.teamOrStory})),s=e.board.taskStatuses.find((function(a){return a.value===e.record.taskStatus})),l=new Date,d=new Date(l.getFullYear(),l.getMonth(),l.getDate()),u=e.record.dueDate?pe(e.record.dueDate):null,p=!(s&&s.completed)&&!!u&&u<d,m=e.record.flags&&e.record.flags.includes("Archived");return c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{className:Object(j.a)(a.chipWrap),onClick:function(e){return o(!0)}},c.a.createElement("div",{className:Object(j.a)(a.chip)+" CalendarView-item-chip"+(i?" "+i.className:"")+(s?" "+s.className:"")+(p?" expired":"")+(m?" archived":"")},e.record.description.trim().replace(/\n/g," ").replace(/#+/g,"").trim())),n?c.a.createElement(yt,{open:!0,record:e.record,teamOrStories:e.kanbanBoardState.activeBoard.teamOrStories,taskStatuses:e.kanbanBoardState.activeBoard.taskStatuses,board:e.board,onApply:function(a){e.updateSticky(a),o(!1)},onArchive:function(a){e.archiveSticky(a),o(!1)},onUnarchive:function(a){e.unarchiveSticky(a),o(!1)},onDelete:function(a){e.deleteSticky(a),o(!1)},onCancel:function(){o(!1)}}):c.a.createElement(c.a.Fragment,null))})),Ft=Object(d.c)(Tt,Nt)((function(e){var a=It(),t=Object(Ba.a)(),r=c.a.useState({open:!1,title:"",message:"",fieldLabel:"",value:"",validator:function(e){return e.trim().length<=0},onClose:function(a,t){if(i(Object.assign({},o,{open:!1})),a&&t){var r=Ne().getState();e.updateBoardName({boardId:r.kanbanBoard.activeBoardId,boardName:t})}}}),n=Object(_e.a)(r,2),o=n[0],i=n[1];if(e.match.params.id&&e.kanbanBoardState.activeBoard._id!==e.match.params.id){var s=e.kanbanBoardState.boards.findIndex((function(a){return a._id===e.match.params.id}));return e.changeActiveBoard(e.match.params.id),c.a.createElement("div",{className:a.root},s<0?c.a.createElement(c.a.Fragment,null,c.a.createElement(ja.a,{style:{marginTop:t.spacing(10)},variant:"h4",align:"center"},"No boards found."),c.a.createElement(ja.a,{style:{marginTop:t.spacing(5),cursor:"pointer",textDecoration:"underline"},variant:"body1",align:"center",onClick:function(a){e.history.push("/")}},"Click here to show main board.")):c.a.createElement(c.a.Fragment,null))}var l=new Date,d=new Date(l.getFullYear(),l.getMonth(),l.getDate()),u=e.activeMonth,p=new Date(u.getFullYear(),u.getMonth(),1),m=new Date(u.getFullYear(),u.getMonth()+1,0),g=new Date(p.getFullYear(),p.getMonth(),1-p.getDay()),f=new Date(m.getFullYear(),m.getMonth(),m.getDate()+(6-m.getDay())),b=new Date(f.getFullYear(),f.getMonth(),f.getDate()+1),h=[],v=[];h.push(v);for(var y=g;y.getTime()<=f.getTime();y=new Date(y.getFullYear(),y.getMonth(),y.getDate()+1))7<=v.length&&(v=[],h.push(v)),v.push(y);var k=e.kanbanBoardState.activeBoard.records.filter((function(e){if(!e.dueDate)return!1;var a=new Date(e.dueDate);return g<=a&&a<b}));return c.a.createElement("div",{className:Object(j.a)(a.root)},c.a.createElement("style",{dangerouslySetInnerHTML:{__html:e.kanbanBoardState.activeBoard.calendarStyle}}),c.a.createElement("div",{className:Object(j.a)(a.calendarTitle)},c.a.createElement("div",{className:Object(j.a)(a.calendarTitleToolBar)},c.a.createElement(Le.a,{onClick:function(a){return e.showToday()}},c.a.createElement(Ge.a,null),c.a.createElement(ja.a,{variant:"caption",style:{marginLeft:"1em"}},"Today")),c.a.createElement(Le.a,{onClick:function(a){return e.showPreviousYear()}},c.a.createElement(Ct.a,null)),c.a.createElement(Le.a,{onClick:function(a){return e.showPreviousMonth()}},c.a.createElement(Ve.a,null)),c.a.createElement(Le.a,{onClick:function(a){return e.showNextMonth()}},c.a.createElement(Ke.a,null)),c.a.createElement(Le.a,{onClick:function(a){return e.showNextYear()}},c.a.createElement(jt.a,null)),c.a.createElement(ja.a,{variant:"h6",display:"inline",style:{marginLeft:"2em"}},e.activeMonth.toLocaleDateString(navigator.userLanguage||navigator.language||navigator.browserLanguage||"en",{year:"numeric",month:"long"})),c.a.createElement(ja.a,{variant:"h6",display:"inline",style:{marginLeft:"3em",cursor:"pointer"},onClick:function(){var e=Ne().getState();i(Object.assign({},o,{open:!0,title:"Edit board name",message:"",fieldLabel:"Board name",value:e.kanbanBoard.activeBoard.name}))}},e.kanbanBoardState.activeBoard.name))),c.a.createElement("table",{className:Object(j.a)(a.calendar)},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:Object(j.a)(a.calendarTopLeftHeader)}),c.a.createElement("th",{className:Object(j.a)(a.calendarSundayHeader)},"Sun"),c.a.createElement("th",{className:Object(j.a)(a.calendarDaysHeader)},"Mon"),c.a.createElement("th",{className:Object(j.a)(a.calendarDaysHeader)},"Tue"),c.a.createElement("th",{className:Object(j.a)(a.calendarDaysHeader)},"Wed"),c.a.createElement("th",{className:Object(j.a)(a.calendarDaysHeader)},"Thu"),c.a.createElement("th",{className:Object(j.a)(a.calendarDaysHeader)},"Fri"),c.a.createElement("th",{className:Object(j.a)(a.calendarSaturdayHeader)},"Sat"))),c.a.createElement("tbody",null,h.map((function(t){return c.a.createElement("tr",{key:t[0].getTime()},c.a.createElement("td",{className:Object(j.a)(a.calendarCell)}),t.map((function(t,r){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1);return c.a.createElement("td",{key:t.toISOString(),className:Object(j.a)(0===r||6===r?a.calendarWeekendCell:a.calendarCell)},c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("div",{className:t<=d&&d<n?Object(j.a)(a.calendarCellCaptionToday):"",style:{position:"absolute",top:"0",right:"0"}},t.getDate()),c.a.createElement("div",{style:{paddingTop:"20px",minHeight:"80px"}},k.filter((function(e){var a=new Date(e.dueDate);return t<=a&&a<n})).map((function(a){return c.a.createElement(_t,{board:e.kanbanBoardState.activeBoard,key:a._id,record:a})})))))})))})))),o.open?c.a.createElement(xa,{open:!0,title:o.title,message:o.message,fieldLabel:o.fieldLabel,value:o.value,validator:o.validator,onClose:o.onClose}):c.a.createElement(c.a.Fragment,null))})),Ut=t(102),Lt=(t(135),t(136),t(137),t(78)),Mt=t.n(Lt);function Vt(e){return{name:e.name||"",taskStatuses:e.taskStatuses||[],teamOrStories:e.teamOrStories||[],tags:e.tags||[],displayBarcode:!!e.displayBarcode,displayMemo:!!e.displayMemo,displayFlags:!!e.displayFlags,displayTags:!!e.displayTags,preferArchive:!!e.preferArchive,boardStyle:e.boardStyle||"",calendarStyle:e.calendarStyle||"",boardNote:e.boardNote||"",records:e.records&&e.records.map((function(e){return a=e,Object.assign(a._id?{_id:a._id}:{},{dueDate:a.dueDate||"",taskStatus:a.taskStatus||"",teamOrStory:a.teamOrStory||"",flags:a.flags||[],tags:a.tags||[],description:a.description||"",barcode:a.barcode||"",memo:a.memo||""});var a}))||[]}}function Rt(e){if(e.match(/<\/style\s*>/i)||e.match(/<script\b/i))throw new Error("bad style text is set.")}function Kt(e){if("string"!==typeof e.name)throw new Error('string property "name" is required.');if(!e.taskStatuses||!Array.isArray(e.taskStatuses))throw new Error('array property "taskStatuses" is required.');if(e.taskStatuses.forEach((function(e){if(null!==e.caption&&void 0!==e.caption&&"string"!==typeof e.caption)throw new Error('property "taskStatuses[x].caption" should be string.');if(null!==e.className&&void 0!==e.className&&"string"!==typeof e.className)throw new Error('property "taskStatuses[x].className" should be string.');if(null!==e.completed&&void 0!==e.completed&&"boolean"!==typeof e.completed)throw new Error('property "taskStatuses[x].completed" should be boolean.');if("string"!==typeof e.value)throw new Error('string property "taskStatuses[x].value" is required.')})),!e.teamOrStories||!Array.isArray(e.teamOrStories))throw new Error('array property "teamOrStories" is required.');if(e.teamOrStories.forEach((function(e){if(null!==e.caption&&void 0!==e.caption&&"string"!==typeof e.caption)throw new Error('property "teamOrStories[x].caption" should be string.');if(null!==e.className&&void 0!==e.className&&"string"!==typeof e.className)throw new Error('property "teamOrStories[x].className" should be string.');if("string"!==typeof e.value)throw new Error('string property "teamOrStories[x].value" is required.')})),!e.tags||!Array.isArray(e.tags))throw new Error('array property "tags" is required.');if(e.tags.forEach((function(e){if(null!==e.className&&void 0!==e.className&&"string"!==typeof e.className)throw new Error('property "tags[x].className" should be string.');if("string"!==typeof e.value)throw new Error('string property "tags[x].value" is required.')})),"boolean"!==typeof e.displayBarcode)throw new Error('boolean property "displayBarcode" is required.');if("boolean"!==typeof e.displayMemo)throw new Error('boolean property "displayMemo" is required.');if("boolean"!==typeof e.displayFlags)throw new Error('boolean property "displayFlags" is required.');if("boolean"!==typeof e.displayTags)throw new Error('boolean property "displayTags" is required.');if("boolean"!==typeof e.preferArchive)throw new Error('boolean property "preferArchive" is required.');if("string"!==typeof e.boardStyle)throw new Error('string property "boardStyle" is required.');if(Rt(e.boardStyle),"string"!==typeof e.calendarStyle)throw new Error('string property "calendarStyle" is required.');if(Rt(e.calendarStyle),"string"!==typeof e.boardNote)throw new Error('string property "boardNote" is required.');if(!e.records||!Array.isArray(e.records))throw new Error('array property "records" is required.');return e.records.forEach((function(e){return function(e){if("string"!==typeof e.dueDate)throw new Error('string property "dueDate" is required.');if("string"!==typeof e.taskStatus)throw new Error('string property "taskStatus" is required.');if("string"!==typeof e.teamOrStory)throw new Error('string property "teamOrStory" is required.');if(!e.flags||!Array.isArray(e.flags))throw new Error('array property "flags" is required.');if(e.flags.forEach((function(e){if("string"!==typeof e)throw new Error('property "flags[x]" should be string.')})),!e.tags||!Array.isArray(e.tags))throw new Error('array property "tags" is required.');if(e.tags.forEach((function(e){if("string"!==typeof e)throw new Error('property "tags[x]" should be string.')})),"string"!==typeof e.description)throw new Error('string property "description" is required.');if("string"!==typeof e.barcode)throw new Error('string property "barcode" is required.');if("string"!==typeof e.memo)throw new Error('string property "memo" is required.');return e}(e)})),e}t(220);var Wt=Object(C.a)((function(e){return{root:{flexGrow:1,color:"var(--main-text-color)",backgroundColor:"var(--main-bg-color)",width:"100%",height:"100%"},header:{height:"45px",position:"relative"},codemirror:{display:"grid",width:"calc(100% - 20px)",height:"calc(100vh - 65px)"},fabSave:{position:"absolute",margin:e.spacing(1),left:e.spacing(1),top:e.spacing(1)/10},fabDelete:{position:"absolute",margin:e.spacing(1),right:e.spacing(1),top:e.spacing(1)/10}}})),Pt=Object(d.c)(pa,ua)((function(e){var a=Wt(),t=Object(Ba.a)(),r=c.a.useState(!1),n=Object(_e.a)(r,2),o=n[0],i=n[1],s=c.a.useState(""),l=Object(_e.a)(s,2),d=l[0],u=l[1],p=c.a.useState(0),m=Object(_e.a)(p,2),g=m[0],f=m[1];if(e.match.params.id&&e.activeBoard._id!==e.match.params.id){var b=e.boards.findIndex((function(a){return a._id===e.match.params.id}));return e.changeActiveBoard(e.match.params.id),setTimeout((function(){f(0)}),30),c.a.createElement("div",{className:a.root},b<0?c.a.createElement(c.a.Fragment,null,c.a.createElement(ja.a,{style:{marginTop:t.spacing(10)},variant:"h4",align:"center"},"No boards found."),c.a.createElement(ja.a,{style:{marginTop:t.spacing(5),cursor:"pointer",textDecoration:"underline"},variant:"body1",align:"center",onClick:function(a){e.history.push("/")}},"Click here to show main board.")):c.a.createElement(c.a.Fragment,null))}return c.a.createElement("div",{className:Object(j.a)(a.root)},c.a.createElement("div",{className:Object(j.a)(a.header)},c.a.createElement(ja.a,{variant:"h6",align:"center",style:{marginTop:"0px"}},e.activeBoard.name),c.a.createElement(ma.a,{className:Object(j.a)(a.fabSave),variant:"contained",color:"primary",disabled:0===g,onClick:function(){try{var a=Mt.a.safeLoad(d);a&&(Kt(a),e.editBoardAndStickys(Object.assign({},a,{_id:e.activeBoard._id})))}catch(t){e.showAlertDialog({open:!0,title:"Error",message:t.message||String(t),singleButton:!0,colorIsSecondary:!0,onClose:function(){return e.closeAlertDialog()}})}}},c.a.createElement(Ea.a,null),c.a.createElement(ja.a,{variant:"body1",style:{marginLeft:t.spacing(1)}},"Save")),e.boards.length>1?c.a.createElement(ma.a,{className:Object(j.a)(a.fabDelete),variant:"outlined",color:"secondary",onClick:function(e){return i(!0)}},c.a.createElement($a.a,{color:"secondary"}),c.a.createElement(ja.a,{variant:"body1",color:"secondary",style:{marginLeft:t.spacing(1)}},"Delete")):c.a.createElement(c.a.Fragment,null)),c.a.createElement("div",null,c.a.createElement(Ut.UnControlled,{className:Object(j.a)(a.codemirror),value:"# Board settings\n\n".concat(Mt.a.safeDump(Vt(e.activeBoard),{lineWidth:1e3})),options:{mode:"yaml",theme:"material",lineNumbers:!0,lineWrapping:!0},onChange:function(e,a,t){u(t),f(g+1)}})),o?c.a.createElement(Xa,{open:o,title:"Delete board",message:"Are you sure want to delete the board?",colorIsSecondary:!0,applyButtonCaption:"Delete",confirmingTextLabel:'Type "Delete board" to delete this board.',confirmingTextValue:"Delete board",fab:c.a.createElement(Pa.a,{size:"large",variant:"round","aria-label":"delete",color:"secondary",style:{margin:"auto"}},c.a.createElement($a.a,null)),onClose:function(a){i(!1),a&&e.deleteBoard(e.activeBoard._id)}}):c.a.createElement(c.a.Fragment,null))})),Yt=(t(221),Object(C.a)((function(e){return{root:{flexGrow:1,color:"var(--main-text-color)",backgroundColor:"var(--main-bg-color)",width:"100%",height:"100%"},header:{height:"45px",position:"relative"},codemirror:{display:"grid",width:"calc(100% - 20px)",height:"calc(100vh - 65px)"},fabSave:{position:"absolute",margin:e.spacing(1),left:e.spacing(1),top:e.spacing(1)/10},fabDelete:{position:"absolute",margin:e.spacing(1),right:e.spacing(1),top:e.spacing(1)/10}}}))),qt=Object(d.c)(ne,re)((function(e){var a,t=Yt(),r=Object(Ba.a)(),n=c.a.useState(!1),o=Object(_e.a)(n,2),i=o[0],s=o[1],l=c.a.useState(""),d=Object(_e.a)(l,2),u=d[0],p=d[1],m=c.a.useState(0),g=Object(_e.a)(m,2),f=g[0],b=g[1];return c.a.createElement("div",{className:Object(j.a)(t.root)},c.a.createElement("div",{className:Object(j.a)(t.header)},c.a.createElement(ja.a,{variant:"h6",align:"center",style:{marginTop:"0px"}},"Application Settings"),c.a.createElement(ma.a,{className:Object(j.a)(t.fabSave),variant:"contained",color:"primary",disabled:0===f,onClick:function(){try{var a=Mt.a.safeLoad(u);if(!a)throw new Error('object property "remote" is required.');!function(e){if(!e.remote)throw new Error('object property "remote" is required.');if("string"!==typeof e.remote.endpointUrl)throw new Error('string property "remote.endpointUrl" is required.');if("string"!==typeof e.remote.user)throw new Error('string property "remote.user" is required.');if("string"!==typeof e.remote.password)throw new Error('string property "remote.password" is required.');if(!e.display)throw new Error('object property "display" is required.');if("boolean"!==typeof e.display.autoUpdate)throw new Error('boolean property "display.autoUpdate" is required.');if("number"!==typeof e.display.autoUpdateInterval)throw new Error('number property "display.autoUpdateInterval" is required.');if(e.display.autoUpdateInterval<10)throw new Error('number property "display.autoUpdateInterval" should 10 <= autoUpdateInterval (unit: sec).');if("boolean"!==typeof e.display.goAround)throw new Error('boolean property "display.goAround" is required.')}(a),e.updateAppConfig(Object.assign({},a))}catch(t){e.showAlertDialog({open:!0,title:"Error",message:t.message||String(t),singleButton:!0,colorIsSecondary:!0,onClose:function(){return e.closeAlertDialog()}})}}},c.a.createElement(Ea.a,null),c.a.createElement(ja.a,{variant:"body1",style:{marginLeft:r.spacing(1)}},"Save")),c.a.createElement(ma.a,{className:Object(j.a)(t.fabDelete),variant:"outlined",color:"secondary",onClick:function(e){return s(!0)}},c.a.createElement($a.a,{color:"secondary"}),c.a.createElement(ja.a,{variant:"body1",color:"secondary",style:{marginLeft:r.spacing(1)}},"Reset application"))),c.a.createElement("div",null,c.a.createElement(Ut.UnControlled,{className:Object(j.a)(t.codemirror),value:"# App settings\n\n".concat(Mt.a.safeDump((a=e.appConfig,{remote:{endpointUrl:a.remote&&a.remote.endpointUrl?a.remote.endpointUrl:"",user:a.remote&&a.remote.user?a.remote.user:"",password:a.remote&&a.remote.password?a.remote.password:""},display:{autoUpdate:!(!a.display||!a.display.autoUpdate),autoUpdateInterval:a.display&&a.display.autoUpdateInterval?a.display.autoUpdateInterval:2419200,goAround:!(!a.display||!a.display.goAround)}}),{lineWidth:1e3})),options:{mode:"yaml",theme:"material",lineNumbers:!0,lineWrapping:!0},onChange:function(e,a,t){p(t),b(f+1)}})),i?c.a.createElement(Xa,{open:i,title:"Reset application",message:"Are you sure want to reset application?\nAll local data and configurations will be REMOVED!",colorIsSecondary:!0,applyButtonCaption:"Reset",confirmingTextLabel:'Type "Reset application" to remove all data.',confirmingTextValue:"Reset application",fab:c.a.createElement(Pa.a,{size:"large",variant:"round","aria-label":"reset application",color:"secondary",style:{margin:"auto"}},c.a.createElement($a.a,null)),onClose:function(a){s(!1),a&&e.resetApplication()}}):c.a.createElement(c.a.Fragment,null))})),Ht=Object(C.a)((function(e){return{app:{display:"flex"}}}));var Gt=Object(d.c)(ne,re)((function(e){var a=Ht();return function(e,a){var t=Object(i.useRef)();Object(i.useEffect)((function(){t.current=e}),[e]),Object(i.useEffect)((function(){if(null!==a){var e=setInterval((function(){t.current()}),a);return function(){return clearInterval(e)}}}),[a])}((function(){e.appConfig&&(console.log("periodic timer:"+new Date),E().then((function(){var a=!1,t="",r=Ne();if(r&&e.appConfig.display){var n=r.getState();if(e.appConfig.display.goAround&&n.kanbanBoard.boards.length>1){var o=(Math.max(0,n.kanbanBoard.boards.findIndex((function(e){return e._id===n.kanbanBoard.activeBoardId})))+1)%n.kanbanBoard.boards.length;a=!0,t=n.kanbanBoard.boards[o]._id}}var i=U(De);"config"!==i&&"edit"!==i&&(a?De.push("/".concat(i,"/").concat(t)):e.refreshActiveBoard())})).catch((function(e){console.log(e.message)})))}),e.appConfig&&e.appConfig.display&&e.appConfig.display.autoUpdate?1e3*(e.appConfig.display.autoUpdateInterval||2419200):null),Object(i.useEffect)((function(){setTimeout((function(){e.refreshActiveBoard()}),3e3)}),[]),c.a.createElement("div",{className:Object(j.a)(a.app)},c.a.createElement(x.a,null),c.a.createElement(D.a,{theme:F},c.a.createElement(Da,null),c.a.createElement(A.c,null,c.a.createElement(A.a,{path:"/",exact:!0,component:At}),c.a.createElement(A.a,{path:"/kanban/:id?",component:At}),c.a.createElement(A.a,{path:"/calendar/:id?",component:Ft}),c.a.createElement(A.a,{path:"/edit/:id?",component:Pt}),c.a.createElement(A.a,{path:"/config/",component:qt})),e.alertDialog.open?c.a.createElement(Xa,e.alertDialog):c.a.createElement(c.a.Fragment,null)))})),zt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $t(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(),e.t0=l.a,e.t1=c.a,e.t2=d.a,e.next=6,Te();case 6:e.t3=e.sent,e.t4={store:e.t3},e.t5=c.a.createElement(u.a,{history:De},c.a.createElement(Gt,null)),e.t6=e.t1.createElement.call(e.t1,e.t2,e.t4,e.t5),e.t7=document.getElementById("root"),e.t0.render.call(e.t0,e.t6,e.t7);case 12:case"end":return e.stop()}}),e)})))(),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat(".","/service-worker.js");zt?(!function(e,a){fetch(e).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):$t(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):$t(a,e)}))}}()}},[[175,1,2]]]);
//# sourceMappingURL=main.efe9d68f.chunk.js.map