!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.tynder=n():e.tynder=n()}(this,(function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=17)}([,,function(e,n,t){"use strict";var r;!function(e){e[e.InvalidDefinition=1]="InvalidDefinition",e[e.Required=2]="Required",e[e.TypeUnmatched=3]="TypeUnmatched",e[e.AdditionalPropUnmatched=4]="AdditionalPropUnmatched",e[e.RepeatQtyUnmatched=5]="RepeatQtyUnmatched",e[e.SequenceUnmatched=6]="SequenceUnmatched",e[e.ValueRangeUnmatched=7]="ValueRangeUnmatched",e[e.ValuePatternUnmatched=8]="ValuePatternUnmatched",e[e.ValueLengthUnmatched=9]="ValueLengthUnmatched",e[e.ValueUnmatched=10]="ValueUnmatched"}(r||(r={})),t.d(n,"a",(function(){return r}))},,function(e,n,t){"use strict";t.d(n,"i",(function(){return a})),t.d(n,"e",(function(){return i})),t.d(n,"h",(function(){return o})),t.d(n,"c",(function(){return s})),t.d(n,"f",(function(){return c})),t.d(n,"p",(function(){return u})),t.d(n,"j",(function(){return l})),t.d(n,"l",(function(){return p})),t.d(n,"k",(function(){return d})),t.d(n,"g",(function(){return m})),t.d(n,"m",(function(){return f})),t.d(n,"n",(function(){return h})),t.d(n,"o",(function(){return g})),t.d(n,"b",(function(){return b})),t.d(n,"d",(function(){return y})),t.d(n,"a",(function(){return j})),t.d(n,"q",(function(){return v})),t.d(n,"B",(function(){return O})),t.d(n,"E",(function(){return w})),t.d(n,"C",(function(){return x})),t.d(n,"r",(function(){return U})),t.d(n,"D",(function(){return T})),t.d(n,"y",(function(){return V})),t.d(n,"w",(function(){return N})),t.d(n,"s",(function(){return P})),t.d(n,"t",(function(){return $})),t.d(n,"x",(function(){return E})),t.d(n,"v",(function(){return S})),t.d(n,"u",(function(){return A})),t.d(n,"z",(function(){return L})),t.d(n,"A",(function(){return D}));var r=t(6);function a(e,...n){switch(e.kind){case"object":{const t=[];for(const r of n){const n=e.members.find(e=>e[0]===r);if(n)if(n[2]){const e=[...n];3<e.length?e[2]=!1:e.length=2,t.push(e)}else t.push(n)}return{kind:"object",members:t}}case"symlink":case"operator":return{kind:"operator",operator:"picked",operands:[e,...n]};default:return{kind:"object",members:[]}}}function i(e,...n){switch(e.kind){case"object":{const t=[];for(const r of e.members)if(!n.find(e=>r[0]===e))if(r[2]){const e=[...r];3<e.length?e[2]=!1:e.length=2,t.push(e)}else t.push(r);return{kind:"object",members:t}}case"symlink":case"operator":return{kind:"operator",operator:"omit",operands:[e,...n]};default:return{kind:"object",members:[]}}}function o(e){switch(e.kind){case"object":{const n=[];for(const t of e.members){let e="optional"===t[1].kind?t:[t[0],m(t[1]),...t.slice(2)];e[2]&&(e=[...e],3<e.length?e[2]=!1:e.length=2),e[1].name=e[0];const r=Object.assign({},e[1].optional);e[1].optional=r,r.name&&r.name!==r.typeName&&delete r.name,!r.name&&r.typeName&&(r.name=r.typeName),n.push(e)}return{kind:"object",members:n}}case"symlink":case"operator":return{kind:"operator",operator:"partial",operands:[e]};default:return e}}function s(...e){if(0===e.length)throw new Error("Empty intersection type is not allowed.");if(0<e.filter(e=>e&&"object"==typeof e&&("symlink"===e.kind||"operator"===e.kind)).length)return{kind:"operator",operator:"intersect",operands:e.slice()};let n=null;const t=new Map;for(const r of e){if(!r||"object"!=typeof r)return{kind:"never"};if(n&&n.kind!==r.kind)return{kind:"never"};if(n=r,"object"===r.kind)for(const e of r.members)if(e[2]){const n=[...e];3<n.length?n[2]=!1:n.length=2,t.set(e[0],n)}else t.set(e[0],e)}return n&&"object"!==n.kind?n:{kind:"object",members:Array.from(t.values())}}function c(...e){if(0===e.length)throw new Error("Empty union type is not allowed.");if(1===e.length){const n=e[0];return n&&"object"==typeof n?n:d(n)}const n={kind:"one-of",oneOf:[]};for(const t of e)t&&"object"==typeof t?"one-of"===t.kind?n.oneOf=n.oneOf.concat(t.oneOf):n.oneOf.push(t):n.oneOf.push(d(t));return n}function u(...e){if(0===e.length)throw new Error("Empty subtraction type is not allowed.");if(0<e.filter(e=>e&&"object"==typeof e&&("symlink"===e.kind||"operator"===e.kind)).length)return{kind:"operator",operator:"subtract",operands:e.slice()};let n=e[0];if(!n||"object"!=typeof n||"object"!==n.kind)throw new Error("First parameter of subtraction type should be 'object'.");for(const t of e.slice(1))t&&"object"==typeof t&&"object"===t.kind&&(n=i(n,...t.members.map(e=>e[0])));return n}function l(e){switch(e){case"never":return{kind:"never"};case"any":return{kind:"any"};case"unknown":return{kind:"unknown"};case"number":case"integer":case"bigint":case"string":case"boolean":case"null":case"undefined":return{kind:"primitive",primitiveName:e};case"never?":return m({kind:"never"});case"any?":return m({kind:"any"});case"unknown?":return m({kind:"unknown"});case"number?":case"integer?":case"bigint?":case"string?":case"boolean?":case"null?":case"undefined?":return m({kind:"primitive",primitiveName:e.substring(0,e.length-1)});default:throw new Error(`Unknown primitive type assertion: ${e}`)}}function p(e){return{kind:"primitive",primitiveName:"string",pattern:e}}function d(e){if(null==e)return{kind:"primitive-value",value:e};switch(typeof e){case"number":case"bigint":case"string":case"boolean":return{kind:"primitive-value",value:e};default:throw new Error(`Unknown primitive value assertion: ${e}`)}}function m(e){return e&&"object"==typeof e&&e.kind?"optional"===e.kind?e:Object.assign({kind:"optional",optional:e},e.typeName?{typeName:e.typeName}:{}):{kind:"optional",optional:d(e)}}function f(e,n){return e&&"object"==typeof e&&e.kind?{kind:"repeated",min:n&&"number"==typeof n.min?n.min:null,max:n&&"number"==typeof n.max?n.max:null,repeated:e}:{kind:"repeated",min:n&&"number"==typeof n.min?n.min:null,max:n&&"number"==typeof n.max?n.max:null,repeated:l(e)}}function h(...e){return{kind:"sequence",sequence:e.map(e=>e&&"object"==typeof e&&e.kind?e:d(e))}}function g(e,n){return e&&"object"==typeof e&&e.kind?{kind:"spread",min:n&&"number"==typeof n.min?n.min:null,max:n&&"number"==typeof n.max?n.max:null,spread:e}:{kind:"spread",min:n&&"number"==typeof n.min?n.min:null,max:n&&"number"==typeof n.max?n.max:null,spread:d(e)}}function b(...e){const n=e.slice();let t=0;for(let e=0;e<n.length;e++){if(Object(r.c)(r.b,n[e][0]))throw new Error(`Unsafe symbol name is appeared in enum assertion: ${n[e][0]}`);null===n[e][1]||void 0===n[e][1]?n[e][1]=t++:"number"==typeof n[e][1]&&(t=n[e][1]+1),n[e][2]||(n[e].length=2)}return{kind:"enum",values:n}}function y(...e){const n=e.slice().reverse();for(const t of e)if("string"==typeof t[0]){if(Object(r.c)(r.b,t[0]))throw new Error(`Unsafe symbol name is appeared in object assertion: ${t[0]}`);if(e.find(e=>e[0]===t[0])!==n.find(e=>e[0]===t[0]))throw new Error(`Duplicated member is found: ${t[0]}`)}const t=e.filter(e=>"string"==typeof e[0]).map(e=>e[1]&&"object"==typeof e[1]&&e[1].kind?[e[0],O(e[1],e[0]),e[2]]:[e[0],O(d(e[1]),e[0]),e[2]]).map(e=>e[2]?[e[0],e[1],!1,...e.slice(2)]:[e[0],e[1]]),a=e.filter(e=>"string"!=typeof e[0]).map(e=>e[1]&&"object"==typeof e[1]&&e[1].kind?e:[e[0],d(e[1]),e[2]]).map(e=>e[2]?[e[0],e[1],!1,...e.slice(2)]:[e[0],e[1]]);return Object.assign({kind:"object",members:t},0<a.length?{additionalProps:a}:{})}function k(e,n){if(e===n)return!1;if(e.typeName&&(e.typeName===n.typeName||"symlink"===n.kind&&e.typeName===n.symlinkTargetName))return!1;if("object"===n.kind&&n.baseTypes)for(const t of n.baseTypes)if(!k(e,t))return!1;return!0}function j(e,...n){const t={kind:"object",members:[],baseTypes:[]};for(const r of n)switch(r.kind){case"object":if(!k(e,r))throw new Error(`Recursive extend is found: ${e.name||"(unnamed)"}`);for(const e of r.members)t.members.find(n=>n[0]===e[0])||t.members.push([e[0],e[1],!0,...e.slice(3)]);case"symlink":t.baseTypes.push(r);break;case"operator":throw new Error(`Unresolved type operator is found: ${r.operator}`)}t.members=e.members.concat(t.members),e.baseTypes&&(t.baseTypes=e.baseTypes.filter(e=>"symlink"!==e.kind).concat(t.baseTypes)),0===t.baseTypes.length&&delete t.baseTypes;const r=t.members.slice().reverse();for(const n of t.members)if(t.members.find(e=>e[0]===n[0])!==r.find(e=>e[0]===n[0]))throw new Error(`Duplicated member is found: ${n[0]} in ${e.name||"(unnamed)"}`);let a=[];if(t.baseTypes)for(const e of t.baseTypes)"object"===e.kind&&e.additionalProps&&0<e.additionalProps.length&&(a=a.concat(e.additionalProps.map(e=>[e[0],e[1],!0,...e.slice(3)])));return e.additionalProps&&0<e.additionalProps.length&&(a=a.concat(e.additionalProps)),0<a.length&&(t.additionalProps=a),t}function v(e){return{kind:"symlink",symlinkTargetName:e}}function O(e,n){return n?Object.assign(Object.assign({},e),{name:n}):e}function w(e,n){return n?Object.assign(Object.assign({},e),{typeName:n}):e}function x(e,n){return n?Object.assign(Object.assign({},e),{originalTypeName:n}):e}function U(e,n){return n?Object.assign(Object.assign({},e),{docComment:n}):e}function T(e,n){return t=>{var r;if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@range' parameter 'minValue' should be number or string.");if("number"!=typeof n&&"string"!=typeof n)throw new Error("Decorator '@range' parameter 'maxValue' should be number or string.");if("optional"===(null===(r=t)||void 0===r?void 0:r.kind)){const r=t.optional;if("primitive"!==r.kind)throw new Error("Decorator '@range' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},r),{minValue:e,maxValue:n})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@range' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{minValue:e,maxValue:n})}}function V(e){return n=>{var t;if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@minValue' parameter 'minValue' should be number or string.");if("optional"===(null===(t=n)||void 0===t?void 0:t.kind)){const t=n.optional;if("primitive"!==t.kind)throw new Error("Decorator '@minValue' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{optional:Object.assign(Object.assign({},t),{minValue:e})})}if(!n||"primitive"!==n.kind)throw new Error("Decorator '@minValue' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{minValue:e})}}function N(e){return n=>{var t;if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@maxValue' parameter 'maxValue' should be number or string.");if("optional"===(null===(t=n)||void 0===t?void 0:t.kind)){const t=n.optional;if("primitive"!==t.kind)throw new Error("Decorator '@maxValue' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{optional:Object.assign(Object.assign({},t),{maxValue:e})})}if(!n||"primitive"!==n.kind)throw new Error("Decorator '@maxValue' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{maxValue:e})}}function P(e){return n=>{var t;if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@greaterThan' parameter 'greaterThan' should be number or string.");if("optional"===(null===(t=n)||void 0===t?void 0:t.kind)){const t=n.optional;if("primitive"!==t.kind)throw new Error("Decorator '@greaterThan' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{optional:Object.assign(Object.assign({},t),{greaterThanValue:e})})}if(!n||"primitive"!==n.kind)throw new Error("Decorator '@greaterThan' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{greaterThanValue:e})}}function $(e){return n=>{var t;if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@lessThan' parameter 'lessThan' should be number or string.");if("optional"===(null===(t=n)||void 0===t?void 0:t.kind)){const t=n.optional;if("primitive"!==t.kind)throw new Error("Decorator '@lessThan' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{optional:Object.assign(Object.assign({},t),{lessThanValue:e})})}if(!n||"primitive"!==n.kind)throw new Error("Decorator '@lessThan' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{lessThanValue:e})}}function E(e){return n=>{var t;if("number"!=typeof e)throw new Error("Decorator '@minLength' parameter 'minLength' should be number.");if("optional"===(null===(t=n)||void 0===t?void 0:t.kind)){const t=n.optional;if("primitive"!==t.kind)throw new Error("Decorator '@minLength' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{optional:Object.assign(Object.assign({},t),{minLength:e})})}if(!n||"primitive"!==n.kind)throw new Error("Decorator '@minLength' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{minLength:e})}}function S(e){return n=>{var t;if("number"!=typeof e)throw new Error("Decorator '@maxLength' parameter 'maxLength' should be number.");if("optional"===(null===(t=n)||void 0===t?void 0:t.kind)){const t=n.optional;if("primitive"!==t.kind)throw new Error("Decorator '@maxLength' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{optional:Object.assign(Object.assign({},t),{maxLength:e})})}if(!n||"primitive"!==n.kind)throw new Error("Decorator '@maxLength' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{maxLength:e})}}function A(e){return n=>{var t;if("object"!=typeof e)throw new Error("Decorator '@match' parameter 'pattern' should be RegExp.");if("optional"===(null===(t=n)||void 0===t?void 0:t.kind)){const t=n.optional;if("primitive"!==t.kind)throw new Error("Decorator '@match' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{optional:Object.assign(Object.assign({},t),{pattern:e})})}if(!n||"primitive"!==n.kind||"string"!==n.primitiveName)throw new Error("Decorator '@match' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{pattern:e})}}function L(e){return n=>{if("optional"===n.kind){if("string"==typeof e){const t=Object.assign(Object.assign({},n),{message:e,optional:Object.assign(Object.assign({},n.optional),{message:e})});return delete t.messages,delete t.optional.messages,t}{const t=Object.assign(Object.assign({},n),{messages:e,optional:Object.assign(Object.assign({},n.optional),{messages:e})});return delete t.message,delete t.optional.message,t}}if("string"==typeof e){const t=Object.assign(Object.assign({},n),{message:e});return delete t.messages,t}{const t=Object.assign(Object.assign({},n),{messages:e});return delete t.message,t}}}function D(e){return n=>"optional"===n.kind?Object.assign(Object.assign({},n),{messageId:e,optional:Object.assign(Object.assign({},n.optional),{messageId:e})}):Object.assign(Object.assign({},n),{messageId:e})}},,function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return s})),t.d(n,"c",(function(){return c}));const r=Function("return this")(),a={}.constructor,i=Function,o=/^([\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?)$/,s={};function c(e,n){if(e===r||"__proto__"===n||"__defineGetter__"===n||"__defineSetter__"===n||"__lookupGetter__"===n||"__lookupSetter__"===n)return!0;if(!("prototype"!==n&&"constructor"!==n||null!=e&&"function"!=typeof e))return!0;if((null==e||e===a)&&a.hasOwnProperty(n))return!0;if(null==e||e===i){let e=i;for(;e;){if(e.hasOwnProperty(n))return!0;e=e.__proto__}}return"function"==typeof e&&!e.hasOwnProperty(n)}},function(e,n,t){"use strict";function r(e){return e.replace(/\x08/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"').replace(/\`/g,"\\`")}t.d(n,"a",(function(){return r}))},function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));class r extends Error{constructor(e,n,t){super(e),this.ty=n,this.ctx=t}}},function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"c",(function(){return s})),t.d(n,"b",(function(){return u}));var r=t(4),a=t(6);function i(e,n,t,r){if(r&&n.has(r)){const a=n.get(r);a.ty===e&&n.set(r,Object.assign(Object.assign({},a),{ty:t,resolved:!0}))}return t}function o(e,n,t,r){const i=(e,a,i)=>a?Object.assign(Object.assign({},e),{typeName:0===r?`${n}.${t.join(".")}`:`${a}.${i}`}):e;for(let s=r;s<t.length;s++){const r=t[s];switch(e.kind){case"optional":return o(e.optional,n,t,s+1);case"object":for(const a of e.members)if(r===a[0])return i(o(a[1],n,t,s+1),e.typeName,r);if(e.additionalProps)for(const i of e.additionalProps)for(const e of i[0])switch(e){case"number":if(a.a.test(r))return o(i[1],n,t,s+1);break;case"string":return o(i[1],n,t,s+1);default:if(e.test(r))return o(i[1],n,t,s+1)}throw new Error(`Undefined member name is appeared: ${r}`);case"symlink":if(!e.typeName)throw new Error(`Reference of anonymous type is appeared: ${r}`);return Object.assign({kind:"symlink",symlinkTargetName:n,name:r,typeName:n},0<t.length?{memberTree:t}:{});default:throw new Error(`Unsupported type kind is appeared: (kind:${e.kind}).${r}`)}}return e}function s(e,n,t){var a;const c=Object.assign(Object.assign({},t),{nestLevel:t.nestLevel+1});switch(n.kind){case"symlink":{const r=e.get(n.symlinkTargetName);if(!r)throw new Error(`Undefined symbol '${n.symlinkTargetName}' is referred.`);if(0<=t.symlinkStack.findIndex(e=>e===n.symlinkTargetName))return n;const a=Object.assign({},n);let i=r.ty;return n.memberTree&&0<n.memberTree.length&&(i=Object.assign({},o(i,n.symlinkTargetName,n.memberTree,0)),a.typeName=i.typeName),s(e,function(e,n){const t=Object.assign({},n);return delete t.kind,delete t.symlinkTargetName,delete t.memberTree,Object.assign(Object.assign({},e),t)}(i,a),Object.assign(Object.assign({},c),{symlinkStack:[...c.symlinkStack,a.symlinkTargetName]}))}case"repeated":return i(n,e,Object.assign(Object.assign({},n),{repeated:s(e,n.repeated,c)}),n.typeName);case"spread":return i(n,e,Object.assign(Object.assign({},n),{spread:s(e,n.spread,c)}),n.typeName);case"sequence":return i(n,e,Object.assign(Object.assign({},n),{sequence:n.sequence.map(n=>s(e,n,c))}),n.typeName);case"one-of":return i(n,e,Object.assign(Object.assign({},n),{oneOf:n.oneOf.map(n=>s(e,n,c))}),n.typeName);case"optional":return i(n,e,Object.assign(Object.assign({},n),{optional:s(e,n.optional,c)}),n.typeName);case"object":{if(0<t.nestLevel&&n.typeName&&0<=t.symlinkStack.findIndex(e=>e===n.typeName)&&e.has(n.typeName)){const t=e.get(n.typeName);if(t.resolved)return t.ty}const o=null===(a=n.baseTypes)||void 0===a?void 0:a.filter(e=>"symlink"===e.kind);if(o&&o.length>0){const t=o.map(n=>s(e,n,c)).filter(e=>"object"===e.kind),a=s(e,r.a(Object.assign(Object.assign({},n),n.baseTypes?{baseTypes:n.baseTypes.filter(e=>"symlink"!==e.kind)}:{}),...t),n.typeName?Object.assign(Object.assign({},c),{symlinkStack:[...c.symlinkStack,n.typeName]}):c);return i(n,e,Object.assign(Object.assign({},n),a),n.typeName)}return i(n,e,Object.assign(Object.assign({},Object.assign(Object.assign({},n),{members:n.members.map(t=>[t[0],s(e,t[1],n.typeName?Object.assign(Object.assign({},c),{symlinkStack:[...c.symlinkStack,n.typeName]}):c),...t.slice(2)])})),n.additionalProps&&0<n.additionalProps.length?{additionalProps:n.additionalProps.map(t=>[t[0],s(e,t[1],n.typeName?Object.assign(Object.assign({},c),{symlinkStack:[...c.symlinkStack,n.typeName]}):c),...t.slice(2)])}:{}),n.typeName)}case"operator":if(c.operators){const t=n.typeName?Object.assign(Object.assign({},c),{symlinkStack:[...c.symlinkStack,n.typeName]}):c,r=n.operands.map(n=>"object"==typeof n&&n.kind?s(e,n,t):n);if(0<r.filter(e=>e&&"object"==typeof e&&("symlink"===e.kind||"operator"===e.kind)).length)throw new Error(`Unresolved type operator is found: ${n.operator}`);if(!c.operators[n.operator])throw new Error(`Undefined type operator is found: ${n.operator}`);const a=Object.assign({},n);return delete a.operator,delete a.operands,i(n,e,Object.assign(Object.assign({},a),s(e,c.operators[n.operator](...r),t)),n.typeName)}return n;default:return n}}const c={picked:r.i,omit:r.e,partial:r.h,intersect:r.c,subtract:r.p};function u(e){for(const n of e.entries()){const t=s(e,n[1].ty,{nestLevel:0,symlinkStack:[n[0]],operators:c});n[1].ty=t}return e}},function(e,n,t){"use strict";var r=t(2),a=t(8),i=t(6),o=t(7);const s=["","InvalidDefinition","Required","TypeUnmatched","AdditionalPropUnmatched","RepeatQtyUnmatched","SequenceUnmatched","ValueRangeUnmatched","ValuePatternUnmatched","ValueLengthUnmatched","ValueUnmatched"],c={invalidDefinition:'"%{name}" of "%{parentType}" type definition is invalid.',required:'"%{name}" of "%{parentType}" is required.',typeUnmatched:'"%{name}" of "%{parentType}" should be type "%{expectedType}".',additionalPropUnmatched:'"%{addtionalProps}" of "%{parentType}" are not matched to additional property patterns.',repeatQtyUnmatched:'"%{name}" of "%{parentType}" should repeat %{repeatQty} times.',sequenceUnmatched:'"%{name}" of "%{parentType}" sequence is not matched',valueRangeUnmatched:'"%{name}" of "%{parentType}" value should be in the range %{minValue} to %{maxValue}.',valuePatternUnmatched:'"%{name}" of "%{parentType}" value should be matched to pattern "%{pattern}"',valueLengthUnmatched:'"%{name}" of "%{parentType}" length should be in the range %{minLength} to %{maxLength}.',valueUnmatched:'"%{name}" of "%{parentType}" value should be "%{expectedValue}".'};function u(e,...n){for(const t of n)switch(e){case r.a.InvalidDefinition:if(t.invalidDefinition)return t.invalidDefinition;break;case r.a.Required:if(t.required)return t.required;break;case r.a.TypeUnmatched:if(t.typeUnmatched)return t.typeUnmatched;break;case r.a.AdditionalPropUnmatched:if(t.additionalPropUnmatched)return t.additionalPropUnmatched;break;case r.a.RepeatQtyUnmatched:if(t.repeatQtyUnmatched)return t.repeatQtyUnmatched;break;case r.a.SequenceUnmatched:if(t.sequenceUnmatched)return t.sequenceUnmatched;break;case r.a.ValueRangeUnmatched:if(t.valueRangeUnmatched)return t.valueRangeUnmatched;break;case r.a.ValuePatternUnmatched:if(t.valuePatternUnmatched)return t.valuePatternUnmatched;break;case r.a.ValueLengthUnmatched:if(t.valueLengthUnmatched)return t.valueLengthUnmatched;break;case r.a.ValueUnmatched:if(t.valueUnmatched)return t.valueUnmatched}return""}function l(e,n){return null!=e?e:n}function p(e){switch(e.kind){case"repeated":return`(repeated ${p(e.repeated)})`;case"spread":return p(e.spread);case"sequence":return"(sequence)";case"primitive":return e.primitiveName;case"primitive-value":return`(value ${"string"==typeof e.value?`'${String(e.value)}'`:String(e.value)})`;case"optional":return p(e.optional);case"one-of":return`(one of ${e.oneOf.map(e=>p(e)).join(", ")})`;case"never":case"any":case"unknown":return e.kind;case"symlink":return e.symlinkTargetName;default:return e.typeName?e.typeName:"?"}}function d(e,n,t,r,a){let i=e;const s=a.topRepeatable,c=new Map([["expectedType",Object(o.a)(p(t))],["type",Object(o.a)(typeof n)],["expectedValue",Object(o.a)("primitive-value"===t.kind?String(t.value):"enum"===t.kind&&t.typeName?`enum member of ${t.typeName}`:"?")],["value",Object(o.a)(String(n))],["repeatQty",Object(o.a)(s?"optional"!==s.kind?`${l(s.min,"")}${null!==s.min&&void 0!==s.min||null!==s.max&&void 0!==s.max?"..":""}${l(s.max,"")}`:"0..1":"?")],["minValue",Object(o.a)("primitive"===t.kind?`${l(t.minValue,l(t.greaterThanValue,"(smallest)"))}`:"?")],["maxValue",Object(o.a)("primitive"===t.kind?`${l(t.maxValue,l(t.lessThanValue,"(biggest)"))}`:"?")],["pattern",Object(o.a)("primitive"===t.kind?`${t.pattern?`/${t.pattern.source}/${t.pattern.flags}`:"(pattern)"}`:"?")],["minLength",Object(o.a)("primitive"===t.kind?`${l(t.minLength,"0")}`:"?")],["maxLength",Object(o.a)("primitive"===t.kind?`${l(t.maxLength,"(biggest)")}`:"?")],["name",Object(o.a)(`${"repeated"!==t.kind&&a.dataPath.endsWith("repeated)")?"repeated item of ":"sequence"!==t.kind&&a.dataPath.endsWith("sequence)")?"sequence item of ":""}${a.entryName||"?"}`)],["parentType",Object(o.a)(a.parentType||"?")],["dataPath",a.dataPath],...r.substitutions||[]]);for(const e of c.entries())i=i.replace(new RegExp(`%{${e[0]}}`),e[1]);return i}function m(e,n,t,a){const i=[];t.messages&&i.push(t.messages),a.ctx.errorMessages&&i.push(a.ctx.errorMessages),i.push(c);const o=[];for(let e=0;e<a.ctx.typeStack.length;e++){const n=a.ctx.typeStack[e],t=a.ctx.typeStack[e+1],r=Array.isArray(n)?n[0]:n,i=Array.isArray(t)?t[1]:void 0;let s=!1;if("repeated"===r.kind?e!==a.ctx.typeStack.length-1&&(r.name&&o.push({kind:"key",name:r.name}),o.push({kind:"index",name:`(${void 0!==i?`${i}:`:""}repeated)`}),s=!0):"sequence"===r.kind&&e!==a.ctx.typeStack.length-1&&(r.name&&o.push({kind:"key",name:r.name}),o.push({kind:"index",name:`(${void 0!==i?`${i}:`:""}sequence)`}),s=!0),!s)if(r.name)if(0===e)r.typeName?o.push({kind:"type",name:r.typeName}):o.push({kind:"key",name:r.name});else{const e=o.length;e&&"type"===o[e-1].kind?o.push({kind:"key",name:r.name}):r.typeName?o.push({kind:"type",name:r.typeName}):o.push({kind:"key",name:r.name})}else r.typeName&&o.push({kind:"type",name:r.typeName})}let p="";for(let e=0;e<o.length;e++){const n=o[e];if(p+=n.name,e+1===o.length)break;p+="type"===n.kind?":":"."}let m="",f="";for(let e=o.length-1;0<=e;e--){const n=o[e];if("type"===n.kind){if(0!==e&&e===o.length-1){if("index"===o[e-1].kind)continue}m=n.name;for(let n=e+1;n<o.length;n++){const e=o[n];if("key"===e.kind){f=e.name;break}}break}}if(!m)for(let e=a.ctx.typeStack.length-1;0<=e;e--){const n=a.ctx.typeStack[e],t=Array.isArray(n)?n[0]:n;t.typeName&&(m=t.typeName)}const h=a.ctx.typeStack.slice().reverse().map(e=>Array.isArray(e)?e[0]:e).find(e=>"repeated"===e.kind||"spread"===e.kind||"optional"===e.kind)||null;const g={dataPath:p,topRepeatable:h,parentType:m,entryName:f},b={},y=[t];e===r.a.RepeatQtyUnmatched&&h&&y.unshift(h);for(const e of y){if(l(e.minValue,!1)&&(b.minValue=e.minValue),l(e.maxValue,!1)&&(b.maxValue=e.maxValue),l(e.greaterThanValue,!1)&&(b.greaterThanValue=e.greaterThanValue),l(e.lessThanValue,!1)&&(b.lessThanValue=e.lessThanValue),l(e.minLength,!1)&&(b.minLength=e.minLength),l(e.maxLength,!1)&&(b.maxLength=e.maxLength),l(e.pattern,!1)){const n=e.pattern;b.pattern=`/${n.source}/${n.flags}`}l(e.min,!1)&&(b.min=e.min),l(e.max,!1)&&(b.max=e.max)}const k={};switch(typeof n){case"number":case"bigint":case"string":case"boolean":case"undefined":k.value=n;break;case"object":null===n&&(k.value=n)}t.messageId?a.ctx.errors.push(Object.assign({code:`${t.messageId}-${s[e]}`,message:d(t.message?t.message:u(e,...i),n,t,a,g),dataPath:p,constraints:b},k)):t.message?a.ctx.errors.push(Object.assign({code:`${s[e]}`,message:d(t.message,n,t,a,g),dataPath:p,constraints:b},k)):a.ctx.errors.push(Object.assign({code:`${s[e]}`,message:d(u(e,...i),n,t,a,g),dataPath:p,constraints:b},k))}function f(e,n,t,r){try{r.ctx.typeStack.push(t),m(e,n,t[0],r)}finally{r.ctx.typeStack.pop()}}var h=t(9);function g(e,n,t,o){try{switch(t.typeStack.push("number"==typeof o||"string"==typeof o?[n,o]:n),n.kind){case"never":return function(e,n,t){return m(r.a.TypeUnmatched,e,n,{ctx:t}),null}(e,n,t);case"any":case"unknown":return function(e,n,t){return{value:t.mapper?t.mapper(e,n):e}}(e,n,t);case"primitive":return function(e,n,t){if("null"===n.primitiveName){if(null!==e)return m(r.a.TypeUnmatched,e,n,{ctx:t}),null}else if("integer"===n.primitiveName){if("number"!=typeof e)return m(r.a.TypeUnmatched,e,n,{ctx:t}),null;if(Math.trunc(e)!==e)return m(r.a.TypeUnmatched,e,n,{ctx:t}),null}else if(typeof e!==n.primitiveName)return m(r.a.TypeUnmatched,e,n,{ctx:t}),null;let a=!1,i=!1;switch(typeof n.minValue){case"number":case"string":e<n.minValue&&(i||m(r.a.ValueRangeUnmatched,e,n,{ctx:t}),i=!0,a=!0)}switch(typeof n.maxValue){case"number":case"string":e>n.maxValue&&(i||m(r.a.ValueRangeUnmatched,e,n,{ctx:t}),i=!0,a=!0)}switch(typeof n.greaterThanValue){case"number":case"string":e<=n.greaterThanValue&&(i||m(r.a.ValueRangeUnmatched,e,n,{ctx:t}),i=!0,a=!0)}switch(typeof n.lessThanValue){case"number":case"string":e>=n.lessThanValue&&(i||m(r.a.ValueRangeUnmatched,e,n,{ctx:t}),i=!0,a=!0)}let o=!1;switch(typeof n.minLength){case"number":("string"!=typeof e||e.length<n.minLength)&&(o||m(r.a.ValueLengthUnmatched,e,n,{ctx:t}),o=!0,a=!0)}switch(typeof n.maxLength){case"number":("string"!=typeof e||e.length>n.maxLength)&&(o||m(r.a.ValueLengthUnmatched,e,n,{ctx:t}),o=!0,a=!0)}return n.pattern&&(n.pattern.test(e)||(m(r.a.ValuePatternUnmatched,e,n,{ctx:t}),a=!0)),a?null:{value:t.mapper?t.mapper(e,n):e}}(e,n,t);case"primitive-value":return function(e,n,t){const a=e===n.value?{value:t.mapper?t.mapper(e,n):e}:null;return a||m(r.a.ValueUnmatched,e,n,{ctx:t}),a}(e,n,t);case"repeated":return function(e,n,t){if(!Array.isArray(e))return m(r.a.TypeUnmatched,e,n,{ctx:t}),null;if("number"==typeof n.min&&e.length<n.min)return m(r.a.RepeatQtyUnmatched,e,n,{ctx:t}),null;if("number"==typeof n.max&&e.length>n.max)return m(r.a.RepeatQtyUnmatched,e,n,{ctx:t}),null;const a=[];for(let r=0;r<e.length;r++){const i=g(e[r],n.repeated,t,r);if(!i)return null;a.push(i.value)}return{value:a}}(e,n,t);case"sequence":return function(e,n,t){if(!Array.isArray(e))return m(r.a.TypeUnmatched,e,n,{ctx:t}),null;let a=0,i=0,o=0,s=!1;const c=(n,a)=>"number"==typeof n.min&&o<n.min?(f(0===o?r.a.TypeUnmatched:r.a.RepeatQtyUnmatched,e,[n,a],{ctx:t}),null):"number"==typeof n.max&&o>n.max?(f(r.a.RepeatQtyUnmatched,e,[n,a],{ctx:t}),null):n,u=(n,a)=>{if(0===o)s=!0;else{if(s)return f(r.a.RepeatQtyUnmatched,e,[n,a],{ctx:t}),null;if(o>1)return f(r.a.RepeatQtyUnmatched,e,[n,a],{ctx:t}),null}return n},l=[];for(;a<e.length&&i<n.sequence.length;){const r=n.sequence[i];if("spread"===r.kind){const n=t.errors.length,s=g(e[a],r.spread,t,a);if(s)l.push(s.value),a++,o++;else{if(t.errors.length=n,!c(r,a))return null;o=0,i++}}else if("optional"===r.kind){const n=t.errors.length,s=g(e[a],r.optional,t,a);if(s)l.push(s.value),a++,o++;else{if(t.errors.length=n,!u(r,a))return null;o=0,i++}}else{const n=g(e[a],r,t,a);if(!n)return null;l.push(n.value),a++,i++}}for(;i<n.sequence.length;){const s=n.sequence[i];if("spread"===s.kind){if(!c(s,a))return null;o=0,i++}else{if("optional"!==s.kind)return f(r.a.RepeatQtyUnmatched,e,[s,a],{ctx:t}),null;if(!u(s,a))return null;o=0,i++}}const p=e.length===a?{value:l}:null;return p||m(r.a.SequenceUnmatched,e,n,{ctx:t}),p}(e,n,t);case"one-of":return function(e,n,t){for(const r of n.oneOf){const n=t.errors.length,a=g(e,r,t);if(a)return a;t.errors.length=n}return m(r.a.TypeUnmatched,e,n,{ctx:t}),null}(e,n,t);case"enum":return function(e,n,t){for(const r of n.values)if(e===r[1])return{value:t.mapper?t.mapper(e,n):e};return m(r.a.ValueUnmatched,e,n,{ctx:t}),null}(e,n,t);case"object":return function(e,n,t){let o=Array.isArray(e)?[...e]:Object.assign({},e);const s=n.members.slice().reverse();for(const i of n.members)if(n.members.find(e=>e[0]===i[0])!==s.find(e=>e[0]===i[0]))throw m(r.a.InvalidDefinition,e,n,{ctx:t}),new a.a(`Duplicated member is found: ${i[0]} in ${n.name||"(unnamed)"}`,n,t);if(null===e||"object"!=typeof e){if(m(r.a.TypeUnmatched,e,n,{ctx:t}),!t||!t.checkAll)return null;o=null}else{const a=new Set;if((t.noAdditionalProps||n.additionalProps&&0<n.additionalProps.length)&&!Array.isArray(e))for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.add(n);if(t.noAdditionalProps&&Array.isArray(e)&&0<e.length){if(0===(n.additionalProps||[]).filter(e=>e[0].includes("number")).length){if(m(r.a.AdditionalPropUnmatched,e,n,{ctx:t,substitutions:[["addtionalProps","[number]"]]}),!t||!t.checkAll)return null;o=null}}for(const s of n.members)if(a.delete(s[0]),Object.prototype.hasOwnProperty.call(e,s[0])){const n=g(e[s[0]],"optional"===s[1].kind?Object.assign(Object.assign({},s[1].optional),{name:s[0],message:s[1].message,messages:s[1].messages,messageId:s[1].messageId}):s[1],t);if(n){if(o){if(Object(i.c)(o,s[0]))continue;o[s[0]]=n.value}}else{if(!t||!t.checkAll)return null;o=null}}else if("optional"!==s[1].kind){if(f(r.a.Required,e,[s[1],void 0],{ctx:t}),!t||!t.checkAll)return null;o=null}if(n.additionalProps&&0<n.additionalProps.length){for(const s of function*(){for(const e of a.values())yield e;if(Array.isArray(e))for(let n=0;n<e.length;n++)yield String(n)}()){let c=!1;const u=[];for(const e of n.additionalProps)for(const n of e[0]){const t=e[1];"number"===n?i.a.test(s)&&u.push(t):"string"===n?u.push(t):n.test(s)&&u.push(t),"optional"===t.kind&&(c=!0)}if(0===u.length){if(c)continue;if(m(r.a.AdditionalPropUnmatched,e,n,{ctx:t,substitutions:[["addtionalProps",s]]}),t&&t.checkAll){o=null;continue}return null}a.delete(s);let l=!1;const p=t.errors.length;for(const n of u){const r=g(e[s],"optional"===n.kind?Object.assign(Object.assign({},n.optional),{message:n.message,messages:n.messages,messageId:n.messageId,name:s}):Object.assign(Object.assign({},n),{name:s}),t);if(r){if(o){if(l=!1,t.errors.length=p,Object(i.c)(o,s))continue;o[s]=r.value}break}l=!0}if(l){if(!t||!t.checkAll)return null;o=null}}}if(t.noAdditionalProps&&0<a.size){if(m(r.a.AdditionalPropUnmatched,e,n,{ctx:t,substitutions:[["addtionalProps",Array.from(a.values()).join(", ")]]}),!t||!t.checkAll)return null;o=null}}return o?{value:t&&t.mapper?t.mapper(o,n):o}:null}(e,n,t);case"symlink":if(t.schema)return g(e,Object(h.c)(t.schema,n,{nestLevel:0,symlinkStack:[]}),t);throw m(r.a.InvalidDefinition,e,n,{ctx:t}),new a.a(`Unresolved symbol '${n.symlinkTargetName}' is appeared.`,n,t);case"operator":if(t.schema)return g(e,Object(h.c)(t.schema,n,{nestLevel:0,symlinkStack:[]}),t);throw m(r.a.InvalidDefinition,e,n,{ctx:t}),new a.a(`Unresolved type operator is found: ${n.operator}`,n,t);case"spread":case"optional":throw m(r.a.InvalidDefinition,e,n,{ctx:t}),new a.a(`Unexpected type assertion: ${n.kind}`,n,t);default:throw m(r.a.InvalidDefinition,e,n,{ctx:t}),new a.a(`Unknown type assertion: ${n.kind}`,n,t)}}finally{t.typeStack.pop()}}function b(e,n,t){const r=Object.assign({errors:[],typeStack:[]},t||{});try{return g(e,n,r)}finally{t&&(t.errors=r.errors)}}function y(e,n){var t;if(e.has(n))return null===(t=e.get(n))||void 0===t?void 0:t.ty;throw new Error(`Undefined type name is referred: ${n}`)}t.d(n,"c",(function(){return g})),t.d(n,"b",(function(){return b})),t.d(n,"a",(function(){return y}))},,function(e,n,t){"use strict";t.d(n,"c",(function(){return s})),t.d(n,"b",(function(){return c})),t.d(n,"a",(function(){return u}));var r=t(8),a=t(6),i=t(10);function o(e,n){switch(n.kind){case"object":{const t=Array.isArray(e)?[]:{},r=new Set;if(!Array.isArray(e))for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.add(n);for(const a of n.members)Object.hasOwnProperty.call(e,a[0])&&(r.delete(a[0]),t[a[0]]=e[a[0]]);if(n.additionalProps&&0<n.additionalProps.length){for(const n of function*(){for(const e of r.values())yield e;if(Array.isArray(e))for(let n=0;n<e.length;n++)yield String(n)}())t[n]=e[n]}return t}default:return e}}function s(e,n,t){switch(n.kind){case"never":throw new r.a(`Type unmatched: ${n.kind}`,n,t);case"any":case"unknown":case"primitive":case"primitive-value":case"repeated":case"sequence":case"one-of":case"enum":case"object":{const a=Object(i.b)(e,n,t);if(a)return a.value;throw new r.a("Validation failed.",n,t)}case"spread":case"optional":case"symlink":case"operator":throw new r.a(`Unexpected type assertion: ${n.kind}`,n,t);default:throw new r.a(`Unknown type assertion: ${n.kind}`,n,t)}}function c(e,n,t){const r=Object.assign(Object.assign({errors:[],typeStack:[]},t||{}),{mapper:o});try{return s(e,n,r)}finally{t&&(t.errors=r.errors)}}function u(e,n,t,r){return function e(n,t){if(null==n)return t;switch(typeof n){case"object":if(Array.isArray(n))return[...t];{const r=Object.assign({},n);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(Object(a.c)(r,n))continue;r[n]=e(r[n],t[n])}return r}default:return t}}(e,c(n,t,Object.assign({errors:[],typeStack:[]},r||{})))}},,,,,function(e,n,t){e.exports=t(18)},function(e,n,t){"use strict";t.r(n);var r=t(2);t.d(n,"ErrorTypes",(function(){return r.a}));var a=t(4);t.d(n,"picked",(function(){return a.i})),t.d(n,"omit",(function(){return a.e})),t.d(n,"partial",(function(){return a.h})),t.d(n,"intersect",(function(){return a.c})),t.d(n,"oneOf",(function(){return a.f})),t.d(n,"subtract",(function(){return a.p})),t.d(n,"primitive",(function(){return a.j})),t.d(n,"regexpPatternStringType",(function(){return a.l})),t.d(n,"primitiveValue",(function(){return a.k})),t.d(n,"optional",(function(){return a.g})),t.d(n,"repeated",(function(){return a.m})),t.d(n,"sequenceOf",(function(){return a.n})),t.d(n,"spread",(function(){return a.o})),t.d(n,"enumType",(function(){return a.b})),t.d(n,"objectType",(function(){return a.d})),t.d(n,"derived",(function(){return a.a})),t.d(n,"symlinkType",(function(){return a.q})),t.d(n,"withName",(function(){return a.B})),t.d(n,"withTypeName",(function(){return a.E})),t.d(n,"withOriginalTypeName",(function(){return a.C})),t.d(n,"withDocComment",(function(){return a.r})),t.d(n,"withRange",(function(){return a.D})),t.d(n,"withMinValue",(function(){return a.y})),t.d(n,"withMaxValue",(function(){return a.w})),t.d(n,"withGreaterThan",(function(){return a.s})),t.d(n,"withLessThan",(function(){return a.t})),t.d(n,"withMinLength",(function(){return a.x})),t.d(n,"withMaxLength",(function(){return a.v})),t.d(n,"withMatch",(function(){return a.u})),t.d(n,"withMsg",(function(){return a.z})),t.d(n,"withMsgId",(function(){return a.A}));var i=t(10);t.d(n,"validateRoot",(function(){return i.c})),t.d(n,"validate",(function(){return i.b})),t.d(n,"getType",(function(){return i.a}));var o=t(12);t.d(n,"pickRoot",(function(){return o.c})),t.d(n,"pick",(function(){return o.b})),t.d(n,"patch",(function(){return o.a}))}])}));
//# sourceMappingURL=tynder-rt.min.js.map