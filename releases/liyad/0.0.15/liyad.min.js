!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.liyad=t():e.liyad=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var r=n(2);function o(e){if(e.evalCount++,e.config.maxEvalCount&&e.config.maxEvalCount<e.evalCount)throw new r.b}function a(e,t,n,r){if(t.length<n)throw new Error(`[SX] ${e}: Invalid argument length: expected: ${n} / args: ${t.length}.`);if(r&&r<t.length)throw new Error(`[SX] ${e}: Invalid argument length: expected: ${r} / args: ${t.length}.`);return!0}},function(e,t,n){"use strict";n.d(t,"k",function(){return a}),n.d(t,"h",function(){return s}),n.d(t,"j",function(){return c}),n.d(t,"i",function(){return i}),n.d(t,"a",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"f",function(){return f}),n.d(t,"l",function(){return b}),n.d(t,"e",function(){return m}),n.d(t,"d",function(){return p}),n.d(t,"g",function(){return $}),n.d(t,"b",function(){return _});var r=n(2),o=n(0);function a(e){switch(typeof e){case"object":case"symbol":case"function":return NaN;default:return Number(e)}}function s(e,t){const n=e.macroMap.get(t.symbol);return!!n&&n.fn(e,t.symbol)}function c(e,t,n){for(let n=e.scopes.length-1;n>0;n--){const r=e.scopes[n];if(r&&Object.prototype.hasOwnProperty.call(r.scope,t.symbol))return r.scope;if(r.capturedScopes&&Object.prototype.hasOwnProperty.call(r.capturedScopes,t.symbol))return r.capturedScopes[t.symbol];if(!r.isBlockLocal)break}const r=p(e);return Object.prototype.hasOwnProperty.call(r.scope,t.symbol)?r.scope:n?null:m(e).scope}function i(e,t){const n=c(e,t,!0);if(n)return n[t.symbol];const r=e.symbolMap.get(t.symbol);if(r)return r.fn(e,t.symbol);if(e.config.valueSymbolResolverFallback)return e.config.valueSymbolResolverFallback(e,t.symbol);if(e.config.raiseOnUnresolvedSymbol)throw new Error(`[SX] resolveValueSymbol: Unresolved symbol: ${t.symbol}.`);return t.symbol}function l(e,t){const n={};for(const r of t){const t=c(e,r,!0);if(null===t)throw new Error(`[SX] collectCapturedVariables: Unresolved symbols ${r}`);n[r.symbol]=t}return n}function u(e){const t=[];for(let n=e.scopes.length-1;n>0;n--){const r=e.scopes[n];if(r.capturedScopes&&t.unshift(r.capturedScopes),!r.isBlockLocal)break}return t.length>0?Object.assign({},...t):void 0}function f(e,t,n,r){e.scopes.push({isBlockLocal:n,scope:t,capturedScopes:r})}function b(e){if(e.scopes.length<2)throw new Error("[SX] uninstallScope: Unable to pop stack.");return e.scopes.pop()}function m(e){return e.scopes[e.scopes.length-1]}function p(e){return e.scopes[0]}function $(e,t,n){if(Array.isArray(n[n.length-1])){const r=n.slice(0,n.length-1),o=n[n.length-1];if(o&&o[0].symbol===e.config.reservedNames.if&&o[3][0].symbol===e.config.reservedNames.self){const n=`$__tempvar__$$ec${e.evalCount++}$$_`,a=t.map((e,t)=>({symbol:`${n}_$i${t}_${e.symbol}`}));return[[{symbol:e.config.reservedNames.until},o[1],[{symbol:e.config.reservedNames.let},[...a],...r,...o[3].slice(1).map((t,n)=>[{symbol:e.config.reservedNames.set},a[n],t]),...a.map((n,r)=>[{symbol:e.config.reservedNames.set},t[r],n])]],...r,o[2]]}}return n}function _(e,t){if(Object(o.b)(e),null===t||void 0===t)return t;let n=t;for(;Array.isArray(n);){{if(0===n.length)return n;const t=Object(r.d)(n[0]);if(!t)break;{const r=s(e,t);if(!r)break;n=r(n)}}Object(o.b)(e)}if(Array.isArray(n)){if(0<(n=n.slice(0)).length){const t=Object(r.d)(n[0]);if(t){if(t.symbol===e.config.reservedNames.quote)return n.slice(1,2)[0];if(t.symbol===e.config.reservedNames.eval)return _(e,n[1])}const o=[];for(let t=1;t<n.length;t++){if(Array.isArray(n[t])&&Object(r.d)(n[t][0],e.config.reservedNames.spread)){o.push(t);const r=_(e,n[t][1]);n[t]=Array.isArray(r)?r:[r]}else n[t]=_(e,n[t])}for(const e of o.reverse())n=n.slice(0,e).concat(n[e],n.slice(e+1));let a;if("function"!=typeof(a="function"==typeof n[0]?n[0]:t?function(e,t){if("function"==typeof t)return t;const n=e.funcMap.get(t.symbol);if(n)return n.fn(e,t.symbol);{const n=i(e,t);if("function"==typeof n)return n;if(e.config.funcSymbolResolverFallback)return e.config.funcSymbolResolverFallback(e,t.symbol);if(e.config.raiseOnUnresolvedSymbol)throw new Error(`[SX] resolveFunctionSymbol: Unresolved symbol: ${t.symbol}.`);return t.symbol}}(e,t):_(e,n[0])))throw new Error(`[SX] evaluate: First item of list is not a function: ${JSON.stringify(n)}.`);n=a(...n.slice(1))}}else if(e.config.wrapExternalValue&&Object.prototype.hasOwnProperty.call(n,"value"))n=n.value;else if(Object.prototype.hasOwnProperty.call(n,"symbol"))n=i(e,n);else if(Object.prototype.hasOwnProperty.call(n,"car")){const t=_(e,n.car),r=_(e,n.cdr);if(Array.isArray(r)){const e=r.slice(0);e.unshift(t),n=e}else n={car:t,cdr:r}}else Object.prototype.hasOwnProperty.call(n,"dotted")?n=[_(e,n.dotted)]:Object.prototype.hasOwnProperty.call(n,"comment")&&(n=[]);return n}},function(e,t,n){"use strict";function r(e,t){return[{symbol:e.config.reservedNames.quote},t]}function o(e,t){return[{symbol:e.config.reservedNames.spread},t]}function a(e,t){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"symbol")?void 0!==t?e.symbol===t?e:null:e:null}n.d(t,"e",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return i});class s extends Error{constructor(e){super(e)}}class c extends s{constructor(){super("[SX] evaluate: The maximum count of evaluations has been exceeded.")}}class i extends s{constructor(e){super(`[SX] ${e}: Unexpected termination of script.`)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return u});var r=n(2),o=n(1),a=n(0);function s(e,t){let n=t;for(;Array.isArray(n);){{if(0===n.length)break;const t=Object(r.d)(n[0]);if(!t)break;{const r=Object(o.h)(e,t);if(!r)break;n=r(n)}}Object(a.b)(e)}return n}function c(e,t){if(!Array.isArray(t)||!Object(r.d)(t[0],e.config.reservedNames.quote))throw new Error("[SX] stripQuote: token is not quoted.");return t[1]}function i(e,t){return Array.isArray(t)&&Object(r.d)(t[0],e.config.reservedNames.quote)?t[1]:t}function l(e){return function(){return Object(o.e)(e)}}function u(e,t){return function(){return Object(o.i)(e,{symbol:t})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return compileLambda});var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_evaluate__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_compile_ops__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5);function compileCore(e,t,n,r,o){function a(e){let t="";if(null===e)t+="(null)";else if(void 0===e)t+="(void 0)";else switch(typeof e){case"boolean":case"number":t+=`(${String(e)})`;break;case"object":if(Object(_types__WEBPACK_IMPORTED_MODULE_0__.d)(e)){const n=e;c.varNames.has(n.symbol)?t+=`(${c.varNames.get(n.symbol)})`:(o[c.varsCount]=n.symbol,t+=`(_$_vars[${String(c.varsCount++)}])`);break}default:o[c.varsCount]=e,t+=`(_$_vars[${String(c.varsCount++)}])`}return t}function s(t,n){let r="";const l=t[n];if(Array.isArray(l))if(0<l.length){const t=Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.a)(e,l);if(Array.isArray(t))if(0<t.length)if(Object(_types__WEBPACK_IMPORTED_MODULE_0__.d)(t[0])){const n=t[0],a=t.slice(1);i.has(n.symbol)?r+=i.get(n.symbol)(t,a):e.funcMap.has(n.symbol)?(o[c.varsCount]=e.funcMap.get(n.symbol).fn(e,""),r+=`((_$_vars[${String(c.varsCount++)}])(${a.map(t=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.e)(e,t)],0)).join(",")}))`):c.varNames.has(n.symbol)?r+=`(${String(c.varNames.get(n.symbol))})(${a.map(t=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.e)(e,t)],0)).join(",")})`:(o[c.varsCount]=Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.c)(e,n.symbol),r+=`((_$_vars[${String(c.varsCount++)}])()(${a.map(t=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.e)(e,t)],0)).join(",")}))`)}else switch(typeof t[0]){case"function":o[c.varsCount]=t[0],r+=`((_$_vars[${String(c.varsCount++)}])(${t.slice(1).map((t,n,r)=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.e)(e,t)],0)).join(",")}))`;break;default:throw new Error(`[SX] compileToken: First item of list is not a function: ${JSON.stringify(t[0])}.`)}else r+="([])";else r+=a(l)}else r+="([])";else r+=a(l);return r}const c={_$_vars:o,varsCount:1,varNames:new Map,varNamesCount:0,varDefs:"var x0;",ops:new Map,makeScope:function(e){const t=new Map;for(const e of c.varNames.entries())t.set(e[0],e[1]);e(),c.varNames=t},compileToken:s};Object(_compile_ops__WEBPACK_IMPORTED_MODULE_3__.a)(e,c);const i=c.ops;e.config.enableTailCallOptimization&&(r=Object(_evaluate__WEBPACK_IMPORTED_MODULE_1__.g)(e,t,r));const l=Object(_evaluate__WEBPACK_IMPORTED_MODULE_1__.c)(e);if(l)for(const e in l)Object.hasOwnProperty.call(l,e)&&(o[c.varsCount++]=e,o[c.varsCount]=l[e],c.varNames.set(e,`(_$_vars[${String(c.varsCount)}][_$_vars[${String(c.varsCount-1)}]])`),c.varsCount++);const u=`${t.map((e,r)=>(c.varNames.set(t[r].symbol,"a"+r),`${n&&r===t.length-1?"...":""}a${r}`)).join(",")}`,f=`return(${r.map((e,t)=>s(r,t)).join(",")})`;return`(function(${u}){"strict";${c.varDefs}${f}})`}function evalCompiledLambda(_$_state,_$_vars,code){return _$_vars[0]=eval(code),_$_vars[0]}function compileLambda(e,t,n,r){const o=[];return evalCompiledLambda(e,o,compileCore(e,t,n,r,o))}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(2),o=n(0),a=n(3);function s(e,t){const{_$_vars:n,ops:s,makeScope:c,compileToken:i}=t;s.set("$quote",function(e,r){let o="";return n[t.varsCount]=e[1],o+=`(_$_vars[${String(t.varsCount++)}])`}),s.set("$self",function(t,n){let r="";return r+=`((_$_vars[0])(${n.map(t=>i([Object(a.e)(e,t)],0)).join(",")}))`}),s.set("$__if",function(t,n){let r="";return Object(o.a)("compileToken:$__if",n,2,3),r+=`(${i(t,1)}?(${i([Object(a.d)(e,t[2])],0)}):(${i([Object(a.d)(e,t[3])],0)}))`}),s.set("$__if-null",function(t,n){let r="";return Object(o.a)("compileToken:$__if-null",n,2,2),r+=`((()=>{let _$_rv=${i(t,1)};return _$_rv?_$_rv:(${i([Object(a.d)(e,t[2])],0)}});})())`}),s.set("$__cond",function(t,n){let r="";Object(o.a)("compileToken:$__cond",n,1),r+="(";for(let t=0;t<n.length;t+=2)r+=`${i([Object(a.d)(e,n[t])],0)}?(${i([Object(a.d)(e,n[t+1])],0)}):(`;r+="null";for(let e=0;e<n.length;e+=2)r+=")";return r+=")"}),s.set("$__while",function(t,n){let r="";return Object(o.a)("compileToken:$__while",n,1),r+=`((()=>{let _$_rv=null;while(${i([Object(a.d)(e,t[1])],0)}){_$_rv=${t.slice(2).map(t=>i([Object(a.d)(e,t)],0)).join(",")}}return _$_rv})())`}),s.set("$__do-while",function(t,n){let r="";return Object(o.a)("compileToken:$__do-until",n,1),r+=`((()=>{let _$_rv=null;do{_$_rv=${t.slice(2).map(t=>i([Object(a.d)(e,t)],0)).join(",")}}}while(${i([Object(a.d)(e,t[1])],0)})return _$_rv)())`}),s.set("$__until",function(t,n){let r="";return Object(o.a)("compileToken:$__until",n,1),r+=`((()=>{let _$_rv=null;while(!${i([Object(a.d)(e,t[1])],0)}){_$_rv=${t.slice(2).map(t=>i([Object(a.d)(e,t)],0)).join(",")}}return _$_rv})())`}),s.set("$__do-until",function(t,n){let r="";return Object(o.a)("compileToken:$__do-until",n,1),r+=`((()=>{let _$_rv=null;do{_$_rv=${t.slice(2).map(t=>i([Object(a.d)(e,t)],0)).join(",")}}}while(!${i([Object(a.d)(e,t[1])],0)})return _$_rv)())`}),s.set("$__repeat",function(n,s){let l="";if(Object(o.a)("compileToken:$__repeat",s,2),!Object(r.d)(s[0]))throw new Error("[SX] compileToken: $__repeat : args[0] is not symbol.");return c(()=>{const r="v"+t.varNamesCount++;t.varNames.set(s[0].symbol,r),l+=`(((_$_n)=>{let _$_rv=null;for(let ${r}=0;${r}<_$_n;${r}++){_$_rv=${n.slice(2).map(t=>i([Object(a.d)(e,t)],0)).join(",")}}return _$_rv})(${i(s,1)}))`}),l}),s.set("$__for",function(n,s){let l="";if(Object(o.a)("compileToken:$__for",s,2),!Object(r.d)(s[0]))throw new Error("[SX] compileToken: $__for : args[0] is not symbol.");return c(()=>{const r="v"+t.varNamesCount++;t.varNames.set(s[0].symbol,r),l+=`(((_$_l)=>{let _$_rv=null;for(const ${r} of _$_l){_$_rv=${n.slice(2).map(t=>i([Object(a.d)(e,t)],0)).join(",")}}return _$_rv})(${i(s,1)}))`}),l}),s.set("$__scope",function(n,s){let l="";if(Object(o.a)("compileToken:$__scope",s,2),!Array.isArray(n[3]))throw new Error("[SX] compileToken: $__scope : args[2] is not array.");return c(()=>{for(const o of Object(a.d)(e,n[3])){let e="";if(Array.isArray(o)){if(o.length<1)throw new Error("[SX] compileToken: $__scope : args[0][?] is too short.");if(!Object(r.d)(o[0]))throw new Error("[SX] compileToken: $__scope : args[0][?][0] is not symbol.");e=o[0].symbol,l+=`(${"v"+t.varNamesCount}=${i(o,1)})`}else{if(!Object(r.d)(o))throw new Error("[SX] compileToken: $__scope : args[0][?] is not symbol.");e=o.symbol}t.varDefs+=`var v${t.varNamesCount}=void 0;`,t.varNames.set(o.symbol,"v"+t.varNamesCount++)}const o=`${n.slice(4).map(t=>i([Object(a.d)(e,t)],0)).join(",")}`;l+=n[2]?`[${o}]`:`(${o})`}),l}),s.set("$__try",function(r,s){let l="";return Object(o.a)("compileToken:$__try",s,1,2),l+=`((()=>{try{${i([Object(a.d)(e,r[1])],0)}}catch(e${t.varNamesCount}){let e${t.varNamesCount+1}=(_$_vars[${String(t.varsCount)}])();`,n[t.varsCount++]=Object(a.b)(e),c(()=>{t.varNames.set("$error","e"+t.varNamesCount++),t.varNames.set("$parent","e"+t.varNamesCount++),l+=`${i([Object(a.d)(e,r[2])],0)}}})())`}),l}),s.set("$raise",function(t,n){let r="";return r+=`((()=>{throw ${i([Object(a.e)(e,t[1])],0)}})())`}),s.set("$boolean",function(e,t){let n="";return Object(o.a)("compileToken:$boolean",t,1,1),n+=`((x0=${i(t,0)}),(Array.isArray(x0)&&x0.length===0?false:boolean(x0)))`}),s.set("$__get",function(s,c){let l="";Object(o.a)("compileToken:$__get",c,1);const u=Object(a.d)(e,s[1]),f=Object(r.d)(u)?u.symbol:"string"==typeof u?u:null;if("string"!=typeof f)throw new Error(`[SX] compileToken: $__get : operand is not symbol: ${JSON.stringify(s[1])}.`);let b="";t.varNames.has(f)?b=t.varNames.get(f):(n[t.varsCount]=Object(a.c)(e,f),b=`_$_vars[${String(t.varsCount++)}]`);return l+=`((${b})${s.slice(2).map((e,o,a)=>`[${Object(r.d)(a[o])?(e=>(n[t.varsCount]=e,`_$_vars[${String(t.varsCount++)}]`))(a[o].symbol):i(a,o)}]`).join("")})`}),s.set("$__let",function(n,s){let c="";Object(o.a)("compileToken:$__let",s,1,1);const l=Object(a.d)(e,n[1]),u=Object(r.d)(l)?l.symbol:"string"==typeof l?l:null;if("string"!=typeof u)throw new Error(`[SX] compileToken: $__let : operand is not rvalue: ${JSON.stringify(n[1])}.`);return t.varNames.has(u)||(t.varDefs+=`var v${t.varNamesCount}=void 0;`,t.varNames.set(u,"v"+t.varNamesCount++)),c+=`(${t.varNames.get(u)}=${i(n,2)})`}),s.set("$__set",function(s,c){let l="";Object(o.a)("compileToken:$__set",c,2,2);const u=Object(a.d)(e,s[1]),f=Object(r.d)(u)?u.symbol:"string"==typeof u?u:Array.isArray(u)?Object(r.d)(u[0])?u[0].symbol:"string"==typeof u[0]?u[0]:null:null;if("string"!=typeof f)throw new Error(`[SX] compileToken: $__set : operand is not rvalue: ${JSON.stringify(s[1])}.`);let b="";t.varNames.has(f)?b=t.varNames.get(f):(n[t.varsCount]=Object(a.c)(e,f),b=`_$_vars[${String(t.varsCount++)}]`);return l+=`((${b})${(Array.isArray(u)?u.slice(1):[]).map((e,o,a)=>`[${Object(r.d)(a[o])?(e=>(n[t.varsCount]=e,`_$_vars[${String(t.varsCount++)}]`))(a[o].symbol):i(a,o)}]`).join("")}=${i(s,2)})`}),s.set("$not",function(e,t){let n="";return Object(o.a)("compileToken:$not",t,1,1),n+=`(!${i(t,0)})`}),s.set("$__and",function(t,n){let r="";return Object(o.a)("compileToken:$__and",n,1),r+=`(${n.map(t=>i([Object(a.d)(e,t)],0)).join("&&")})`}),s.set("$__or",function(t,n){let r="";return Object(o.a)("compileToken:$__or",n,1),r+=`(${n.map(t=>i([Object(a.d)(e,t)],0)).join("||")})`}),s.set("===",function(e,t){let n="";return Object(o.a)("compileToken:===",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("===")})`}),s.set("!==",function(e,t){let n="";return Object(o.a)("compileToken:!==",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("!==")})`}),s.set("==",function(e,t){let n="";return Object(o.a)("compileToken:==",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("==")})`}),s.set("!=",function(e,t){let n="";return Object(o.a)("compileToken:!=",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("!=")})`}),s.set("<",function(e,t){let n="";return Object(o.a)("compileToken:<",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("<")})`}),s.set("<=",function(e,t){let n="";return Object(o.a)("compileToken:<=",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("<=")})`}),s.set(">",function(e,t){let n="";return Object(o.a)("compileToken:>",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join(">")})`}),s.set(">=",function(e,t){let n="";return Object(o.a)("compileToken:<=",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join(">=")})`}),s.set("$concat",function(e,r){let a="";return Object(o.a)("compileToken:+",r,1),n[t.varsCount]=e[1],a+=`(_$_vars[${String(t.varsCount++)}].concat(\n            ${r.map((e,t,n)=>i(n,t)).join(",")}))`}),s.set("+",function(e,t){let n="";return Object(o.a)("compileToken:+",t,1),n+=`(${t.map((e,t,n)=>i(n,t)).join("+")})`}),s.set("-",function(e,t){let n="";return Object(o.a)("compileToken:-",t,1),n+=`(${e.length>2?t.map((e,t,n)=>i(n,t)).join("-"):`-(${String(i(e,1))})`})`}),s.set("*",function(e,t){let n="";return Object(o.a)("compileToken:*",t,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("*")})`}),s.set("**",function(e,t){let n="";return Object(o.a)("compileToken:**",t,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("**")})`}),s.set("/",function(e,t){let n="";return Object(o.a)("compileToken:/",t,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("/")})`}),s.set("%",function(e,t){let n="";return Object(o.a)("compileToken:%",t,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("%")})`}),s.set("<<",function(e,t){let n="";return Object(o.a)("compileToken:<<",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("<<")})`}),s.set(">>",function(e,t){let n="";return Object(o.a)("compileToken:>>",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join(">>")})`}),s.set(">>>",function(e,t){let n="";return Object(o.a)("compileToken:>>>",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join(">>>")})`}),s.set("$bit-not",function(e,t){let n="";return Object(o.a)("compileToken:$bit-not",t,1,1),n+=`(~(${i(e,1)}))`}),s.set("$bit-and",function(e,t){let n="";return Object(o.a)("compileToken:$bit-and",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("&")})`}),s.set("$bit-or",function(e,t){let n="";return Object(o.a)("compileToken:$bit-or",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("|")})`}),s.set("$bit-xor",function(e,t){let n="";return Object(o.a)("compileToken:$bit-xor",t,2,2),n+=`(${t.map((e,t,n)=>i(n,t)).join("^")})`})}},function(e,t,n){e.exports=n(7)},function(e,t,n){"use strict";n.r(t);var r=n(2);function o(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"eof")}function a(e){return"string"==typeof e&&0===e.trim().length}function s(e){return"string"==typeof e&&/^[0-9\+\-]$/.test(e)}function c(e){return"string"==typeof e&&/^[0-9]$/.test(e)}function i(e){return"string"==typeof e&&!a(e)&&!s(e)}function l(e){return`line: ${e.line} / strings: ${e.index} / pos: ${e.pos} :${e.strings.length>e.index?e.strings[e.index].slice(e.pos,e.pos+20):""}`}function u(e,t){if(e.strings.length<=e.index)return{eof:!0};if(e.strings[e.index].length<=e.pos){if(!e.values||e.values.length<=e.index)return e.pos=0,e.index++,u(e);{const t={value:e.values[e.index]};return e.pos=0,e.index++,t}}if(t)for(const n of t){const t=e.strings[e.index].slice(e.pos,e.pos+n.length);if(t===n)return e.pos+=n.length,e.line+=t.split("\n").length-1,{eof:!1,eofSeq:n}}{let t=e.strings[e.index].slice(e.pos,e.pos+1);if(e.pos++,"\n"===t&&e.line++,"\\"===t){if(e.strings[e.index].length<=e.pos)throw new Error(`[SX] getChar: Invalid syntax at: ${l(e)}.`);switch(t=e.strings[e.index].slice(e.pos,e.pos+1),e.pos++,t){case"b":t="\b";break;case"t":t="\t";break;case"n":t="\n";break;case"v":t="\v";break;case"f":t="\f";break;case"r":t="\r";break;case"U":case"u":if("{"===e.strings[e.index].slice(e.pos,e.pos+1)){let n="";for(let t=0;t<6;t++){const r=e.strings[e.index].slice(e.pos+t,e.pos+1+t);if("}"===r){if(0===t)throw new Error(`[SX] getChar: Invalid syntax at: ${l(e)}.`);e.pos+=t;break}if(!/^[0-9A-Fa-f]{1}$/.test(n))throw new Error(`[SX] getChar: Invalid syntax at: ${l(e)}.`);n+=r}if("}"!==e.strings[e.index].slice(e.pos,e.pos+1))throw new Error(`[SX] getChar: Invalid syntax at: ${l(e)}.`);e.pos++,t=String.fromCodePoint(Number.parseInt(n,16))}else{const n=e.strings[e.index].slice(e.pos,e.pos+4);if(!/^[0-9A-Fa-f]{4}$/.test(n))throw new Error(`[SX] getChar: Invalid syntax at: ${l(e)}.`);e.pos+=4,t=String.fromCodePoint(Number.parseInt(n,16))}}}return t}}function f(e,t,n){const r=e.index,o=e.pos,a=e.line,s=[];try{for(let r=0;r<t;r++)s.push(u(e,n))}finally{e.index=r,e.pos=o,e.line=a}return s}function b(e,t){const n=e.index,r=e.pos,o=e.line;let a;try{a=u(e,t)}finally{e.index=n,e.pos=r,e.line=o}return a}function m(e){let t=b(e);for(;!o(t)&&a(t);)u(e),t=b(e)}function p(e,t){let n="",r=b(e,t);for(;!o(r)&&"string"==typeof r&&/^[0-9\+\-\.EeInfinityNaN]+$/.test(n+r);)u(e,t),n+=r,r=b(e,t);if(!/^([\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?)|([\+\-]Infinity)|(NaN)$/.test(n))throw new Error(`[SX] parseNumber: Invalid syntax at: ${l(e)}.`);return Number(n)}function $(e,t){let n="",r=b(e,t);for(;!o(r);){if("string"==typeof r){if(a(r))break;if("#"===r&&"|"===f(e,2,t)[1])break;if(!/^[^.;()"]+$/.test(n+r))break;u(e,t),n+=r}else{if("object"!=typeof r||!Object.prototype.hasOwnProperty.call(r,"value"))throw new Error(`[SX] parseSymbol: Invalid syntax at: ${l(e)}.`);u(e,t);r.value;n+=String(r)}r=b(e,t)}return{symbol:n}}function _(e,t,n,a){const s=n?[...t,n]:t,c=[],i=[];for(;;){let t="",f=b(e,s);for(;!o(f);){if("string"==typeof f)u(e,s),t+=f;else{if("object"!=typeof f||!Object.prototype.hasOwnProperty.call(f,"value"))throw new Error(`[SX] parseStringOrComment: Invalid syntax at: ${l(e)}.`);u(e,s);f.value;t+=String(f)}f=b(e,s)}if(u(e,s),!0===f.eof)throw new r.c("parseStringOrComment");if(c.push(t),f.eofSeq!==n)break;i.push(h(e,a,[]))}return{strings:c,values:i}}function y(e){return _(e,['"'],null,")").strings[0]}function d(e,t,n){const r=[t];n&&r.push(n);const o=_(e,['"""'],"%%%(",")");for(let e=0;e<o.strings.length;e++)r.push(o.strings[e]),e<o.values.length&&r.push(o.values[e]);return r}function j(e){return{comment:_(e,["\r","\n"],null,")").strings[0]}}function O(e){return{comment:_(e,["|#"],null,")").strings[0]}}function g(e){m(e);let t=b(e);for(;!o(t);){switch(t){case")":throw new Error(`[SX] parseOneToken: Invalid syntax at: ${l(e)}.`);case"(":return u(e),h(e,")",[]);case"'":return u(e),m(e),Object(r.e)(e,g(e));case".":{u(e);const t=f(e,2);return e.config.enableSpread&&"."===t[0]&&"."===t[1]?(u(e),u(e),m(e),Object(r.f)(e,g(e))):(m(e),{dotted:g(e)})}case'"':{u(e);const t=f(e,4);if(e.config.enableHereDoc&&'"'===t[0]&&'"'===t[1]){let n=!0;o(t[2])||a(t[2])||(s(t[2])?"+"!==t[2]&&"-"!==t[2]||c(t[3])||(n=!1):i(t[2])&&(n=!1)),u(e),u(e);let r=null,b=null;if(n)r={symbol:e.config.reservedNames.Template};else{if(null===(r=$(e,["@"])))throw new Error(`[SX] parseOneToken: Invalid syntax at: ${l(e)}.`);if("number"==typeof r)throw new Error(`[SX] parseOneToken: Invalid syntax at: ${l(e)}.`);const t=f(e,2);if("@"===t[0]){if("{"!==t[1])throw new Error(`[SX] parseOneToken: Invalid syntax at: ${l(e)}.`);u(e),u(e);const n=h(e,"}",[{symbol:"@"}]);Array.isArray(n)&&(b=n)}}return d(e,r,b)}return y(e)}case";":return u(e),j(e);case"#":return"|"===f(e,2)[1]?(u(e),u(e),O(e)):$(e);default:if("string"!=typeof t){if("object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"value"))return u(e),e.config.wrapExternalValue?t:t.value;throw new Error(`[SX] parseOneToken: Invalid syntax at: ${l(e)}.`)}if(a(t))break;if(s(t)){if("+"===t||"-"===t){if(!c(f(e,2)[1]))return $(e)}return p(e)}if(i(t))return $(e);throw new Error(`[SX] parseOneToken: Invalid syntax at: ${l(e)}.`)}m(e),t=b(e)}throw new r.c("parseOneToken")}function h(e,t,n){const a=n.slice(0);let s=!1;m(e);let c=b(e);for(;!o(c);){switch(c){case t:return u(e),s?a[0]:a;default:{const t=g(e);if("object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"dotted")){if(1!==a.length)throw new Error(`[SX] parseList: Invalid syntax at: ${l(e)}.`);s=!0,Array.isArray(t)?(t.unshift(a.pop()),a.push(t)):a.push({car:a.pop(),cdr:t.dotted})}else if("object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"comment"))e.config.stripComments||a.push(t);else{if(s)throw new Error(`[SX] parseList: Invalid syntax at: ${l(e)}.`);a.push(t)}}}m(e),c=b(e)}throw new r.c("parseList")}function v(e){const t=[];m(e);let n=b(e);for(;!o(n);){switch(n){case"(":u(e),t.push(h(e,")",[]));break;case"'":for(u(e),m(e);;){const n=g(e);if("object"!=typeof n||!Object.prototype.hasOwnProperty.call(n,"comment")){t.push(Object(r.e)(e,n));break}e.config.stripComments||t.push(n)}break;case";":u(e),e.config.stripComments?j(e):t.push(j(e));break;case"#":"|"===f(e,2)[1]?(u(e),u(e),e.config.stripComments?O(e):t.push(O(e))):(u(e),e.config.stripComments?j(e):t.push(j(e)));break;case'"':{const n=f(e,3);if('"'===n[1]&&'"'===n[2]){t.push(g(e));break}}default:throw new Error(`[SX] parseInitialState: Invalid syntax at: ${l(e)}.`)}m(e),n=b(e)}return t}var w=n(1),S=n(4),k=n(0);const E=(e,t)=>(...e)=>{Object(k.a)("$car",e,1,1);const t=T(...e);if(!Array.isArray(t))throw new Error("[SX] $car: Invalid argument(s): args[0] is not array.");if(0===t.length)throw new Error("[SX] $car: Invalid argument(s): args[0] is nil.");return t[0]},A=(E(),(e,t)=>(...e)=>{Object(k.a)("$cdr",e,1,1);const t=T(...e);if(!Array.isArray(t))throw new Error("[SX] $car: Invalid argument(s): args[0] is not array.");if(0===t.length)throw new Error("[SX] $car: Invalid argument(s): args[0] is nil.");return t.slice(1)}),N=(A(),(e,t)=>(...e)=>{Object(k.a)("$cons",e,2,2);let{car:t,cdr:n}=L(...e);return null===t&&(t=[]),null===n&&(n=[]),Array.isArray(n)?(n.unshift(t),n):{car:t,cdr:n}}),I=(N(),(e,t)=>(...e)=>{const t=e.slice(0,1);return 1===t.length?t[0]:null}),T=(...e)=>{const t=e.slice(0,1);return 1===t.length?t[0]:null},x=(e,t)=>(...e)=>{const t=e.slice(1,2);return 1===t.length?t[0]:null},X=(...e)=>{const t=e.slice(1,2);return 1===t.length?t[0]:null},C=(e,t)=>(...e)=>{const t=e.slice(e.length-1,e.length);return 1===t.length?t[0]:null},M=(e,t)=>(...e)=>{const t=e.slice(1);return 0<t.length?t:null},P=(e,t)=>(...e)=>{let t=e.slice(0,1);t=1===t.length?t[0]:null;let n=e.slice(1,2);return{car:t,cdr:n=1===n.length?n[0]:null}},L=(...e)=>{let t=e.slice(0,1);t=1===t.length?t[0]:null;let n=e.slice(1,2);return{car:t,cdr:n=1===n.length?n[0]:null}},D=(e,t)=>(...e)=>{Object(k.a)("$atom",e,1,1);const t=T(...e);if(null===t||void 0===t)return!0;if(Array.isArray(t))return 0===t.length;switch(typeof t){case"number":case"string":case"function":case"boolean":return!0;case"object":return!!Object(r.d)(t)}return!1},R=(D(),(e,t)=>(...e)=>{Object(k.a)("$eq",e,2,2);const{car:t,cdr:n}=L(...e);return t===n}),q=(R(),(e,t)=>(...e)=>{Object(k.a)("$notEq",e,2,2);const{car:t,cdr:n}=L(...e);return t!==n}),U=(q(),(e,t)=>(...e)=>e.slice(0)),B=(e,t,n)=>(...t)=>{Object(k.a)("$__scope",t,3);const o=T(...t),a=X(...t),{car:s,cdr:c}=L(...t.slice(2));let i=null;const l={};if(Array.isArray(s))for(const t of s)if(Array.isArray(t)){const n=L(...t),o=Object(r.d)(n.car);l[o?o.symbol:String(n.car)]=Object(w.b)(e,n.cdr)}else{const e=Object(r.d)(t);l[e?e.symbol:String(t)]=null}Object(w.f)(e,l,o,n);try{if(4<t.length)if(a){i=[];for(const n of t.slice(3))i.push(Object(w.b)(e,n))}else for(const n of t.slice(3))i=Object(w.b)(e,n);else i=Object(w.b)(e,c)}finally{Object(w.l)(e)}return i},F=(e,t)=>(...t)=>{Object(k.a)("$__lambda",t,2);const n=t[0];if(!Array.isArray(n))throw new Error("[SX] $__lambda: Invalid argument(s): args[0] is not array.");let o=!1;for(let t=0;t<n.length;t++){const a=n[t];if(t===n.length-1&&e.config.enableSpread&&Array.isArray(a)&&Object(r.d)(a[0],e.config.reservedNames.spread)){if(!Object(r.d)(a[1]))throw new Error(`[SX] $__lambda: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`);n[t]=a[1],o=!0}else if(!Object(r.d)(a))throw new Error(`[SX] $__lambda: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`)}let a=t.slice(1);e.config.enableTailCallOptimization&&(a=Object(w.g)(e,n,a));const s=Object(w.c)(e),c=(...t)=>{if(t.length+(o?1:0)<n.length)throw new Error(`[SX] func call: Actual args too short: actual ${t.length} / formal ${n.length}.`);return B(e,0,s)(!1,!1,[[e.config.reservedNames.self,c],...n.map((a,s)=>[a.symbol,Object(r.e)(e,o&&s===n.length-1?t.slice(s):t[s])])],...a)};return c},W=(e,t)=>(...t)=>{Object(k.a)("$$__lambda",t,2);const n=t[0];if(!Array.isArray(n))throw new Error("[SX] $$__lambda: Invalid argument(s): args[0] is not array.");let o=!1;for(let t=0;t<n.length;t++){const a=n[t];if(t===n.length-1&&e.config.enableSpread&&Array.isArray(a)&&Object(r.d)(a[0],e.config.reservedNames.spread)){if(!Object(r.d)(a[1]))throw new Error(`[SX] $$__lambda: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`);n[t]=a[1],o=!0}else if(!Object(r.d)(a))throw new Error(`[SX] $$__lambda: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`)}const a=t.slice(1);return Object(S.a)(e,n,o,a)},K=(e,t)=>(...e)=>{Object(k.a)("$apply",e,1);const t=T(...e);if("function"!=typeof t)throw new Error("[SX] $apply: Invalid argument(s): args[0] is not function.");return(...n)=>t.apply(null,e.slice(1).concat(n))},V=(K(),(e,t)=>(...e)=>{throw T(...e)}),J=(V(),(e,t)=>(...e)=>{Object(k.a)("$pipe",e,1);let t=e[0];for(let n=1;n<e.length;n++)t=e[n](t);return t}),G=(J(),(e,t)=>(...t)=>{Object(k.a)("$__let",t,2,2);let n=Object(r.d)(T(...t));if(!n){if("string"!=typeof t[0])throw new Error("[SX] $__let: Invalid argument(s): invalid name.");n={symbol:t[0]}}return Object(w.j)(e,n,!1)[n.symbol]=t[1],t[1]}),H=(e,t)=>(...t)=>{Object(k.a)("$__set",t,2,2);let n=[];Array.isArray(t[0])?n=t[0]:n.push(t[0]);let o=Object(r.d)(n[0]);if(!o){if("string"!=typeof n[0])throw new Error("[SX] $__set: Invalid argument(s): invalid name.");o={symbol:n[0]}}let a=Object(w.j)(e,o,!0);if(null===a)throw new Error(`[SX] $__set: Unresolved symbol: ${o.symbol}.`);let s=!1;for(let c=0;c<n.length;c++){let i=n[c],l=!0;const u=c===n.length-1;for(;l;)switch(typeof i){case"function":a=i(a),l=!1;break;case"object":if(Array.isArray(i))i=Object(w.b)(e,i);else if(o=Object(r.d)(i))i=o.symbol;else{if(!Object.prototype.hasOwnProperty.call(i,"value"))throw new Error("[SX] $__set: Invalid argument(s): invalid name.");i=Object(w.b)(e,i)}break;case"number":i<0&&(i=a.length+i);case"string":u?(a[i]=t[1],s=!0):a=a[i],l=!1;break;default:throw new Error("[SX] $__set: Invalid argument(s): invalid name.")}}if(!s)throw new Error("[SX] $__set: Invalid argument(s): last path is not lvalue.");return t[1]},z=(e,t)=>(...e)=>{Object(k.a)("$boolean",e,1,1);const t=T(...e);return(!Array.isArray(t)||0!==t.length)&&Boolean(t)},Y=z(),Q=(e,t)=>(...e)=>(Object(k.a)("$not",e,1,1),!Y(...e)),Z=Q(),ee=(e,t)=>(...t)=>{Object(k.a)("$__and",t,1);let n=null;for(let r=0;r<t.length;r++){const o=Object(w.b)(e,t[r]);if(!Y(o))return o;n=o}return n},te=(ee(null),(e,t)=>(...t)=>{Object(k.a)("$__or",t,1);let n=null;for(let r=0;r<t.length;r++){const o=Object(w.b)(e,t[r]);if(Y(o))return o;n=o}return n}),ne=(te(null),(e,t)=>(...e)=>{Object(k.a)("$ambiguousEq",e,2,2);let{car:t,cdr:n}=L(...e);return Array.isArray(t)&&0===t.length&&(t=null),Array.isArray(n)&&0===n.length&&(n=null),void 0===t&&(t=null),void 0===n&&(n=null),t==n}),re=ne(),oe=(e,t)=>(...e)=>!re(...e),ae=(oe(),(e,t)=>(...e)=>{Object(k.a)("$lt",e,2,2);const{car:t,cdr:n}=L(...e);return Object(w.k)(t)<Object(w.k)(n)}),se=(ae(),(e,t)=>(...e)=>{Object(k.a)("$le",e,2,2);const{car:t,cdr:n}=L(...e);return Object(w.k)(t)<=Object(w.k)(n)}),ce=(se(),(e,t)=>(...e)=>{Object(k.a)("$gt",e,2,2);const{car:t,cdr:n}=L(...e);return Object(w.k)(t)>Object(w.k)(n)}),ie=(ce(),(e,t)=>(...e)=>{Object(k.a)("$ge",e,2,2);const{car:t,cdr:n}=L(...e);return Object(w.k)(t)>=Object(w.k)(n)}),le=(ie(),(e,t)=>(...e)=>(Object(k.a)("$isList",e,1,1),Array.isArray(T(...e)))),ue=(le(),(e,t)=>(...e)=>(Object(k.a)("$isString",e,1,1),"string"==typeof T(...e))),fe=(ue(),(e,t)=>(...e)=>(Object(k.a)("$isNumber",e,1,1),"number"==typeof T(...e))),be=(fe(),(e,t)=>(...e)=>(Object(k.a)("$isNaN",e,1,1),Number.isNaN(T(...e)))),me=(be(),(e,t)=>(...e)=>(Object(k.a)("$isFinite",e,1,1),Number.isFinite(T(...e)))),pe=(me(),(e,t)=>(...e)=>(Object(k.a)("$isInteger",e,1,1),Number.isInteger(T(...e)))),$e=(pe(),(e,t)=>(...e)=>(Object(k.a)("$toString",e,1,1),String(T(...e)))),_e=($e(),(e,t)=>(...e)=>(Object(k.a)("$toNumber",e,1,1),Object(w.k)(T(...e)))),ye=(_e(),(e,t)=>(...e)=>(Object(k.a)("$objectAssign",e,1),Object.assign(e[0],...e.slice(1)))),de=(ye(),(e,t)=>(...e)=>(Object(k.a)("$jsonStringify",e,1,1),JSON.stringify(T(...e)))),je=(de(),(e,t)=>(...e)=>{Object(k.a)("$jsonParse",e,1,1);const t=T(...e);if("string"!=typeof t)throw new Error("[SX] $jsonParse: Invalid argument(s): args[0] is not string.");return JSON.parse(t)}),Oe=(je(),(e,t)=>(...e)=>(console.log(...e),null)),ge=(Oe(),(e,t)=>(...e)=>(console.error(...e),null));ge();var he=[{name:"$car",fn:E},{name:"$cdr",fn:A},{name:"$cons",fn:N},{name:"$first",fn:I},{name:"$second",fn:x},{name:"$last",fn:C},{name:"$progn",fn:C},{name:"$rest",fn:M},{name:"$first-and-second",fn:P},{name:"$atom",fn:D},{name:"$eq",fn:R},{name:"===",fn:R},{name:"$not-eq",fn:q},{name:"!==",fn:q},{name:"$list",fn:U},{name:"$__scope",fn:B},{name:"$__global",fn:(e,t)=>(...t)=>{Object(k.a)("$__globalScope",t,1);const n=T(...t),r=X(...t);let o=null;Object(w.f)(e,Object(w.d)(e).scope,!0);try{if(2<t.length)if(n){o=[];for(const n of t.slice(1))o.push(Object(w.b)(e,n))}else for(const n of t.slice(1))o=Object(w.b)(e,n);else o=Object(w.b)(e,r)}finally{Object(w.l)(e)}return o}},{name:"$__capture",fn:(e,t)=>(...t)=>{Object(k.a)("$__capture",t,1);const n=t[0];if(!Array.isArray(n))throw new Error("[SX] $__lambda: Invalid argument(s): args[0] is not array.");let r=null;const o=Object(w.a)(e,n);Object(w.f)(e,{},!0,o);try{for(const n of t.slice(1))r=Object(w.b)(e,n)}finally{Object(w.l)(e)}return r}},{name:"$__lambda",fn:F},{name:"$$__lambda",fn:W},{name:"$__defun",fn:(e,t)=>(...t)=>{Object(k.a)("$__defun",t,3);const n=T(...t),r=F(e)(...t.slice(1));return e.funcMap.set(n.symbol,{name:n.symbol,fn:(e,t)=>r}),r}},{name:"$$__defun",fn:(e,t)=>(...t)=>{Object(k.a)("$$__defun",t,3);const n=T(...t),r=W(e)(...t.slice(1));return e.funcMap.set(n.symbol,{name:n.symbol,fn:(e,t)=>r}),r}},{name:"$__refun",fn:(e,t)=>(...t)=>{Object(k.a)("$__refun",t,1,1);const n=T(...t),r=e.funcMap.get(n.symbol);if(!r)throw new Error(`[SX] $__refun: function ${n.symbol} is not defined.`);return r.fn(e,n.symbol)}},{name:"$apply",fn:K},{name:"$__call",fn:(e,t)=>(...t)=>{Object(k.a)("$__call",t,2);const{car:n,cdr:o}=L(...t),a=Object(r.d)(o);return Function.prototype.apply.call(n[a?a.symbol:Object(w.b)(e,o)],n,t.slice(2))}},{name:"$__try",fn:(e,t)=>(...t)=>{Object(k.a)("$__try",t,1,2);let n=[];try{n=Object(w.b)(e,t[0])}catch(o){if(o instanceof r.a)throw o;n=1<t.length?B(e)(!0,!1,[["$error",Object(r.e)(e,o)],["$parent",Object(r.e)(e,Object(w.e)(e))]],t[1]):null}return n}},{name:"$raise",fn:V},{name:"$__if",fn:(e,t)=>(...t)=>{Object(k.a)("$__if",t,2,3);const n=T(...t);let r=[];return r=Y(n)?Object(w.b)(e,t[1]):2<t.length?Object(w.b)(e,t[2]):null}},{name:"$__if-null",fn:(e,t)=>(...t)=>{Object(k.a)("$__ifNull",t,2,2);const{car:n,cdr:r}=L(...t);let o=[];return o=re(n,null)?Object(w.b)(e,r):n}},{name:"$__cond",fn:(e,t)=>(...t)=>{Object(k.a)("$__cond",t,1);for(let n=0;n<t.length-1;n+=2){const r=t[n],o=t[n+1];if(Y(Object(w.b)(e,r)))return Object(w.b)(e,o)}return null}},{name:"$__while",fn:(e,t)=>(...t)=>{Object(k.a)("$__while",t,1);const n=T(...t),r=t.slice(1);let o=null;for(;Y(Object(w.b)(e,n));)for(const t of r)o=Object(w.b)(e,t);return o}},{name:"$__do-while",fn:(e,t)=>(...t)=>{Object(k.a)("$__doWhile",t,1);const n=T(...t),r=t.slice(1);let o=null;do{for(const t of r)o=Object(w.b)(e,t)}while(Y(Object(w.b)(e,n)));return o}},{name:"$__until",fn:(e,t)=>(...t)=>{Object(k.a)("$__until",t,1);const n=T(...t),r=t.slice(1);let o=null;for(;Z(Object(w.b)(e,n));)for(const t of r)o=Object(w.b)(e,t);return o}},{name:"$__do-until",fn:(e,t)=>(...t)=>{Object(k.a)("$__doUntil",t,1);const n=T(...t),r=t.slice(1);let o=null;do{for(const t of r)o=Object(w.b)(e,t)}while(Z(Object(w.b)(e,n)));return o}},{name:"$__repeat",fn:(e,t)=>(...t)=>{Object(k.a)("$__repeat",t,2);const n=Object(r.d)(T(...t));if(!n)throw new Error("[SX] $__repeat: Invalid argument(s): item(s) of args[0] is not symbol.");const o=Object(w.j)(e,n,!1),a=Object(w.k)(X(...t)),s=t.slice(2);let c=null;for(let t=0;t<a;t++){o[n.symbol]=t;for(const t of s)c=Object(w.b)(e,t)}return c}},{name:"$__for",fn:(e,t)=>(...t)=>{Object(k.a)("$__for",t,2);const n=Object(r.d)(T(...t));if(!n)throw new Error("[SX] $__for: Invalid argument(s): item(s) of args[0] is not symbol.");const o=Object(w.j)(e,n,!1),a=X(...t);if(!Array.isArray(a))throw new Error("[SX] $__for: Invalid argument(s): item(s) of args[1] is not array.");const s=t.slice(2);let c=null;for(const t of a){o[n.symbol]=t;for(const t of s)c=Object(w.b)(e,t)}return c}},{name:"$pipe",fn:J},{name:"$__get",fn:(e,t)=>(...t)=>{Object(k.a)("$__get",t,1);let n=null,o=Object(r.d)(t[0]);if(!o)switch(typeof t[0]){case"string":case"number":o={symbol:String(t[0])};break;default:n=Object(w.b)(e,t[0])}if(o){const t=Object(w.j)(e,o,!0);if(!t)throw new Error(`[SX] $__get: Invalid argument(s): args[0]: symbol "${o.symbol}" is not defined.`);n=t[o.symbol]}for(let a=1;a<t.length;a++){let s=t[a],c=!0;for(;c;)switch(typeof s){case"function":n=s(n),c=!1;break;case"object":if(Array.isArray(s))s=Object(w.b)(e,s);else if(o=Object(r.d)(s))s=o.symbol;else{if(!Object.prototype.hasOwnProperty.call(s,"value"))throw new Error("[SX] $__get: Invalid argument(s): invalid name path.");s=Object(w.b)(e,s)}break;case"number":s<0&&(s=n.length+s);case"string":n=n[s],c=!1;break;default:throw new Error("[SX] $__get: Invalid argument(s): invalid name path.")}}return n}},{name:"$__let",fn:G},{name:"$__set",fn:H},{name:"$boolean",fn:z},{name:"$not",fn:Q},{name:"$__and",fn:ee},{name:"$__or",fn:te},{name:"==",fn:ne},{name:"!=",fn:oe},{name:"<",fn:ae},{name:"<=",fn:se},{name:">",fn:ce},{name:">=",fn:ie},{name:"$is-list",fn:le},{name:"$is-string",fn:ue},{name:"$is-number",fn:fe},{name:"$is-NaN",fn:be},{name:"$is-finite",fn:me},{name:"$is-integer",fn:pe},{name:"$to-string",fn:$e},{name:"$to-number",fn:_e},{name:"$__#",fn:(e,t)=>(...t)=>{const n={};for(const o of t){if(!(Array.isArray(o)&&0<o.length))throw new Error("[SX] $__toObject: Invalid argument(s): args[?] is not array.");{const t=Object(r.d)(o[0]),a=t?t.symbol:String(Object(w.b)(e,o[0]));1===o.length?n[a]=!0:2===o.length?n[a]=Object(w.b)(e,o[1]):n[a]=Object(w.b)(e,[{symbol:e.config.reservedNames.list}].concat(o.slice(1)))}}return n}},{name:"$object-assign",fn:ye},{name:"$json-stringify",fn:de},{name:"$json-parse",fn:je},{name:"$console-log",fn:Oe},{name:"$console-error",fn:ge}];var ve=[{name:"$scope",fn:(e,t)=>t=>[{symbol:"$__scope"},t[1],t[2],...t.slice(3).map(t=>Object(r.e)(e,t))]},{name:"$local",fn:(e,t)=>t=>[{symbol:"$__scope"},!0,!1,...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$global",fn:(e,t)=>t=>[{symbol:"$__global"},!1,...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$clisp-let",fn:(e,t)=>t=>[{symbol:"$__scope"},!0,!1,...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$capture",fn:(e,t)=>t=>[{symbol:"$__capture"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$closure",fn:(e,t)=>t=>{if(!Object(r.d)(t[2],"use"))throw new Error("[SX] $closure: Invalid syntax: missing 'use' keyword.");return[{symbol:"$__capture"},Object(r.e)(e,t[3]),Object(r.e)(e,[{symbol:"$__lambda"},Object(r.e)(e,t[1]),...t.slice(4).map(t=>Object(r.e)(e,t))])]}},{name:"|->",fn:(e,t)=>e=>[{symbol:"$closure"},...e.slice(1)]},{name:"$$closure",fn:(e,t)=>t=>{if(!Object(r.d)(t[2],"use"))throw new Error("[SX] $closure: Invalid syntax: missing 'use' keyword.");return[{symbol:"$__capture"},Object(r.e)(e,t[3]),Object(r.e)(e,[{symbol:"$$__lambda"},Object(r.e)(e,t[1]),...t.slice(4).map(t=>Object(r.e)(e,t))])]}},{name:"|=>",fn:(e,t)=>e=>[{symbol:"$$closure"},...e.slice(1)]},{name:"$lambda",fn:(e,t)=>t=>[{symbol:"$__lambda"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"->",fn:(e,t)=>t=>[{symbol:"$__lambda"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$$lambda",fn:(e,t)=>t=>[{symbol:"$$__lambda"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"=>",fn:(e,t)=>t=>[{symbol:"$$__lambda"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$defun",fn:(e,t)=>t=>[{symbol:"$__defun"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$$defun",fn:(e,t)=>t=>[{symbol:"$$__defun"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$refun",fn:(e,t)=>t=>[{symbol:"$__refun"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"<-",fn:(e,t)=>t=>[{symbol:"$__refun"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$call",fn:(e,t)=>t=>(Object(k.a)("$call",t,3),[{symbol:"$__call"},t[1],Object(r.e)(e,t[2]),...t.slice(3)])},{name:"$try",fn:(e,t)=>t=>[{symbol:"$__try"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$if",fn:(e,t)=>t=>[{symbol:"$__if"},t[1],...t.slice(2).map(t=>Object(r.e)(e,t))]},{name:"$if-null",fn:(e,t)=>t=>[{symbol:"$__if-null"},t[1],...t.slice(2).map(t=>Object(r.e)(e,t))]},{name:"??",fn:(e,t)=>t=>[{symbol:"$__if-null"},t[1],...t.slice(2).map(t=>Object(r.e)(e,t))]},{name:"$cond",fn:(e,t)=>t=>[{symbol:"$__cond"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$while",fn:(e,t)=>t=>[{symbol:"$__while"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$do-while",fn:(e,t)=>t=>[{symbol:"$__do-while"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$until",fn:(e,t)=>t=>[{symbol:"$__until"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$do-until",fn:(e,t)=>t=>[{symbol:"$__do-until"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$repeat",fn:(e,t)=>t=>{if(!Object(r.d)(t[2],"of"))throw new Error("[SX] $repeat: Invalid syntax: missing 'of' keyword.");return[{symbol:"$__repeat"},Object(r.e)(e,t[1]),t[3],...t.slice(4).map(t=>Object(r.e)(e,t))]}},{name:"$for",fn:(e,t)=>t=>{if(!Object(r.d)(t[2],"of"))throw new Error("[SX] $for: Invalid syntax: missing 'of' keyword.");return[{symbol:"$__for"},Object(r.e)(e,t[1]),t[3],...t.slice(4).map(t=>Object(r.e)(e,t))]}},{name:"$get",fn:(e,t)=>t=>[{symbol:"$__get"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$let",fn:(e,t)=>t=>(Object(k.a)("$let",t,3,3),[{symbol:"$__let"},Object(r.e)(e,t[1]),t[2]])},{name:"$clisp-defvar",fn:(e,t)=>t=>(Object(k.a)("$clisp-defvar",t,3,3),[{symbol:"$global"},[{symbol:"$__let"},Object(r.e)(e,t[1]),t[2]]])},{name:"$set",fn:(e,t)=>t=>(Object(k.a)("$set",t,3,3),[{symbol:"$__set"},Object(r.e)(e,t[1]),t[2]])},{name:"$clisp-setq",fn:(e,t)=>t=>(Object(k.a)("$clisp-setq",t,3,3),[{symbol:"$__set"},Object(r.e)(e,t[1]),t[2]])},{name:"$and",fn:(e,t)=>t=>[{symbol:"$__and"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"$or",fn:(e,t)=>t=>[{symbol:"$__or"},...t.slice(1).map(t=>Object(r.e)(e,t))]},{name:"#",fn:(e,t)=>t=>[{symbol:"$__#"},...t.slice(1).map(t=>Object(r.e)(e,t))]}];var we=[{name:"nil",fn:(e,t)=>[]},{name:"null",fn:(e,t)=>null},{name:"undefined",fn:(e,t)=>void 0},{name:"true",fn:(e,t)=>!0},{name:"#true",fn:(e,t)=>!0},{name:"#t",fn:(e,t)=>!0},{name:"false",fn:(e,t)=>!1},{name:"#false",fn:(e,t)=>!1},{name:"#f",fn:(e,t)=>!1},{name:"#Number:Infinity",fn:(e,t)=>Number.POSITIVE_INFINITY},{name:"+Infinity",fn:(e,t)=>Number.POSITIVE_INFINITY},{name:"-Infinity",fn:(e,t)=>Number.NEGATIVE_INFINITY},{name:"#Number:Epsilon",fn:(e,t)=>Number.EPSILON},{name:"#Number:MaxValue",fn:(e,t)=>Number.MAX_VALUE},{name:"#Number:MinValue",fn:(e,t)=>Number.MIN_VALUE},{name:"#Number:MinSafeInteger",fn:(e,t)=>Number.MAX_SAFE_INTEGER},{name:"#Number:MinSafeInteger",fn:(e,t)=>Number.MIN_SAFE_INTEGER},{name:"NaN",fn:(e,t)=>Number.NaN}];function Se(e){return e.funcs=(e.funcs||[]).concat(he),e.macros=(e.macros||[]).concat(ve),e.symbols=(e.symbols||[]).concat(we),e}const ke=(e,t)=>(...e)=>{Object(k.a)("$bitLShift",e,2,2);let{car:t,cdr:n}=L(...e);return t=Object(w.k)(t),0<=(n=Object(w.k)(n))?n<32?t<<n:0:n>-32?t>>>-n:0},Ee=(ke(),(e,t)=>(...e)=>{Object(k.a)("$bitSRShift",e,2,2);let{car:t,cdr:n}=L(...e);return t=Object(w.k)(t),0<=(n=Object(w.k)(n))?n<32?t>>n:2147483648&t?-1:0:n>-32?t<<-n:0}),Ae=(Ee(),(e,t)=>(...e)=>{Object(k.a)("$bitURShift",e,2,2);let{car:t,cdr:n}=L(...e);return t=Object(w.k)(t),0<=(n=Object(w.k)(n))?n<32?t>>>n:0:n>-32?t<<-n:0}),Ne=(Ae(),(e,t)=>(...e)=>{Object(k.a)("$bitNot",e,1,1);const t=T(...e);return~Object(w.k)(t)}),Ie=(Ne(),(e,t)=>(...e)=>{Object(k.a)("$bitAnd",e,2);const t=T(...e);return e.slice(1).reduce((e,t)=>Object(w.k)(e)&Object(w.k)(t),Object(w.k)(t))}),Te=(Ie(),(e,t)=>(...e)=>{Object(k.a)("$bitOr",e,2);const t=T(...e);return e.slice(1).reduce((e,t)=>Object(w.k)(e)|Object(w.k)(t),Object(w.k)(t))}),xe=(Te(),(e,t)=>(...e)=>{Object(k.a)("$bitXor",e,2);const t=T(...e);return e.slice(1).reduce((e,t)=>Object(w.k)(e)^Object(w.k)(t),Object(w.k)(t))}),Xe=(xe(),(e,t)=>(...e)=>(Object(k.a)("$add",e,1),e.reduce((e,t)=>Object(w.k)(e)+Object(w.k)(t),0))),Ce=(Xe(),(e,t)=>(...e)=>{Object(k.a)("$sub",e,1);const t=T(...e);return 0===e.slice(1).length?-Object(w.k)(t):e.slice(1).reduce((e,t)=>Object(w.k)(e)-Object(w.k)(t),Object(w.k)(t))}),Me=(Ce(),(e,t)=>(...e)=>{Object(k.a)("$mul",e,2);const t=T(...e);return e.slice(1).reduce((e,t)=>Object(w.k)(e)*Object(w.k)(t),Object(w.k)(t))}),Pe=(Me(),(e,t)=>(...e)=>{Object(k.a)("$sup",e,2);const t=T(...e);return e.slice(1).reduce((e,t)=>Math.pow(Object(w.k)(e),Object(w.k)(t)),Object(w.k)(t))}),Le=(Pe(),(e,t)=>(...e)=>{Object(k.a)("$div",e,2);const t=T(...e);return e.slice(1).reduce((e,t)=>Object(w.k)(e)/Object(w.k)(t),Object(w.k)(t))}),De=(Le(),(e,t)=>(...e)=>{Object(k.a)("$mod",e,2);const t=T(...e);return e.slice(1).reduce((e,t)=>Object(w.k)(e)%Object(w.k)(t),Object(w.k)(t))}),Re=(De(),(e,t)=>(...e)=>Math.max(...e.map(e=>Object(w.k)(e)))),qe=(Re(),(e,t)=>(...e)=>Math.min(...e.map(e=>Object(w.k)(e)))),Ue=(qe(),(e,t)=>(...e)=>{const t=e.map(e=>Object(w.k)(e));return t.length>0?t.reduce((e,t)=>e+t,0)/t.length:NaN}),Be=(Ue(),(e,t)=>(...e)=>(Object(k.a)("$floor",e,1,1),Math.floor(Object(w.k)(T(...e))))),Fe=(Be(),(e,t)=>(...e)=>(Object(k.a)("$ceil",e,1,1),Math.ceil(Object(w.k)(T(...e))))),We=(Fe(),(e,t)=>(...e)=>(Object(k.a)("$round",e,1,1),Math.round(Object(w.k)(T(...e))))),Ke=(We(),(e,t)=>(...e)=>(Object(k.a)("$abs",e,1,1),Math.abs(Object(w.k)(T(...e))))),Ve=(Ke(),(e,t)=>(...e)=>(Object(k.a)("$sign",e,1,1),Math.sign(Object(w.k)(T(...e)))));Ve();var Je=[{name:"<<",fn:ke},{name:"$bit-l-shift",fn:ke},{name:">>",fn:Ee},{name:"$bit-sr-shift",fn:Ee},{name:">>>",fn:Ae},{name:"$bit-ur-shift",fn:Ae},{name:"$bit-not",fn:Ne},{name:"$bit-and",fn:Ie},{name:"$bit-or",fn:Te},{name:"$bit-xor",fn:xe},{name:"+",fn:Xe},{name:"$add",fn:Xe},{name:"$sum",fn:Xe},{name:"-",fn:Ce},{name:"$sub",fn:Ce},{name:"$neg",fn:Ce},{name:"*",fn:Me},{name:"$mul",fn:Me},{name:"**",fn:Pe},{name:"$sup",fn:Pe},{name:"/",fn:Le},{name:"$div",fn:Le},{name:"%",fn:De},{name:"$mod",fn:De},{name:"$max",fn:Re},{name:"$min",fn:qe},{name:"$avg",fn:Ue},{name:"$floor",fn:Be},{name:"$ceil",fn:Fe},{name:"$round",fn:We},{name:"$abs",fn:Ke},{name:"$sign",fn:Ve}];var Ge=[];var He=[];function ze(e){return e.funcs=(e.funcs||[]).concat(Je),e.macros=(e.macros||[]).concat(Ge),e.symbols=(e.symbols||[]).concat(He),e}class Ye{constructor(e){this.data=e}orderBy(e){let t;return t=Array.isArray(e)?(t,n)=>{for(const r of e)if("string"==typeof r){if(t[r]>n[r])return 1;if(t[r]<n[r])return-1}else{const e="desc"===r[1]?-1:1;if(t[r[0]]>n[r[0]])return 1*e;if(t[r[0]]<n[r[0]])return-1*e}return 0}:e,new Ye(this.data.slice(0).sort(t))}groupBy(e){let t;t=Array.isArray(e)?(t,n)=>{for(const r of e)if(t[r]!==n[r])return!1;return!0}:e;const n=[];let r=0,o=1;for(;o<this.data.length;o++)t(this.data[r],this.data[o],o,this.data)||(n.push(this.data.slice(r,o)),r=o);return n.push(this.data.slice(r,o)),new Ye(n)}groupEvery(e){if("number"==typeof e)return this.groupBy((t,n,r,o)=>r%e!=0);{const t=Object.assign({first:e.intermediate,last:e.intermediate},e),n=this.groupBy((e,n,r,o)=>t.single>=o.length?r%t.single!=0:r<=t.first?r%t.first!=0:(r-t.first)%t.intermediate!=0);return 1===n.data.length?t.single<n.data[0].length&&n.data.push([]):t.first<n.data[0].length&&n.data.unshift([]),n.data.length>1&&n.data[n.data.length-1].length>t.last&&n.data.push([]),n}}where(e){return new Ye(this.data.filter(e))}select(e){return e?this.data.map(e):this.data}}function Qe(e){return new Ye(e)}const Ze=(e,t)=>(...e)=>{Object(k.a)("$length",e,1,1);const t=T(...e);switch(typeof t){case"object":if(!("length"in t))break;case"string":return t.length}throw new Error("[SX] $length: Invalid argument type: object has no property 'length'.")},et=(Ze(),(e,t)=>(...e)=>{Object(k.a)("$trim",e,1,1);const t=T(...e);if("string"==typeof t)return t.trim();throw new Error("[SX] $trim: Invalid argument type: args[0] is not string.")}),tt=(et(),(e,t)=>(...e)=>{Object(k.a)("$trimHead",e,1,1);const t=T(...e);if("string"==typeof t)return t.trimLeft();throw new Error("[SX] $trimHead: Invalid argument type: args[0] is not string.")}),nt=(tt(),(e,t)=>(...e)=>{Object(k.a)("$trimTail",e,1,1);const t=T(...e);if("string"==typeof t)return t.trimRight();throw new Error("[SX] $trimTail: Invalid argument type: args[0] is not string.")}),rt=(nt(),(e,t)=>(...e)=>{if(Object(k.a)("$replaceAll",e,3,3),"string"==typeof e[0]&&"string"==typeof e[1]&&"string"==typeof e[2])return e[0].split(e[1]).join(e[2]);throw new Error("[SX] $replaceAll: Invalid argument type: args[0] or [1] or [2] is not string.")}),ot=(rt(),(e,t)=>(...e)=>{if(Object(k.a)("$split",e,2,2),"string"==typeof e[0]&&"string"==typeof e[1])return e[0].split(e[1]);throw new Error("[SX] $split: Invalid argument type: args[0] or [1] is not string.")}),at=(ot(),(e,t)=>(...e)=>{if(Object(k.a)("$join",e,1,2),Array.isArray(e[0]),e.length>1){if("string"==typeof e[1])return e[0].join(e[1]);throw new Error("[SX] $join: Invalid argument type: args[1] is not string.")}return e[0].join()}),st=(at(),(e,t)=>(...e)=>{Object(k.a)("$concat",e,1);const t=T(...e);switch(typeof t){case"object":if(!("concat"in t))break;case"string":return t.concat(...e.slice(1))}throw new Error("[SX] $concat: Invalid argument type: object has no property 'concat'.")}),ct=(st(),(e,t)=>(...e)=>{if(Object(k.a)("$slice",e,2,3),3===e.length&&("string"==typeof e[2]||Array.isArray(e[2])))return e[2].slice(Object(w.k)(e[0]),Object(w.k)(e[1]));if(2===e.length&&("string"==typeof e[1]||Array.isArray(e[1])))return e[1].slice(Object(w.k)(e[0]));throw new Error(`[SX] $slice: Invalid argument type: args[${e.length-1}] is not string or array.`)}),it=(ct(),(e,t)=>(...e)=>{if(Object(k.a)("$top",e,2,2),"string"==typeof e[1]||Array.isArray(e[1]))return e[1].slice(0,Object(w.k)(e[0]));throw new Error("[SX] $top: Invalid argument type: args[1] is not string or array.")}),lt=(it(),(e,t)=>(...e)=>{if(Object(k.a)("$tail",e,2,2),"string"==typeof e[1]||Array.isArray(e[1])){const t=-Object(w.k)(e[0]);return e[1].slice(t>=0||Number.isNaN(t)?e[1].length:t)}throw new Error("[SX] $tail: Invalid argument type: args[1] is not string or array.")}),ut=(lt(),(e,t)=>(...e)=>{Object(k.a)("$__at",e,2,2);const{car:t,cdr:n}=L(...e);return n[t]}),ft=(ut(),(e,t)=>(...e)=>{Object(k.a)("$reverse",e,1,1);const t=T(...e);if(Array.isArray(t))return t.slice(0).reverse();throw new Error("[SX] $reverse: Invalid argument type: args[0] is not array.")}),bt=(ft(),(e,t)=>(...e)=>{Object(k.a)("$reverse!",e,1,1);const t=T(...e);if(Array.isArray(t))return t.reverse();throw new Error("[SX] $reverse!: Invalid argument type: args[0] is not array.")}),mt=(bt(),(e,t)=>(...e)=>{Object(k.a)("$find",e,2,2);const{car:t,cdr:n}=L(...e);if(Array.isArray(t))return t.find(n);throw new Error("[SX] $find: Invalid argument type: args[0] is not array.")}),pt=(mt(),(e,t)=>(...e)=>{Object(k.a)("$filter",e,2,2);const{car:t,cdr:n}=L(...e);if(Array.isArray(t))return t.filter(n);throw new Error("[SX] $filter: Invalid argument type: args[0] is not array.")}),$t=(pt(),(e,t)=>(...e)=>{Object(k.a)("$map",e,2,2);const{car:t,cdr:n}=L(...e);if(Array.isArray(t))return t.map(n);throw new Error("[SX] $map: Invalid argument type: args[0] is not array.")}),_t=($t(),(e,t)=>(...e)=>{Object(k.a)("$reduce",e,2,3);const{car:t,cdr:n}=L(...e);if(Array.isArray(t))return e.length<3?t.reduce(n):t.reduce(n,e[2]);throw new Error("[SX] $reduce: Invalid argument type: args[0] is not array.")}),yt=(_t(),(e,t)=>(...e)=>{Object(k.a)("$reduceFromTail",e,2,3);const{car:t,cdr:n}=L(...e);if(Array.isArray(t))return e.length<3?t.reduceRight(n):t.reduceRight(n,e[2]);throw new Error("[SX] $reduceFromTail: Invalid argument type: args[0] is not array.")}),dt=(yt(),(e,t)=>(...e)=>{Object(k.a)("$sort",e,2,2);const{car:t,cdr:n}=L(...e);if(Array.isArray(t))return t.slice(0).sort(n);throw new Error("[SX] $sort: Invalid argument type: args[0] is not array.")}),jt=(dt(),(e,t)=>(...e)=>{Object(k.a)("$sort!",e,2,2);const{car:t,cdr:n}=L(...e);if(Array.isArray(t))return t.sort(n);throw new Error("[SX] $sort!: Invalid argument type: args[0] is not array.")}),Ot=(jt(),(e,t)=>(...e)=>{Object(k.a)("$group-every",e,2,2);const{car:t,cdr:n}=L(...e);if(!Array.isArray(n))throw new Error("[SX] $group-every: Invalid argument type: args[1] is not array.");return Qe(n).groupEvery(t).select()}),gt=(Ot(),(e,t)=>(...e)=>{Object(k.a)("$group-by",e,2,2);const{car:t,cdr:n}=L(...e);if(!Array.isArray(n))throw new Error("[SX] $group-by: Invalid argument type: args[1] is not array.");return Qe(n).groupBy(t).select()}),ht=(gt(),(e,t)=>(...e)=>{Object(k.a)("$order-by",e,2,2);const{car:t,cdr:n}=L(...e);if(!Array.isArray(n))throw new Error("[SX] $order-by: Invalid argument type: args[1] is not array.");return Qe(n).orderBy(t).select()}),vt=(ht(),(e,t)=>(...e)=>{Object(k.a)("$where",e,2,2);const{car:t,cdr:n}=L(...e);if("function"!=typeof e[0])throw new Error("[SX] $where: Invalid argument type: args[0] is not function.");if(!Array.isArray(n))throw new Error("[SX] $where: Invalid argument type: args[1] is not array.");return Qe(n).where(t).select()});vt();var wt=[{name:"$range",fn:(e,t)=>(...t)=>{Object(k.a)("$range",t,2,3);const{car:n,cdr:r}=L(...t),o=Object(w.k)(n)||0,a=Object(w.k)(r)||0,s=t.length>2&&Object(w.k)(t[2])||(o<=a?1:-1),c=Math.sign(a-o)+Math.sign(s)!==0?Math.floor(Math.abs(a-o)/Math.abs(s))+1:0;return e.evalCount+=c,Object(w.b)(e,0),Array.from({length:c},(e,t)=>o+t*s)}},{name:"$length",fn:Ze},{name:"$trim",fn:et},{name:"$trim-head",fn:tt},{name:"$trim-tail",fn:nt},{name:"$replace-all",fn:rt},{name:"$split",fn:ot},{name:"$join",fn:at},{name:"$concat",fn:st},{name:"$slice",fn:ct},{name:"$top",fn:it},{name:"$tail",fn:lt},{name:"$__at",fn:ut},{name:"$reverse",fn:ft},{name:"$reverse!",fn:bt},{name:"$find",fn:mt},{name:"$filter",fn:pt},{name:"$map",fn:$t},{name:"$reduce",fn:_t},{name:"$reduce-from-head",fn:_t},{name:"$reduce-from-tail",fn:yt},{name:"$sort",fn:dt},{name:"$sort!",fn:jt},{name:"$group-every",fn:Ot},{name:"$group-by",fn:gt},{name:"$order-by",fn:ht},{name:"$where",fn:vt}];var St=[{name:"$[",fn:(e,t)=>e=>{if(!Object(r.d)(e[2],"]"))throw new Error("[SX] $repeat: Invalid syntax: missing ']' keyword.");return[{symbol:"$__at"},e[1],e[3]]}}];var kt=[];function Et(e){return e.funcs=(e.funcs||[]).concat(wt),e.macros=(e.macros||[]).concat(St),e.symbols=(e.symbols||[]).concat(kt),e}const At=(e,t)=>(...t)=>{const n={};for(const o of t){if(!(Array.isArray(o)&&0<o.length))throw new Error("[SX] $jsxProps: Invalid argument(s): args[?] is not array.");{const t=Object(r.d)(o[0]),a=t?t.symbol:String(Object(w.b)(e,o[0]));switch(a){case"style":if(1===o.length)n[a]="";else if(o.length>=2){const t={};for(const n of o.slice(1))if(Array.isArray(n)&&1<n.length)t[String(Object(w.b)(e,n[0]))]=String(Object(w.b)(e,n[1]));else if("string"==typeof n)for(const e of n.split(";")){const n=/^\s*(\S+)\s*:\s*(.*?)\s*$/.exec(e);n&&(t[n[1]]=n[2])}n[a]=t}break;case"class":case"styleClass":if(1===o.length)n[a]=[];else if(o.length>=2){let t=[];for(const n of o.slice(1))Array.isArray(n)?t=t.concat(n.map(t=>Object(w.b)(e,t))):"string"==typeof n&&(t=t.concat(n.split(" ")));const r=[],s=e=>e.forEach(e=>null===e||void 0===e?void 0:Array.isArray(e)?s(e):r.push(String(e)));s(t),n[a]=r}break;case"className":if(1===o.length)n[a]="";else if(o.length>=2){let t="";for(const n of o.slice(1)){let r="";if(Array.isArray(n)){const t=[],o=n=>n.map(t=>Object(w.b)(e,t)).forEach(e=>null===e||void 0===e?void 0:Array.isArray(e)?o(e):t.push(String(e)));o(n),r=t.join(" ")}else"string"==typeof n&&(r=n);0<t.length?t+=" "+r:t=r}n[a]=t}break;case"dangerouslySetInnerHTML":1===o.length?n[a]={__html:""}:o.length>=2?n[a]={__html:Object(w.b)(e,o[1])}:n[a]={__html:Object(w.b)(e,[{symbol:e.config.reservedNames.list}].concat(o.slice(1)))};break;case"setInnerText":1===o.length?n[a]={__text:""}:o.length>=2?n[a]={__text:Object(w.b)(e,o[1])}:n[a]={__text:Object(w.b)(e,[{symbol:e.config.reservedNames.list}].concat(o.slice(1)))};break;default:1===o.length?n[a]=!0:2===o.length?n[a]=Object(w.b)(e,o[1]):n[a]=Object(w.b)(e,[{symbol:e.config.reservedNames.list}].concat(o.slice(1)))}}}return n};function Nt(e,...t){let n=t,o={};if(0<t.length&&Array.isArray(t[0])){Object(r.d)(t[0][0],"@")&&(o=At(e,"")(...t[0].slice(1)),n=n.slice(1))}return{props:o,children:n}}const It=(e,t)=>(...n)=>{const{props:r,children:o}=Nt(e,...n);return e.config.jsx(t,r,...o)},Tt=e=>(t,n)=>(...n)=>{const{props:r,children:o}=Nt(t,...n);return t.config.jsx(e,r,...o)};var xt=[{name:"$=__if",fn:(e,t)=>(...t)=>{Object(k.a)("$__outputIf",t,2);const{car:n,cdr:r}=L(...t);let o=[];return Y(n)&&(2<t.length?(o.push({symbol:e.config.reservedNames.Template},...t.slice(1)),o=Object(w.b)(e,o)):o=Object(w.b)(e,r)),o}},{name:"$=__for",fn:(e,t)=>(...t)=>{Object(k.a)("$__outputForOf",t,2);const n=T(...t),o=[];if(!Array.isArray(n))throw new Error("[SX] $__outputForOf: Invalid argument(s): args[0] is not array.");for(let a=0;a<n.length;a++){const s=n[a],c=B(e)(!0,!0,[["$data",Object(r.e)(e,s)],["$index",a],["$array",Object(r.e)(e,n)],["$parent",Object(r.e)(e,Object(w.e)(e).scope)]],...t.slice(1));2<t.length&&Array.isArray(c)?o.push(...c):o.push(c)}return Object(w.b)(e,[{symbol:e.config.reservedNames.Template}].concat(o.map(t=>[{symbol:e.config.reservedNames.quote},t])))}}];var Xt=[{name:"@",fn:(e,t)=>t=>Object(r.e)(e,t)},{name:"$=if",fn:(e,t)=>t=>[{symbol:"$=__if"},t[1],...t.slice(2).map(t=>Object(r.e)(e,t))]},{name:"$=for",fn:(e,t)=>t=>[{symbol:"$=__for"},t[1],...t.slice(2).map(t=>Object(r.e)(e,t))]}];var Ct=[];function Mt(e,t){e.funcs=(e.funcs||[]).concat(xt),e.macros=(e.macros||[]).concat(Xt),e.symbols=(e.symbols||[]).concat(Ct);const n=Object.entries(t.components).map(e=>({name:e[0],fn:Tt(e[1])}));return e.funcs=e.funcs.concat({name:e.reservedNames.Template,fn:Tt(t.jsxFlagment)},...n),e.funcSymbolResolverFallback=It,e.jsx=t.jsx,e.JsxFragment=t.jsxFlagment,e}const Pt=(e,t)=>(...t)=>{Object(k.a)("$__letAsync",t,2,2);let n=t[1];return"object"==typeof n&&"function"==typeof n.then||(n=Promise.resolve(n)),n=n.then(n=>{try{return G(e)(t[0],n),n}catch(e){return Promise.reject(e)}})},Lt=(Pt(null),(e,t)=>(...t)=>{Object(k.a)("$__setAsync",t,2,2);let n=t[1];return"object"==typeof n&&"function"==typeof n.then||(n=Promise.resolve(n)),n=n.then(n=>{try{return H(e)(t[0],n),n}catch(e){return Promise.reject(e)}})}),Dt=(Lt(null),(e,t)=>(...e)=>{Object(k.a)("$then",e,2,3);let t=e[0];if("object"==typeof t&&"function"==typeof t.then||(t=Promise.resolve(t)),"function"==typeof e[2])t=t.then(e[1],e[2]);else{if("function"!=typeof e[1])throw new Error("[SX] $then: Invalid argument(s): args[1] is not function.");t=t.then(e[1])}return t}),Rt=(Dt(),(e,t)=>(...e)=>{const t=e.slice(0);for(let e=0;e<t.length;e++)"object"==typeof t[e]&&"function"==typeof t[e].then||(t[e]=Promise.resolve(t[e]));return Promise.all(t)}),qt=(Rt(),(e,t)=>(...e)=>{const t=e.slice(0);for(let e=0;e<t.length;e++)"object"==typeof t[e]&&"function"==typeof t[e].then||(t[e]=Promise.resolve(t[e]));const n=e=>new Promise((t,n)=>e.then(n,t));return(e=>n(Promise.all(e.map(n))))(t)}),Ut=(qt(),(e,t)=>(...e)=>{Object(k.a)("$resolvePipe",e,1);let t=e[0];"object"==typeof t&&"function"==typeof t.then||(t=Promise.resolve(t));const n=e.slice(1);for(let e=0;e<n.length;e++)if("function"!=typeof n[e]){const t=n[e];n[e]=(()=>t)}let r=t;for(const e of n)r=r.then(e);return r}),Bt=(Ut(),(e,t)=>(...e)=>{Object(k.a)("$resolveFork",e,1);let t=e[0];"object"==typeof t&&"function"==typeof t.then||(t=Promise.resolve(t));const n=e.slice(1);for(let e=0;e<n.length;e++)if("function"!=typeof n[e]){const t=n[e];n[e]=(()=>t)}const r=new Array(n.length),o=new Array(n.length),a=[];for(let e=0;e<n.length;e++)a.push(new Promise((t,a)=>{r[e]=(r=>{let o=n[e](r);"object"==typeof o&&"function"==typeof o.then||(o=Promise.resolve(o)),o.then(e=>t(e)).catch(e=>a(e))}),o[e]=a}));return t.then(e=>r.forEach(t=>t(e)),e=>o.forEach(t=>t(e))),a});Bt();var Ft=[{name:"$__let-async",fn:Pt},{name:"$__set-async",fn:Lt},{name:"$then",fn:Dt},{name:"$resolve-all",fn:Rt},{name:"$resolve-any",fn:qt},{name:"$resolve-pipe",fn:Ut},{name:"$resolve-fork",fn:Bt}];var Wt=[{name:"$let-async",fn:(e,t)=>t=>(Object(k.a)("$let-async",t,3,3),[{symbol:"$__let-async"},Object(r.e)(e,t[1]),t[2]])},{name:"$set-async",fn:(e,t)=>t=>(Object(k.a)("$set-async",t,3,3),[{symbol:"$__set-async"},Object(r.e)(e,t[1]),t[2]])}];var Kt=[];function Vt(e){return e.funcs=(e.funcs||[]).concat(Ft),e.macros=(e.macros||[]).concat(Wt),e.symbols=(e.symbols||[]).concat(Kt),e}var Jt=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,c)}i((r=r.apply(e,t||[])).next())})};const Gt={eval:"$eval",quote:"$quote",spread:"$spread",car:"$car",cdr:"$cdr",cons:"$cons",atom:"$atom",eq:"$eq",list:"$list",let:"$clisp-let",lambda:"$lambda",self:"$self",defun:"$defun",if:"$if",cond:"$cond",while:"$while",doWhile:"$do-while",until:"$until",doUntil:"$do-until",get:"$get",defvar:"$clisp-defvar",setq:"$clisp-setq",set:"$set",not:"$not",and:"$and",or:"$or",Template:"Template"},Ht={raiseOnUnresolvedSymbol:!1,enableEvaluate:!0,enableHereDoc:!0,enableSpread:!0,enableTailCallOptimization:!0,stripComments:!1,wrapExternalValue:!0,returnMultipleRoot:!1,maxEvalCount:0,reservedNames:Gt,symbols:[],macros:[],funcs:[]};function zt(e,t,n,r){return{strings:"string"==typeof n?[n]:n,values:r||[],index:0,pos:0,line:0,evalCount:0,scopes:[{isBlockLocal:!1,scope:t}],macroMap:new Map(e.macros.map(e=>[e.name,e])),funcMap:new Map(e.funcs.map(e=>[e.name,e])),symbolMap:new Map(e.symbols.map(e=>[e.name,e])),config:e}}function Yt(e,t,n){return e.strings="string"==typeof t?[t]:t,e.values=n||[],e.index=0,e.pos=0,e.line=0,e.evalCount=0,e}function Qt(e){let t=e||Object.assign({},Ht),n={},r=[];const o=(e,n)=>{if(t.enableEvaluate)for(let t=0;t<n.length;t++)n[t]=Object(w.b)(e,n[t]);return t.returnMultipleRoot?1===n.length?n[0]:n:n[n.length-1]},a=(e,...a)=>{const s=zt(t,Object.assign({},n),e,a);return o(s,r.concat(v(s)))};return a.evaluateAST=(e=>{const a=zt(t,Object.assign({},n),"");return o(a,r.concat(e))}),a.repl=(()=>{const e=zt(t,Object.assign({},n),"");o(e,r.slice(0));return(t,...n)=>(Yt(e,t,n),o(e,v(e)))}),a.setGlobals=(e=>(n=Object.assign({},e||{}),a)),a.appendGlobals=(e=>(n=Object.assign({},n,e||{}),a)),a.setStartup=((e,...o)=>{const s=zt(t,Object.assign({},n),e,o);return r=v(s),a}),a.setStartupAST=(e=>(r=e,a)),a.appendStartup=((e,...o)=>{const s=zt(t,Object.assign({},n),e,o);return r=r.concat(v(s)),a}),a.appendStartupAST=(e=>(r=r.concat(e),a)),a.install=(e=>(t=e(t),a)),a}function Zt(e){let t=e||Object.assign({},Ht),n={},r=[];const o=(e,n)=>Jt(this,void 0,void 0,function*(){if(t.enableEvaluate)for(let t=0;t<n.length;t++)n[t]=Object(w.b)(e,n[t]),"object"==typeof n[t]&&"function"==typeof n[t].then&&(n[t]=yield n[t]);return t.returnMultipleRoot?1===n.length?n[0]:n:n[n.length-1]}),a=(e,...a)=>Jt(this,void 0,void 0,function*(){const s=zt(t,Object.assign({},n),e,a);return o(s,r.concat(v(s)))});return a.evaluateAST=(e=>{const a=zt(t,Object.assign({},n),"");return o(a,r.concat(e))}),a.repl=(()=>{const e=zt(t,Object.assign({},n),"");o(e,r.slice(0));return(t,...n)=>Jt(this,void 0,void 0,function*(){return Yt(e,t,n),o(e,v(e))})}),a.setGlobals=(e=>(n=Object.assign({},e||{}),a)),a.appendGlobals=(e=>(n=Object.assign({},n,e||{}),a)),a.setStartup=((e,...o)=>{const s=zt(t,Object.assign({},n),e,o);return r=v(s),a}),a.setStartupAST=(e=>(r=e,a)),a.appendStartup=((e,...o)=>{const s=zt(t,Object.assign({},n),e,o);return r=r.concat(v(s)),a}),a.appendStartupAST=(e=>(r=r.concat(e),a)),a.install=(e=>(t=e(t),a)),a}const en=(()=>{const e=Object.assign({},Ht);return e.enableEvaluate=!1,e.returnMultipleRoot=!0,Qt(e)})(),tn=(()=>{let e=Object.assign({},Ht);return(e=Et(e=ze(e=Se(e)))).stripComments=!0,Qt(e)})(),nn=tn,rn=tn,on=(()=>{let e=Object.assign({},Ht);return(e=Vt(e=Et(e=ze(e=Se(e))))).stripComments=!0,Zt(e)})(),an=on,sn=on,cn=(()=>{let e=Object.assign({},Ht);return(e=Et(e=ze(e=Se(e)))).stripComments=!0,e.returnMultipleRoot=!0,Qt(e)})(),ln=(()=>{let e=Object.assign({},Ht);return(e=Vt(e=Et(e=ze(e=Se(e))))).stripComments=!0,e.returnMultipleRoot=!0,Zt(e)})();function un(e){let t=Object.assign({},Ht);return(t=Mt(t=Et(t=ze(t=Se(t))),e)).stripComments=!0,Qt(t)}function fn(e){let t=Object.assign({},Ht);return(t=Mt(t=Vt(t=Et(t=ze(t=Se(t)))),e)).stripComments=!0,Zt(t)}n.d(t,"builtinOperators",function(){return bn}),n.d(t,"builtinMacros",function(){return mn}),n.d(t,"builtinSymbols",function(){return pn}),n.d(t,"defaultReservedNames",function(){return Gt}),n.d(t,"defaultConfig",function(){return Ht}),n.d(t,"SExpression",function(){return Qt}),n.d(t,"SExpressionAsync",function(){return Zt}),n.d(t,"S",function(){return en}),n.d(t,"L",function(){return tn}),n.d(t,"LS",function(){return nn}),n.d(t,"lisp",function(){return rn}),n.d(t,"L_async",function(){return on}),n.d(t,"LS_async",function(){return an}),n.d(t,"lisp_async",function(){return sn}),n.d(t,"LM",function(){return cn}),n.d(t,"LM_async",function(){return ln}),n.d(t,"LSX",function(){return un}),n.d(t,"LSX_async",function(){return fn}),n.d(t,"installCore",function(){return Se}),n.d(t,"installArithmetic",function(){return ze}),n.d(t,"installSequence",function(){return Et}),n.d(t,"installJsx",function(){return Mt}),n.d(t,"installConcurrent",function(){return Vt});const bn={core:he,arithmetic:Je,sequence:wt,jsx:xt,concurrent:Ft},mn={core:ve,arithmetic:Ge,sequence:St,jsx:Xt,concurrent:Wt},pn={core:we,arithmetic:He,sequence:kt,jsx:Ct,concurrent:Kt}}])});
//# sourceMappingURL=liyad.min.js.map